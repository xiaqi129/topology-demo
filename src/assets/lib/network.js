!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("lodash")):"function"==typeof define&&define.amd?define(["lodash"],e):"object"==typeof exports?exports.network=e(require("lodash")):t.network=e(t._)}(window,function(d){return f={},g.m=e=[function(t,e,r){"use strict";e.__esModule=!0,e.VERSION="4.8.6",e.PI_2=2*Math.PI,e.RAD_TO_DEG=180/Math.PI,e.DEG_TO_RAD=Math.PI/180,e.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},e.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},e.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},e.SCALE_MODES={LINEAR:0,NEAREST:1},e.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},e.GC_MODES={AUTO:0,MANUAL:1},e.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,e.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,e.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,e.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},e.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},e.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},e.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},e.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},function(t,e,r){"use strict";e.__esModule=!0,e.autoDetectRenderer=e.Application=e.Filter=e.SpriteMaskFilter=e.Quad=e.RenderTarget=e.ObjectRenderer=e.WebGLManager=e.Shader=e.CanvasRenderTarget=e.TextureUvs=e.VideoBaseTexture=e.BaseRenderTexture=e.RenderTexture=e.BaseTexture=e.TextureMatrix=e.Texture=e.Spritesheet=e.CanvasGraphicsRenderer=e.GraphicsRenderer=e.GraphicsData=e.Graphics=e.TextMetrics=e.TextStyle=e.Text=e.SpriteRenderer=e.CanvasTinter=e.CanvasSpriteRenderer=e.Sprite=e.TransformBase=e.TransformStatic=e.Transform=e.Container=e.DisplayObject=e.Bounds=e.glCore=e.WebGLRenderer=e.CanvasRenderer=e.ticker=e.utils=e.settings=void 0;var i=r(0);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var n=r(4);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var o=r(6);Object.defineProperty(e,"glCore",{enumerable:!0,get:function(){return Y(o).default}});var s=r(39);Object.defineProperty(e,"Bounds",{enumerable:!0,get:function(){return Y(s).default}});var a=r(65);Object.defineProperty(e,"DisplayObject",{enumerable:!0,get:function(){return Y(a).default}});var h=r(18);Object.defineProperty(e,"Container",{enumerable:!0,get:function(){return Y(h).default}});var u=r(67);Object.defineProperty(e,"Transform",{enumerable:!0,get:function(){return Y(u).default}});var l=r(66);Object.defineProperty(e,"TransformStatic",{enumerable:!0,get:function(){return Y(l).default}});var c=r(41);Object.defineProperty(e,"TransformBase",{enumerable:!0,get:function(){return Y(c).default}});var d=r(43);Object.defineProperty(e,"Sprite",{enumerable:!0,get:function(){return Y(d).default}});var f=r(162);Object.defineProperty(e,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return Y(f).default}});var p=r(26);Object.defineProperty(e,"CanvasTinter",{enumerable:!0,get:function(){return Y(p).default}});var y=r(165);Object.defineProperty(e,"SpriteRenderer",{enumerable:!0,get:function(){return Y(y).default}});var g=r(181);Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return Y(g).default}});var v=r(80);Object.defineProperty(e,"TextStyle",{enumerable:!0,get:function(){return Y(v).default}});var m=r(81);Object.defineProperty(e,"TextMetrics",{enumerable:!0,get:function(){return Y(m).default}});var _=r(183);Object.defineProperty(e,"Graphics",{enumerable:!0,get:function(){return Y(_).default}});var x=r(82);Object.defineProperty(e,"GraphicsData",{enumerable:!0,get:function(){return Y(x).default}});var b=r(185);Object.defineProperty(e,"GraphicsRenderer",{enumerable:!0,get:function(){return Y(b).default}});var w=r(192);Object.defineProperty(e,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return Y(w).default}});var T=r(193);Object.defineProperty(e,"Spritesheet",{enumerable:!0,get:function(){return Y(T).default}});var E=r(8);Object.defineProperty(e,"Texture",{enumerable:!0,get:function(){return Y(E).default}});var S=r(78);Object.defineProperty(e,"TextureMatrix",{enumerable:!0,get:function(){return Y(S).default}});var M=r(15);Object.defineProperty(e,"BaseTexture",{enumerable:!0,get:function(){return Y(M).default}});var O=r(46);Object.defineProperty(e,"RenderTexture",{enumerable:!0,get:function(){return Y(O).default}});var P=r(73);Object.defineProperty(e,"BaseRenderTexture",{enumerable:!0,get:function(){return Y(P).default}});var C=r(70);Object.defineProperty(e,"VideoBaseTexture",{enumerable:!0,get:function(){return Y(C).default}});var A=r(71);Object.defineProperty(e,"TextureUvs",{enumerable:!0,get:function(){return Y(A).default}});var I=r(74);Object.defineProperty(e,"CanvasRenderTarget",{enumerable:!0,get:function(){return Y(I).default}});var R=r(21);Object.defineProperty(e,"Shader",{enumerable:!0,get:function(){return Y(R).default}});var D=r(20);Object.defineProperty(e,"WebGLManager",{enumerable:!0,get:function(){return Y(D).default}});var N=r(27);Object.defineProperty(e,"ObjectRenderer",{enumerable:!0,get:function(){return Y(N).default}});var L=r(29);Object.defineProperty(e,"RenderTarget",{enumerable:!0,get:function(){return Y(L).default}});var k=r(79);Object.defineProperty(e,"Quad",{enumerable:!0,get:function(){return Y(k).default}});var B=r(76);Object.defineProperty(e,"SpriteMaskFilter",{enumerable:!0,get:function(){return Y(B).default}});var F=r(77);Object.defineProperty(e,"Filter",{enumerable:!0,get:function(){return Y(F).default}});var j=r(83);Object.defineProperty(e,"Application",{enumerable:!0,get:function(){return Y(j).default}});var U=r(84);Object.defineProperty(e,"autoDetectRenderer",{enumerable:!0,get:function(){return U.autoDetectRenderer}});var z=V(r(2)),G=V(r(45)),X=Y(r(3)),W=Y(r(19)),H=Y(r(28));function V(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function Y(t){return t&&t.__esModule?t:{default:t}}e.settings=X.default,e.utils=z,e.ticker=G,e.CanvasRenderer=W.default,e.WebGLRenderer=H.default},function(t,e,r){"use strict";e.__esModule=!0,e.premultiplyBlendMode=e.BaseTextureCache=e.TextureCache=e.earcut=e.mixins=e.pluginTarget=e.EventEmitter=e.removeItems=e.isMobile=void 0,e.uid=function(){return++p},e.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},e.hex2string=function(t){return t=t.toString(16),"#"+("000000".substr(0,6-t.length)+t)},e.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},e.getResolutionOfUrl=function(t,e){var r=n.default.RETINA_PREFIX.exec(t);return r?parseFloat(r[1]):void 0!==e?e:1},e.decomposeDataUri=function(t){var e=i.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},e.getUrlFileExtension=function(t){var e=i.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()},e.getSvgSize=function(t){var e=i.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r},e.skipHello=function(){y=!0},e.sayHello=function(t){if(!y){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var e=["\n %c %c %c PixiJS "+i.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+i.VERSION+" - "+t+" - http://www.pixijs.com/");y=!0}},e.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),r=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),i=!(!r||!r.getContextAttributes().stencil);if(r){var n=r.getExtension("WEBGL_lose_context");n&&n.loseContext()}return r=null,i}catch(t){return!1}},e.sign=function(t){return 0===t?0:t<0?-1:1},e.destroyTextureCache=function(){var t=void 0;for(t in g)g[t].destroy();for(t in v)v[t].destroy()},e.clearTextureCache=function(){var t=void 0;for(t in g)delete g[t];for(t in v)delete v[t]},e.correctBlendMode=function(t,e){return m[e?1:0][t]},e.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var r=t>>16&255,i=t>>8&255,n=255&t;return(255*e<<24)+((r=r*e+.5|0)<<16)+((i=i*e+.5|0)<<8)+(n*e+.5|0)},e.premultiplyRgba=function(t,e,r,i){return r=r||new Float32Array(4),i||void 0===i?(r[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e):(r[0]=t[0],r[1]=t[1],r[2]=t[2]),r[3]=e,r},e.premultiplyTintToRgba=function(t,e,r,i){return(r=r||new Float32Array(4))[0]=(t>>16&255)/255,r[1]=(t>>8&255)/255,r[2]=(255&t)/255,!i&&void 0!==i||(r[0]*=e,r[1]*=e,r[2]*=e),r[3]=e,r};var i=r(0),n=f(r(3)),o=f(r(12)),s=f(r(150)),a=d(r(151)),h=d(r(40)),u=f(r(152)),l=f(r(153)),c=f(r(42));function d(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var p=0,y=!1;e.isMobile=h,e.removeItems=u.default,e.EventEmitter=o.default,e.pluginTarget=s.default,e.mixins=a,e.earcut=c.default;var g=e.TextureCache=Object.create(null),v=e.BaseTextureCache=Object.create(null),m=e.premultiplyBlendMode=(0,l.default)()},function(t,e,r){"use strict";e.__esModule=!0;var i=o(r(148)),n=o(r(149));function o(t){return t&&t.__esModule?t:{default:t}}e.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,i.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,n.default)(),MESH_CANVAS_PADDING:0}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(35);Object.defineProperty(e,"Point",{enumerable:!0,get:function(){return d(i).default}});var n=r(54);Object.defineProperty(e,"ObservablePoint",{enumerable:!0,get:function(){return d(n).default}});var o=r(36);Object.defineProperty(e,"Matrix",{enumerable:!0,get:function(){return d(o).default}});var s=r(55);Object.defineProperty(e,"GroupD8",{enumerable:!0,get:function(){return d(s).default}});var a=r(138);Object.defineProperty(e,"Circle",{enumerable:!0,get:function(){return d(a).default}});var h=r(139);Object.defineProperty(e,"Ellipse",{enumerable:!0,get:function(){return d(h).default}});var u=r(140);Object.defineProperty(e,"Polygon",{enumerable:!0,get:function(){return d(u).default}});var l=r(37);Object.defineProperty(e,"Rectangle",{enumerable:!0,get:function(){return d(l).default}});var c=r(141);function d(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"RoundedRectangle",{enumerable:!0,get:function(){return d(c).default}})},function(t,e){t.exports=d},function(t,e,r){var i={createContext:r(142),setVertexAttribArrays:r(56),GLBuffer:r(143),GLFramebuffer:r(144),GLShader:r(145),GLTexture:r(57),VertexArrayObject:r(146),shader:r(147)};void 0!==t&&t.exports&&(t.exports=i),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=i)},function(t,e,r){(function(t){function r(t,e){for(var r=0,i=t.length-1;0<=i;i--){var n=t[i];"."===n?t.splice(i,1):".."===n?(t.splice(i,1),r++):r&&(t.splice(i,1),r--)}if(e)for(;r--;)t.unshift("..");return t}function i(t){return n.exec(t).slice(1)}var n=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/;function o(t,e){if(t.filter)return t.filter(e);for(var r=[],i=0;i<t.length;i++)e(t[i],i,t)&&r.push(t[i]);return r}e.resolve=function(){for(var e="",i=!1,n=arguments.length-1;-1<=n&&!i;n--){var s=0<=n?arguments[n]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(e=s+"/"+e,i="/"===s.charAt(0))}return(i?"/":"")+(e=r(o(e.split("/"),function(t){return!!t}),!i).join("/"))||"."},e.normalize=function(t){var i=e.isAbsolute(t),n="/"===s(t,-1);return(t=r(o(t.split("/"),function(t){return!!t}),!i).join("/"))||i||(t="."),t&&n&&(t+="/"),(i?"/":"")+t},e.isAbsolute=function(t){return"/"===t.charAt(0)},e.join=function(){var t=Array.prototype.slice.call(arguments,0);return e.normalize(o(t,function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},e.relative=function(t,r){function i(t){for(var e=0;e<t.length&&""===t[e];e++);for(var r=t.length-1;0<=r&&""===t[r];r--);return r<e?[]:t.slice(e,r-e+1)}t=e.resolve(t).substr(1),r=e.resolve(r).substr(1);for(var n=i(t.split("/")),o=i(r.split("/")),s=Math.min(n.length,o.length),a=s,h=0;h<s;h++)if(n[h]!==o[h]){a=h;break}var u=[];for(h=a;h<n.length;h++)u.push("..");return(u=u.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(t){var e=i(t),r=e[0],n=e[1];return r||n?r+(n=n&&n.substr(0,n.length-1)):"."},e.basename=function(t,e){var r=i(t)[2];return e&&r.substr(-1*e.length)===e&&(r=r.substr(0,r.length-e.length)),r},e.extname=function(t){return i(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,r){return t.substr(e,r)}:function(t,e,r){return e<0&&(e=t.length+e),t.substr(e,r)}}).call(this,r(168))},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=c(r(15)),o=c(r(70)),s=c(r(71)),a=c(r(12)),h=r(4),u=r(2),l=c(r(3));function c(t){return t&&t.__esModule?t:{default:t}}var d,f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,d=a.default),p.prototype.update=function(){this.baseTexture.update()},p.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new h.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},p.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},p.prototype.destroy=function(t){this.baseTexture&&(t&&(u.TextureCache[this.baseTexture.imageUrl]&&p.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,p.removeFromCache(this),this.textureCacheIds=null},p.prototype.clone=function(){return new p(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},p.prototype._updateUvs=function(){this._uvs||(this._uvs=new s.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},p.fromImage=function(t,e,r,i){var o=u.TextureCache[t];return o||(o=new p(n.default.fromImage(t,e,r,i)),p.addToCache(o,t)),o},p.fromFrame=function(t){var e=u.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},p.fromCanvas=function(t,e,r){var i=2<arguments.length&&void 0!==r?r:"canvas";return new p(n.default.fromCanvas(t,e,i))},p.fromVideo=function(t,e,r,i){return"string"==typeof t?p.fromVideoUrl(t,e,r,i):new p(o.default.fromVideo(t,e,i))},p.fromVideoUrl=function(t,e,r,i){return new p(o.default.fromUrl(t,e,r,i))},p.from=function(t){return"string"!=typeof t?t instanceof HTMLImageElement?new p(n.default.from(t)):t instanceof HTMLCanvasElement?p.fromCanvas(t,l.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?p.fromVideo(t):t instanceof n.default?new p(t):t:u.TextureCache[t]||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?p.fromVideoUrl(t):p.fromImage(t))},p.fromLoader=function(t,e,r){var i=new n.default(t,void 0,(0,u.getResolutionOfUrl)(e)),o=new p(i);return i.imageUrl=e,r=r||e,n.default.addToCache(o.baseTexture,r),p.addToCache(o,r),r!==e&&(n.default.addToCache(o.baseTexture,e),p.addToCache(o,e)),o},p.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),u.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),u.TextureCache[e]=t)},p.removeFromCache=function(t){if("string"==typeof t){var e=u.TextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete u.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var i=0;i<t.textureCacheIds.length;++i)u.TextureCache[t.textureCacheIds[i]]===t&&delete u.TextureCache[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(p,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,r=t.y,i=t.width,n=t.height,o=e+i>this.baseTexture.width,s=r+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",h="X: "+e+" + "+i+" = "+(e+i)+" > "+this.baseTexture.width,u="Y: "+r+" + "+n+" = "+(r+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+h+" "+a+" "+u)}this.valid=i&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),p);function p(t,e,r,i,n,o){!function(t,e){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,d.call(this));if(s.noFrame=!1,e||(s.noFrame=!0,e=new h.Rectangle(0,0,1,1)),t instanceof p&&(t=t.baseTexture),s.baseTexture=t,s._frame=e,s.trim=i,s.valid=!1,s.requiresUpdate=!1,s._uvs=null,s.orig=r||e,s._rotate=Number(n||0),!0===n)s._rotate=2;else if(s._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return t.hasLoaded?(s.noFrame&&(e=new h.Rectangle(0,0,t.width,t.height),t.on("update",s.onBaseTextureUpdated,s)),s.frame=e):t.once("loaded",s.onBaseTextureLoaded,s),s.defaultAnchor=o?new h.Point(o.x,o.y):new h.Point(0,0),s._updateID=0,s.transform=null,s.textureCacheIds=[],s}function y(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}(e.default=f).EMPTY=new f(new n.default),y(f.EMPTY),y(f.EMPTY.baseTexture),f.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new f(new n.default(t))}(),y(f.WHITE),y(f.WHITE.baseTexture)},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(r(5)),h=r(11),u=r(13),l=r(14),c=r(10),d=r(50),f=PIXI.Point,p=(n(y,s=h.CommonElement),y.prototype.draw=function(){this.clearEdgeRelatedGraph();var t=this.defaultStyle,e=t.lineDistance,r=this.getLineNodePosition(this.startNode),i=this.getLineNodePosition(this.endNode),n=this.getAngle(r,i);r=this.getAdjustedLocation(r,-1,n,this.getDistance(this.startNode,e)),i=this.getAdjustedLocation(i,1,n,this.getDistance(this.endNode,e));var o=[];0===t.lineType&&0===t.lineFull?o=this.drawLineEdge(r,i,this.defaultStyle):1===t.lineType&&0===t.lineFull?o=this.drawBezierEdge(r,i,this.defaultStyle):0===t.lineType&&1===t.lineFull?o=this.drawImaginaryEdge(r,i,this.defaultStyle):1===t.lineType&&1===t.lineFull&&(o=this.drawDottedEdge(r,i,this.defaultStyle)),this.addChildren(o),this.addOthers()},y.prototype.selectOn=function(){this.setStyle({lineColor:149911})},y.prototype.selectOff=function(){this.setStyle({lineColor:this.defaultColor})},y.prototype.setTooltip=function(t,e){return this.removeListener("mouseover"),this.removeListener("mouseout"),this.tooltip.addTooltip(this,t||this.startNode.id+"  >>>>  "+this.endNode.id,e),this.tooltip},y.prototype.setLabel=function(t,e,r){r&&a.extend(this.labelStyle,r);var i=this.getChildByName("edge_srclabel"),n=this.getChildByName("edge_endlabel");if((i||n)&&(i.destroy(),n.destroy()),t||e){var o=new l.Label(t,this.labelStyle),s=new l.Label(e,this.labelStyle);return this.labelContent.push(t),this.labelContent.push(e),this.labelContent=a.uniq(this.labelContent),o.name="edge_srclabel",s.name="edge_endlabel",this.setLabelPosition(o,s),this.addChild(o),this.addChild(s),1===this.defaultStyle.lineType&&this.draw(),{src:o,end:s}}},y.prototype.setMark=function(t,e){if(t){this.removeChild(this.getChildByName("src_mark_background")),this.removeChild(this.getChildByName("src_mark_label"));var r=new PIXI.Graphics;r.name="src_mark_background",r.beginFill(t.color,1),r.drawCircle(0,0,7),r.endFill(),this.addChild(r);var i=new l.Label(t.content,{fill:16777215,fontFamily:"Times New Roman",fontWeight:"bold"});i.name="src_mark_label",i.setPosition(4),this.addChild(i),this.setChildIndex(i,this.children.length-1),this.setChildIndex(i,this.children.length-2)}if(e){this.removeChild(this.getChildByName("end_mark_background")),this.removeChild(this.getChildByName("end_mark_label"));var n=new PIXI.Graphics;n.name="end_mark_background",n.beginFill(e.color,1),n.drawCircle(0,0,7),n.endFill(),this.addChild(n);var o=new l.Label(e.content,{fill:16777215,fontFamily:"Times New Roman",fontWeight:"bold"});o.name="end_mark_label",o.setPosition(4),this.addChild(o),this.setChildIndex(o,this.children.length-1),this.setChildIndex(o,this.children.length-2)}},y.prototype.getPartPosition=function(t){var e=this.edgeLength(this.startNode.x,this.startNode.y,this.endNode.x,this.endNode.y)*t,r=Math.atan2(this.startNode.y-this.endNode.y,this.startNode.x-this.endNode.x),i={src:{x:0,y:0},end:{x:0,y:0}};return 1!==this.defaultStyle.lineType&&(i.src.x=this.startNode.x-e*Math.cos(r),i.src.y=this.startNode.y-e*Math.sin(r),i.end.x=this.endNode.x+e*Math.cos(r),i.end.y=this.endNode.y+e*Math.sin(r)),i},y.prototype.setIncluedGroup=function(t){this.includeGroup.push(t)},y.prototype.edgeNodesSortUIDStr=function(t){var e=t||this;return[e.startNode.getUID(),e.endNode.getUID()].sort().join()},y.prototype.getSrcNode=function(){return this.startNode},y.prototype.getTargetNode=function(){return this.endNode},y.prototype.readyLinkArray=function(){var t=this;this.startNode instanceof c.Node?a.indexOf(this.startNode.linksArray,this)<0&&this.startNode.linksArray.push(this):a.each(this.startNode.childrenNode,function(e){a.indexOf(e.linksArray,t)<0&&e.linksArray.push(t)}),this.endNode instanceof c.Node?a.indexOf(this.endNode.linksArray,this)<0&&this.endNode.linksArray.push(this):a.each(this.endNode.childrenNode,function(e){a.indexOf(e.linksArray,t)<0&&e.linksArray.push(t)})},y.prototype.analysisBrotherEdge=function(){var t=this,e=this.startNode.linksArray;this.brotherEdges=a.filter(e,function(e){return e.startNode===t.startNode&&e.endNode===t.endNode||e.startNode===t.endNode&&e.endNode===t.startNode}),a.remove(this.brotherEdges,function(e){return e===t})},y.prototype.getLineNodePosition=function(t){var e=0,r=0;if(t instanceof c.Node&&(e=t.x,r=t.y),t instanceof u.Group){var i=t.getGroupPosition();r=i?(e=i.x,i.y):e=0}return{x:e,y:r}},y.prototype.calcEdgePoints=function(t,e){var r=this.defaultStyle.lineWidth,i=this.defaultStyle.bezierLineDistance,n=this.getAngle(),o=3*r,s=t.x+Math.cos(n)*i,a=t.y-Math.sin(n)*i,h=e.x+Math.cos(n)*i,u=e.y-Math.sin(n)*i,l={start:{x:s,y:a},end:{x:h,y:u}};return this.polygonData=[],s<h&&a<u||h<s&&u<a?this.polygonData.push(s-o,a+o,s+o,a-o,h+o,u-o,h-o,u+o):h<s&&a<u||s<h&&u<a?this.polygonData.push(s-o,a-o,s+o,a+o,h+o,u+o,h-o,u-o):s===h&&(u<a||a<u)?this.polygonData.push(s-o,a,s+o,a,h+o,u,h-o,u):a==u&&(s<h||h<s)&&this.polygonData.push(s,a+o,s,a-o,h,u-o,h,u+o),l},y.prototype.calcDottedEdgePoints=function(t,e,r){var i=this.getAngle(),n=t.x-e.x,o=t.y-e.y,s=Math.sqrt(n*n+o*o)/10/2,a=10*Math.sin(i),h=10*Math.cos(i),u=this.defaultStyle.bezierLineDistance,l=[],c=t.x+Math.cos(i)*u,d=t.y-Math.sin(i)*u;this.calcEdgePoints(t,e);for(var p=0;p<s;p+=1){var y={start:{x:0,y:0},end:{x:0,y:0}},g=new f(c,d),v=new f(c-a,d-h);c-=2*a,d-=2*h,y.start=g,y.end=v,l.push(y)}return l},y.prototype.drawEdge=function(t,e){var r=this.defaultStyle;this.hitArea=new PIXI.Polygon(this.polygonData),t.lineStyle(r.lineWidth,r.lineColor),t.moveTo(e.start.x,e.start.y),t.lineTo(e.end.x,e.end.y)},y.prototype.drawImaginaryLink=function(t,e){var r=this.defaultStyle,i=this.hitTestRectangle(this.startNode,this.endNode);this.hitArea=new PIXI.Polygon(this.polygonData),i||a.each(e,function(e){t.lineStyle(r.lineWidth,r.lineColor),t.moveTo(e.start.x,e.start.y),t.lineTo(e.end.x,e.end.y)})},y.prototype.edgeLength=function(t,e,r,i){return Math.pow(Math.pow(t-r,2)+Math.pow(e-i,2),.5)},y.prototype.getAngle=function(t,e){var r=t||this.getLineNodePosition(this.startNode),i=e||this.getLineNodePosition(this.endNode);return Math.atan2(r.x-i.x,r.y-i.y)},y.prototype.getControlPoint=function(t,e){var r=t.x,i=t.y,n=e.x,o=e.y,s=Math.atan2(r-n,i-o),a=.3*this.edgeLength(r,i,n,o);return[r-a*Math.sin(s),i-a*Math.cos(s),n+a*Math.sin(s),o+a*Math.cos(s)]},y.prototype.getParallelPoint=function(t,e,r){var i=a.get(t,"x",0),n=a.get(t,"y",0);return{x:i+e*Math.cos(r),y:n-e*Math.sin(r)}},y.prototype.drawBezierCurve=function(t,e,r,i,n){this.polygonData=[];var o=this.getParallelPoint({x:e.shift(),y:e.shift()},i,r),s=this.getChildByName("edge_srclabel"),a=this.getChildByName("edge_endlabel");return this.polygonData.push(o.x,o.y),t.moveTo(o.x,o.y),e.reverse(),e[1]=e[1]+i*Math.cos(r),e[0]=e[0]-i*Math.sin(r),e.reverse(),e[0]=e[0]+n*Math.cos(r),e[1]=e[1]-n*Math.sin(r),e[2]=e[2]+n*Math.cos(r),e[3]=e[3]-n*Math.sin(r),(s||a)&&(s.x=e[0],s.y=e[1],a.x=e[2],a.y=e[3]),this.polygonData=this.polygonData.concat(e),t.bezierCurveTo.apply(t,e),this.hitArea=new PIXI.Polygon(this.polygonData),[o.x,o.y].concat(e)},y.prototype.drawDottedBezierCurve=function(t,e,r,i,n){var o=this.getParallelPoint({x:e.shift(),y:e.shift()},i,r),s=this.defaultStyle,h=this.getChildByName("bezier");h&&h.destroy();var u=new PIXI.Graphics;u.name="bezier",u.lineStyle(0,s.lineColor),this.polygonData=[];var l=this.getChildByName("edge_srclabel"),c=this.getChildByName("edge_endlabel");this.polygonData.push(o.x,o.y),u.moveTo(o.x,o.y),e.reverse(),e[1]=e[1]+i*Math.cos(r),e[0]=e[0]-i*Math.sin(r),e.reverse(),e[0]=e[0]+n*Math.cos(r),e[1]=e[1]-n*Math.sin(r),e[2]=e[2]+n*Math.cos(r),e[3]=e[3]-n*Math.sin(r),(l||c)&&(l.x=e[0],l.y=e[1],c.x=e[2],c.y=e[3]),u.bezierCurveTo.apply(u,e),this.addChild(u),this.polygonData=this.polygonData.concat(e),this.hitArea=new PIXI.Polygon(this.polygonData);var d=a.chunk(u.currentPath.shape.points,4);return a.each(d,function(e){var r=Number(e[0]),i=Number(e[1]),n=Number(e[2]),o=Number(e[3]);t.moveTo(r,i),t.lineTo(n,o)}),[o.x,o.y].concat(e)},y.prototype.getAdjustedLocation=function(t,e,r,i){return{x:t.x+e*i*Math.sin(r),y:t.y+e*i*Math.cos(r)}},y.prototype.getArrowPints=function(t,e,r){void 0===r&&(r=!0);var i=this.defaultStyle.arrowAngle,n=this.defaultStyle.arrowMiddleLength,o=e+a.divide(i*Math.PI,180),s=e-a.divide(i*Math.PI,180),h=t.x,u=t.y,l=r?1:-1,c=this.defaultStyle;return{p1:{x:h+0,y:u+0},p2:{x:h+c.arrowLength*Math.sin(o)*l,y:u+c.arrowLength*Math.cos(o)*l},p3:{x:h+n*Math.sin(e)*l,y:u+n*Math.cos(e)*l},p4:{x:h+c.arrowLength*Math.sin(s)*l,y:u+c.arrowLength*Math.cos(s)*l},p5:{x:h+0,y:u+0}}},y.prototype.createArrow=function(t,e,r){void 0===r&&(r=!0);var i=this.defaultStyle;this.arrow.name="edge_arrow",this.arrow.lineStyle(i.arrowWidth,i.arrowColor,1),i.fillArrow&&this.arrow.beginFill(i.arrowColor);var n=this.getArrowPints(t,e,r);return this.arrow.drawPolygon(a.flatMap(a.map(a.values(n),function(t){return[t.x,t.y]}))),this.arrow.endFill(),this.arrow},y.prototype.clearEdgeRelatedGraph=function(){this.edge.clear(),this.arrow.clear()},y.prototype.getDistance=function(t,e){var r;if(t instanceof c.Node)r=t.getWidth()<t.getHeight()?t.getWidth()/2:t.getHeight()/2;else{var i=Math.atan2(.5*t.getWidth(),.5*t.getHeight()),n=this.getAngle(),o=0;n<=i&&-i<=n&&(o=.5*t.getHeight()/Math.cos(n)),n<=Math.PI&&n>=Math.PI-i&&(o=.5*t.getHeight()/Math.cos(n)),n<=-(Math.PI-i)&&n>=-Math.PI&&(o=.5*t.getHeight()/Math.cos(n)),n<Math.PI-i&&i<n&&(o=.5*t.getWidth()/Math.sin(n)),n<-i&&n>-(Math.PI-i)&&(o=.5*t.getWidth()/Math.sin(n)),r=Math.abs(o)}return r+e},y.prototype.createLinkEdge=function(t,e,r){var i=this.calcEdgePoints(t,e);return this.drawEdge(this.edge,i),this.edge},y.prototype.createImaginaryEdge=function(t,e,r){var i=this.calcDottedEdgePoints(t,e,r.lineWidth);return this.drawImaginaryLink(this.edge,i),this.edge},y.prototype.createLinkArrows=function(t,e,r){var i=this,n=[[!0],[!1],[!0,!1],[void 0]][r.arrowType],o=this.defaultStyle.bezierLineDistance,s=this.getAngle(),h={x:t.x+Math.cos(s)*o,y:t.y-Math.sin(s)*o},u={x:e.x+Math.cos(s)*o,y:e.y-Math.sin(s)*o};return a.each(n,function(t){if(void 0!==t){var e=t?u:h;i.createArrow(e,s,t)}}),this.arrow},y.prototype.createBezierEdge=function(t,e,r,i){var n=i.bezierLineDistance,o=i.bezierLineDegree,s=this.getAngle();return this.edge.lineStyle(i.lineWidth,i.lineColor),this.drawBezierCurve(this.edge,a.flatten([[t.x,t.y],r,[e.x,e.y]]),s,n,o)},y.prototype.bezierTangent=function(t,e,r,i,n){return 3*n*n*(3*e-t-3*r+i)+6*n*(t-2*e+r)+3*(-t+e)},y.prototype.getTangentAngle=function(t,e,r,i){var n=this.bezierTangent(t.x,e[0],e[2],r.x,i),o=this.bezierTangent(t.y,e[1],e[3],r.y,i);return Math.atan2(n,o)+Math.PI},y.prototype.bezierArrowPoints=function(t,e,r,i,n,o){var s=e+i*Math.PI/180,a=e-i*Math.PI/180,h=t.x,u=t.y,l=r?1:-1;return{p1:{x:h,y:u},p2:{x:h+n*Math.sin(s)*l,y:u+n*Math.cos(s)*l},p3:{x:h+o*Math.sin(e)*l,y:u+o*Math.cos(e)*l},p4:{x:h+n*Math.sin(a)*l,y:u+n*Math.cos(a)*l}}},y.prototype.createBezierArrows=function(t,e,r,i){this.arrow=new PIXI.Graphics,this.arrow.lineStyle(i.arrowWidth,i.arrowColor,1),i.fillArrow&&this.arrow.beginFill(i.arrowColor);var n=this.getTangentAngle(t,r,e,1),o=this.bezierArrowPoints(e,n,1,this.defaultStyle.arrowAngle,this.defaultStyle.arrowLength,this.defaultStyle.arrowMiddleLength);return this.arrow.drawPolygon(a.flatMap(a.map(a.values(o),function(t){return[t.x,t.y]}))),this.arrow},y.prototype.drawLineEdge=function(t,e,r){return[this.createLinkEdge(t,e,r),this.createLinkArrows(t,e,r)]},y.prototype.drawBezierEdge=function(t,e,r){var i=this.getControlPoint(t,e),n=this.createBezierEdge(t,e,i,r);if(3===r.arrowType)return[this.edge];var o=this.createBezierArrows({x:n[0],y:n[1]},{x:n[n.length-2],y:n[n.length-1]},[n[2],n[3],n[4],n[5]],r);return[this.edge,o]},y.prototype.drawImaginaryEdge=function(t,e,r){var i=this.getParallelPoint(t,this.defaultStyle.lineDistance,this.getAngle()),n=this.getParallelPoint(e,this.defaultStyle.lineDistance,this.getAngle());return[this.createImaginaryEdge(i,n,r),this.createLinkArrows(t,e,r)]},y.prototype.drawDottedEdge=function(t,e,r){var i=this.getControlPoint(t,e),n=r.bezierLineDistance,o=r.bezierLineDegree,s=this.getAngle();this.edge.lineStyle(r.lineWidth,r.lineColor);var h=this.drawDottedBezierCurve(this.edge,a.flatten([[t.x,t.y],i,[e.x,e.y]]),s,n,o);if(3===r.arrowType)return[this.edge];var u=this.createBezierArrows({x:h[0],y:h[1]},{x:h[h.length-2],y:h[h.length-1]},[h[2],h[3],h[4],h[5]],r);return[this.edge,u]},y.prototype.addOthers=function(){var t=this.getPartPosition(.3),e=this.getPartPosition(.5),r=this.getChildByName("bundle_label"),i=this.getChildByName("label_background"),n=this.getChildByName("src_mark_background"),o=this.getChildByName("src_mark_label"),s=this.getChildByName("end_mark_background"),a=this.getChildByName("end_mark_label"),h=this.getChildByName("edge_srclabel"),u=this.getChildByName("edge_endlabel");r&&i&&(r.x=e.src.x,r.y=e.src.y,i.x=e.src.x,i.y=e.src.y,this.setChildIndex(r,this.children.length-1),this.setChildIndex(i,this.children.length-2)),(h||u)&&this.setLabelPosition(h,u),n&&o&&(n.x=t.src.x,n.y=t.src.y,o.x=t.src.x,o.y=t.src.y,this.setChildIndex(o,this.children.length-1),this.setChildIndex(n,this.children.length-2)),s&&a&&(s.x=t.end.x,s.y=t.end.y,a.x=t.end.x,a.y=t.end.y,this.setChildIndex(a,this.children.length-1),this.setChildIndex(s,this.children.length-2))},y.prototype.hitTestRectangle=function(t,e){var r,i,n,o;return t.centerX=t.x,t.centerY=t.y,e.centerX=e.x,e.centerY=e.y,t.halfWidth=t.iconWidth/2,t.halfHeight=t.iconHeight/2,e.halfWidth=e.iconWidth/2,e.halfHeight=e.iconHeight/2,n=t.centerX-e.centerX,o=t.centerY-e.centerY,r=t.halfWidth+e.halfWidth,i=t.halfHeight+e.halfHeight,Math.abs(n)<r&&Math.abs(o)<i},y.prototype.setLabelPosition=function(t,e){var r=.2*this.edgeLength(this.startNode.x,this.startNode.y,this.endNode.x,this.endNode.y),i=Math.atan2(this.startNode.y-this.endNode.y,this.startNode.x-this.endNode.x);1!==this.defaultStyle.lineType&&(t.x=this.startNode.x-r*Math.cos(i),t.y=this.startNode.y-r*Math.sin(i),e.x=this.endNode.x+r*Math.cos(i),e.y=this.endNode.y+r*Math.sin(i)),this.startNode.x>this.endNode.x?(t.rotation=i,e.rotation=i):(t.rotation=Math.atan2(this.endNode.y-this.startNode.y,this.endNode.x-this.startNode.x),e.rotation=Math.atan2(this.endNode.y-this.startNode.y,this.endNode.x-this.startNode.x))},y);function y(t,e,r){var i=s.call(this)||this;return i.type="Edge",i.includeGroup=[],i.brotherEdges=[],i.defaultColor=0,i.polygonData=[],i.edge=new PIXI.Graphics,i.edge.name="edge_line",i.arrow=new PIXI.Graphics,i.arrow.name="edge_arrow",i.startNode=t,i.endNode=e,i.labelStyle={},i.labelContent=[],i.interactive=!0,i.buttonMode=!0,i.readyLinkArray(),i.analysisBrotherEdge(),i.tooltip=new d.Tooltip(r),i}e.Edge=p},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(r(5)),h=r(11),u=r(14),l=r(50),c=(n(d,s=h.CommonElement),d.prototype.setNodeSize=function(t,e){this.iconWidth=t,this.iconHeight=e,this.defaultWidth=t,this.defaultHeight=e,this.draw()},d.prototype.getDefaultSize=function(){return{width:this.defaultWidth,height:this.defaultHeight}},d.prototype.draw=function(){this.icon?this.drawSprite(this.icon):this.drawGraph()},d.prototype.drawGraph=function(){var t=this,e=this.getChildByName("node_sprite"),r=this.getChildByName("node_graph");this.removeChild(e),this.removeChild(r);var i=this.defaultStyle,n=new PIXI.Graphics;return n.name="node_graph",n.lineStyle(i.lineWidth,i.lineColor),n.beginFill(i.fillColor,i.fillOpacity),n.drawCircle(0,0,i.width),n.endFill(),this.addChild(n),a.each(this.markList,function(e){var r=t.getChildByName("node_"+e.name);r&&(r.width=e.width,r.height=e.height,t.switchPos(r,e.position),t.setChildIndex(r,t.children.length-1))}),n},d.prototype.drawSprite=function(t){var e=this,r=this.getChildByName("node_sprite"),i=this.getChildByName("node_graph"),n=this.getChildByName("node_label");this.removeChild(r),this.removeChild(i);var o=PIXI.Texture.fromFrame(t),s=new PIXI.Sprite(o),h=this.iconWidth/o.width,u=this.iconHeight/o.height,l=u<h?u:h;s.width=o.width*l,s.height=o.height*l,s.anchor.set(.5,.5),s.name="node_sprite",this.addChild(s),n&&(n.y=s.height),a.each(this.markList,function(t){var r=e.getChildByName("node_"+t.name);r&&(r.width=t.width,r.height=t.height,e.switchPos(r,t.position),e.setChildIndex(r,e.children.length-1))});var c=this.getChildByName("labelMark");if(c){var d=c.getChildByName("labelMark_background"),f=c.getChildByName("labelMark_label");this.drawLabelMark(c,d,f)}return s},d.prototype.getWidth=function(){var t=this.getSprite();if(t)return t.width},d.prototype.getHeight=function(){var t=this.getSprite();if(t)return t.height},d.prototype.selectOne=function(){var t=this,e=a.find(this.selectedNodes,function(e){return e===t});0<this.selectedNodes.length&&e||a.each(this.elements,function(t){t instanceof d&&t.selectOff()}),this.selectOn()},d.prototype.selectOn=function(){this.selectOff();var t=new PIXI.Graphics,e=0;t.lineStyle(2,16104817,1),t.name="node_border";var r=this.getChildByName("node_sprite")?this.getChildByName("node_sprite"):this.getChildByName("node_graph");"node_sprite"===r.name&&(e=r.width>=r.height?r.width:r.height,t.drawCircle(0,0,e/2+5),this.addChild(t)),"node_graph"===r.name&&(e=r.width,t.drawCircle(0,0,e/2+5),this.addChild(t)),this.hitArea=new PIXI.Circle(0,0,e/2+5),this.scale.set(1.5)},d.prototype.selectOff=function(){var t=this.getChildByName("node_sprite")?this.getChildByName("node_sprite"):this.getChildByName("node_graph");t&&("node_sprite"===t.name?this.removeChild(this.getChildByName("node_border")):"node_graph"===t.name&&this.removeChild(this.getChildByName("node_border"))),this.scale.set(1)},d.prototype.setTooltip=function(t,e){return this.removeListener("mouseover"),this.removeListener("mouseout"),this.tooltip.addTooltip(this,t,e),this.tooltip},d.prototype.setLabel=function(t,e){e&&a.extend(this.labelStyle,e);var r=this.getChildByName("node_label"),i=this.getChildByName("node_sprite");if(!r){var n=new u.Label(t,this.labelStyle);return n.name="node_label",i?n.anchor.set(.5,-.5):n.anchor.set(.5,.5),this.addChild(n),this.labelContent=n.text,n}r.setText(t),this.labelContent=r.text},d.prototype.getSprite=function(){var t=this.getChildByName("node_sprite")?this.getChildByName("node_sprite"):this.getChildByName("node_graph");if(t)return t},d.prototype.setLabelText=function(t){var e=this.getChildByName("node_label");return e&&(e.setText(t),this.labelContent=t),e},d.prototype.setLabelStyle=function(t){var e=this.getChildByName("node_label");return a.extend(this.labelStyle,t),e.setStyle(t),e},d.prototype.changeIcon=function(t){return this.icon=t,this.removeChild(this.getChildByName("node_sprite")),this.drawSprite(t)},d.prototype.setIncluedGroup=function(t){this.includedGroups.push(t)},d.prototype.getIncluedGroup=function(){return this.includedGroups},d.prototype.addNodeMark=function(t,e,r,i){var n=this.getChildByName("node_"+t);n&&(this.removeChild(n),a.remove(this.markList,function(e){return e.name===t}));var o,s=PIXI.Texture.fromFrame(t),h=new PIXI.Sprite(s),u=this.getChildByName("node_sprite")?this.getChildByName("node_sprite"):this.getChildByName("node_graph");return h.width=r||u.width,h.height=i||u.height,h.interactive=!0,h.name="node_"+t,this.switchPos(h,e),this.addChild(h),this.setChildIndex(h,this.children.length-1),o=r&&i?{name:t,width:r,height:i,position:e}:{name:t,width:this.iconWidth,height:this.iconHeight,position:e},this.markList.push(o),h},d.prototype.removeNodeMark=function(t){var e=this.getChildByName("node_"+t);e&&(this.removeChild(e),a.remove(this.markList,function(e){return e.name===t}))},d.prototype.addLabelMark=function(t,e){if(3<t.length)throw Error("The content length is not greater than 3");this.removeLabelMark();var r=new PIXI.Container,i=new PIXI.Graphics,n=new u.Label(t,{fill:16777215});r.name="labelMark",i.name="labelMark_background",n.name="labelMark_label",e&&(this.labelMarkStyle=e),this.drawLabelMark(r,i,n)},d.prototype.removeLabelMark=function(){var t=this.getChildByName("labelMark");t&&this.removeChild(t)},d.prototype.drawLabelMark=function(t,e,r){var i,n,o,s=this.labelMarkStyle;n=s?(i=(this.labelMarkStyle=s).fillColor,s.alpha):(i=16761125,1),e.clear(),e.beginFill(i,n),o=this.icon?this.iconWidth/3:this.defaultStyle.width/2,e.drawCircle(0,0,o),e.endFill(),o<=10?o=10:12<=o&&(o=12),t.addChild(e),t.addChild(r),r.setPosition(4),r.setStyle({fontSize:o}),this.addChild(t),this.setChildIndex(t,this.children.length-1),t.x=this.iconWidth,this.icon?t.y=-this.iconHeight/2:t.y=-this.iconHeight},d.prototype.switchPos=function(t,e){switch(e){case"top":t.x=-t.width/2,t.y=-t.height;break;case"left":t.x=-t.width,t.y=-t.height/2;break;case"bottom":t.x=-t.width/2,t.y=0;break;case"right":t.x=0,t.y=-t.height/2;break;case"top-left":t.x=-t.width,t.y=-t.height;break;case"top-right":t.x=0,t.y=-t.height;break;case"bottom-left":t.x=-t.width,t.y=0;break;case"bottom-right":t.x=0,t.y=0;break;default:t.x=-t.width/2,t.y=-t.height}},d.prototype.setDrag=function(){this.on("mousedown",this.onDragStart).on("mouseup",this.onDragEnd).on("mouseupoutside",this.onDragEnd).on("mousemove",this.onDragMove)},d.prototype.onDragStart=function(t){var e=this,r=this.parent.toLocal(t.data.global),i=a.find(this.selectedNodes,function(t){return t===e});0<this.selectedNodes.length&&i||a.remove(this.selectedNodes),t.stopPropagation(),this.dragging=!0,this.data=t.data,this.last={parents:r,x:t.data.global.x,y:t.data.global.y}},d.prototype.onDragEnd=function(){this.dragging=!1,this.data=null,this.last=null},d.prototype.onDragMove=function(t){var e=this;if(this.dragging){var r=this.data.getLocalPosition(this.parent),i=a.find(this.selectedNodes,function(t){return t===e}),n=[];if(1<this.selectedNodes.length&&i&&this.last){var o=t.data.global.x,s=t.data.global.y,h=[],u=[],l=[];a.each(this.selectedNodes,function(t){t.position.x+=r.x-e.last.parents.x,t.position.y+=r.y-e.last.parents.y,u=u.concat(t.linksArray),h=h.concat(t.includedGroups),l=l.concat(t.exceptEdgesArray)}),this.last={parents:r,x:o,y:s},a.each(a.uniq(u),function(t){t.draw(),n=n.concat(t.includeGroup)}),a.each(a.uniq(h),function(t){t.draw()}),a.each(a.uniq(n),function(t){t.draw()}),a.each(a.uniq(l),function(t){t.draw()})}else this.position.x=r.x,this.position.y=r.y,a.each(this.linksArray,function(t){n=n.concat(t.includeGroup),t.draw()}),a.each(a.uniq(n),function(t){t.draw()}),a.each(this.includedGroups,function(t){t.draw()}),a.each(this.exceptEdgesArray,function(t){t.draw()})}},d);function d(t,e,r,i){void 0===r&&(r=[]);var n=s.call(this)||this;return n.type="Node",n.icon="",n.includedGroups=[],n.linksArray=[],n.iconWidth=20,n.iconHeight=20,n.markList=[],n.isLock=!1,n.clients={},n.labelContent="",n.exceptEdgesArray=[],n.defaultWidth=20,n.defaultHeight=20,n.data=null,n.selectedNodes=[],n.dragging=!1,n.labelStyle={},n.labelMarkStyle=void 0,n.elements=t,n.selectedNodes=r,n.icon=i,n.tooltip=new l.Tooltip(e),n.interactive=!0,n.buttonMode=!0,n.setDrag(),n.draw(),n}e.Node=c},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(r(5)),h=o(r(131)),u=(n(l,s=h.Container),l.prototype.addChildren=function(t){var e=this;a.each(t,function(t){t&&e.addChild(t)})},l.prototype.clearBorder=function(){var t=a.filter(this.children,function(t){return"node_border"===t.name});a.each(t,function(t){t.destroy()})},l.prototype.getUID=function(){return this.id},l.prototype.getName=function(){return this.name},l.prototype.setStyle=function(t){a.extend(this.defaultStyle,t),this.draw()},l.prototype.initStyle=function(t){a.extend(this.defaultStyle,t),this.invariableStyles=a.cloneDeep(this.defaultStyle),this.draw()},l.prototype.addEventListener=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.interactive=!0,this.buttonMode=!0,this.on.apply(this,t)},l);function l(){var t=s.call(this)||this;return t.defaultStyle={lineWidth:1,lineColor:15658734,lineType:0,lineFull:0,fillColor:14540253,bezierOacity:1,fillOpacity:1,arrowColor:13048787,arrowLength:15,arrowType:3,arrowWidth:1,arrowAngle:20,arrowMiddleLength:10,bezierLineDistance:0,bezierLineDegree:20,fillArrow:!0,lineDistance:0,padding:5,margin:5,height:15,width:15,clickColor:58879,bundleStyle:1},t.id=a.uniqueId("element_"),t}e.CommonElement=u},function(t,e,r){"use strict";var i=Object.prototype.hasOwnProperty,n="~";function o(){}function s(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)i.call(t,e)&&r.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},a.prototype.listeners=function(t,e){var r=n?n+t:t,i=this._events[r];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var o=0,s=i.length,a=new Array(s);o<s;o++)a[o]=i[o].fn;return a},a.prototype.emit=function(t,e,r,i,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var h,u,l=this._events[a],c=arguments.length;if(l.fn){switch(l.once&&this.removeListener(t,l.fn,void 0,!0),c){case 1:return l.fn.call(l.context),!0;case 2:return l.fn.call(l.context,e),!0;case 3:return l.fn.call(l.context,e,r),!0;case 4:return l.fn.call(l.context,e,r,i),!0;case 5:return l.fn.call(l.context,e,r,i,o),!0;case 6:return l.fn.call(l.context,e,r,i,o,s),!0}for(u=1,h=new Array(c-1);u<c;u++)h[u-1]=arguments[u];l.fn.apply(l.context,h)}else{var d,f=l.length;for(u=0;u<f;u++)switch(l[u].once&&this.removeListener(t,l[u].fn,void 0,!0),c){case 1:l[u].fn.call(l[u].context);break;case 2:l[u].fn.call(l[u].context,e);break;case 3:l[u].fn.call(l[u].context,e,r);break;case 4:l[u].fn.call(l[u].context,e,r,i);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];l[u].fn.apply(l[u].context,h)}}return!0},a.prototype.on=function(t,e,r){var i=new s(e,r||this),o=n?n+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},a.prototype.once=function(t,e,r){var i=new s(e,r||this,!0),o=n?n+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],i]:this._events[o].push(i):(this._events[o]=i,this._eventsCount++),this},a.prototype.removeListener=function(t,e,r,i){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||i&&!a.once||r&&a.context!==r||(0==--this._eventsCount?this._events=new o:delete this._events[s]);else{for(var h=0,u=[],l=a.length;h<l;h++)(a[h].fn!==e||i&&!a[h].once||r&&a[h].context!==r)&&u.push(a[h]);u.length?this._events[s]=1===u.length?u[0]:u:0==--this._eventsCount?this._events=new o:delete this._events[s]}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=n,a.EventEmitter=a,t.exports=a},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,h=o(r(5)),u=s(r(31)),l=s(r(106)),c=r(11),d=r(9),f=r(16),p=r(17),y=r(14),g=s(r(107)),v=r(10),m=(n(_,a=c.CommonElement),_.prototype.draw=function(){var t=this.getChildByName(this.polygonHullOutlineName);t&&t.destroy(),this.isExpanded?this.emptyObj?this.drawEmptyGroup():this.drawGroupExpandedOutline():this.drawGroupNode(),this.analyzeSubstratum(),this.sortGraphicsIndex(),this.updateLabelPos(),this.updateLabelSize()},_.prototype.addChildNodes=function(t){t.setIncluedGroup(this),this.position.set(0,0),this.childrenNode.push(t),this.emptyObj=void 0,this.toggleExpanded&&(this.edgeArray=h.difference(this.filterEdge(),this.filterInsideEdge()))},_.prototype.setOutlineStyle=function(t){if(h.indexOf([1,2,3,4],t)<0)throw Error("The group outline type only support polygon & ellipse. 1: polygon, 2: ellipse, 3: rectangle, 4: square");this.outLineStyleType=t,this.draw()},_.prototype.setToggleExpanded=function(t){this.toggleExpanded=t,this.toggleExpanded&&this.toggleGroupExpand()},_.prototype.setLabel=function(t,e,r){var i=this.getChildByName("group_label");i&&i.destroy();var n=this.getChildByName(this.polygonHullOutlineName);if(0!==this.width&&t&&n){this.labelStyle={fill:["#0776da","#5146d9"],fontFamily:"Georgia",fontWeight:"bold",letterSpacing:1},r&&h.extend(this.labelStyle,r),25<t.length&&h.extend(this.labelStyle,{breakWords:!0,wordWrap:!0,wordWrapWidth:n.width-10});var o=new y.Label(t||void 0,this.labelStyle);o.setPosition(4),o.name="group_label",o.alpha=.8,o.interactive=!1,o.buttonMode=!1,e&&(this.labelPosition=e);var s=this.getLabelPos();return o.x=s.x,o.y=s.y,this.addChild(o),this.labelContent=o.text,o}},_.prototype.setLabelText=function(t){var e=this.getChildByName("group_label"),r=this.getChildByName(this.polygonHullOutlineName);if(e&&r)return e.setText(t),this.labelContent=t,1!==this.expandedVisibleNodes.length?(e.style.fontSize=h.floor(r.width/20)+1,e.style.breakWords=!0,e.style.wordWrap=!0,e.style.wordWrapWidth=r.width-10):(e.style.wordWrap=!1,e.style.breakWords=!1,e.style.fontSize=10),e},_.prototype.getChildNodes=function(){return this.childrenNode},_.prototype.intersection=function(){var t=this,e=[],r=[];return h.each(this.elements,function(i){i instanceof _&&i!==t&&0<(r=h.intersection(t.childrenNode,i.childrenNode)).length&&e.push(i)}),[r,e]},_.prototype.getWidth=function(){return this.getChildByName(this.polygonHullOutlineName).width},_.prototype.getHeight=function(){return this.getChildByName(this.polygonHullOutlineName).height},_.prototype.selectOn=function(){this.isSelected=!0,this.setStyle({lineColor:16104817,lineWidth:3})},_.prototype.selectOff=function(){var t=this.invariableStyles;this.isSelected=!1,this.setStyle({lineColor:t.lineColor,lineWidth:t.lineWidth})},_.prototype.getGroupPosition=function(){var t=this.getGroupVertexNumber();return 1===t.length?{x:t[0][0],y:t[0][1]}:new u.default(t).center()},_.prototype.removeChildNodes=function(){h.remove(this.childrenNode),this.parent.removeChild(this)},_.prototype.removeChildNode=function(t){h.remove(this.childrenNode,function(e){return e===t}),this.draw()},_.prototype.getVisibleNodes=function(){var t=this;return this.isExpanded||(this.hideNodes=h.filter(this.childrenNode,function(e){return!e.visible&&!t.isExpanded})),h.difference(this.childrenNode,this.hideNodes)},_.prototype.setDrag=function(){this.isSelecting=!1,this.off("mousedown"),this.off("mousemove"),this.off("mouseup"),this.on("mousedown",this.onDragStart,this),this.cursor="pointer",this.isLock||this.on("mousemove",this.onDragMove,this)},_.prototype.setSelect=function(t){this.isSelecting=!0,this.off("mousedown"),this.off("mousemove"),this.off("mouseup"),this.cursor="crosshair",t&&(this.selectLockNodes=t.isLock,this.isSelectGroup=t.isSelectGroup),this.on("mousedown",this.onSelectStart,this),this.on("mousemove",this.onSelectMove,this),this.on("mouseup",this.onSelectEnd,this)},_.prototype.toggleGroupExpand=function(){var t=this;this.on("click",function(e){var r=(new Date).getTime();if(t.childrenNode[0]){var i=t.childrenNode[0].getIncluedGroup();t.superstratumInfo=h.slice(i,0,h.indexOf(i,t)),r-t.lastClickTime<500?(t.lastClickTime=0,t.setExpanded()):t.lastClickTime=r}})},_.prototype.updateLabelPos=function(){var t=this.getChildByName("group_label");if(t){var e=this.getLabelPos();t.x=e.x,t.y=e.y}},_.prototype.updateLabelSize=function(){var t=this.getChildByName("group_label"),e=this.getChildByName(this.polygonHullOutlineName),r=this.defaultStyle.width;if(t&&e)if(0!==this.width&&this.isExpanded){var i=h.floor(e.width/10)+1;12<i&&i<20?t.style.fontSize=h.floor(e.width/10)+1:i<=12?t.style.fontSize=10:20<=i&&(t.style.fontSize=20)}else{var n=h.ceil(t.text.length/2);t.style.fontSize=r/n}},_.prototype.setExpanded=function(){var t=h.every(this.edgeArray,function(t){return null!==t.parent});if(0<this.childrenNode.length){var e=this.childrenNode[0].getIncluedGroup();this.superstratumInfo=h.slice(e,0,h.indexOf(e,this))}0===this.intersection()[0].length&&t&&(this.isExpanded=!this.isExpanded,this.isExpanded?this.addEdgeLabel():this.removeEdgeLabel(),this.changeEdgeResource(),this.toggleChildNodesVisible(this.isExpanded),this.toggleShowEdges(this.isExpanded),this.redrawGroup(this.isExpanded)),h.each(this.getAllGroup(),function(t){t.draw()}),h.each(this.edgeArray,function(t){t.draw()})},_.prototype.getExpandedVisibleNodes=function(){var t=this,e=[];this.expandedVisibleNodes=h.filter(this.childrenNode,function(t){return t.visible});var r=h.filter(this.substratumInfo,function(t){return!t.isExpanded});h.each(r,function(r){e=h.concat(t.expandedVisibleNodes,r),t.expandedVisibleNodes=h.flatten(e)})},_.prototype.redrawGroup=function(t){h.each(this.substratumInfo,function(e){e.visible=t}),h.each(this.superstratumInfo,function(t){t.draw()}),this.draw()},_.prototype.analyzeSubstratum=function(){var t=this,e=[];this.substratumInfo=[],h.each(this.childrenNode,function(r){var i=h.indexOf(r.includedGroups,t)+1,n=h.slice(r.includedGroups,i);e=h.concat(e,n)}),this.substratumInfo=h.union(e)},_.prototype.removeEdgeLabel=function(){var t=this;h.each(this.edgeArray,function(e){t.nodeResource.push({src:e.startNode,end:e.endNode,srcLabel:e.getChildByName("edge_srclabel"),endLabel:e.getChildByName("edge_endlabel")}),e.removeChild(e.getChildByName("edge_srclabel")),e.removeChild(e.getChildByName("edge_endlabel"))})},_.prototype.changeEdgeResource=function(){var t=this,e=h.cloneDeep(this.edgeResource),r=[];this.resetEdge(),h.remove(this.removeEdge),h.remove(r),h.each(this.getAllGroup(),function(i){if(!i.isExpanded){var n=i.childrenNode;h.each(n,function(n){var o=e.filter(function(t){return t.src===n.getUID()||t.end===n.getUID()});h.each(o,function(e){var o=t.getElementById(e.line);e.src!==e.end&&o&&(e.src!==n.getUID()&&e.end!==n.getUID()||(e.src===n.getUID()?e.src=i.getUID():e.end===n.getUID()&&(e.end=i.getUID()),r.push(e),r=h.uniq(r)))})}),h.each(h.concat(i.edgeArray,i.filterInsideEdge()),function(t){t.parent instanceof f.EdgeBundle&&(t.parent.toggleBundle=!1)})}}),this.groupEdge(r),h.each(e,function(e){var r=t.getElementById(e.line);r&&r.visible&&e.src!==e.end&&(r.startNode=t.getElementById(e.src),r.endNode=t.getElementById(e.end),r.draw())})},_.prototype.getAllEdgeBundle=function(){return h.filter(this.elements,function(t){return t instanceof f.EdgeBundle})},_.prototype.resetEdge=function(){var t=this;h.each(this.removeEdge,function(e){var r=t.getElementById(e.line);r&&(r.visible=!0)}),h.each(this.getAllEdgeBundle(),function(t){t.toggleBundle=!0})},_.prototype.groupEdge=function(t){var e=this,r=h.groupBy(t,function(t){if(e.getElementById(t.src)instanceof _||e.getElementById(t.end)instanceof _)return[""+t.src,""+t.end].sort().join()});return h.each(r,function(t){if(1<t.length){var r=h.findIndex(t,function(t){return e.getElementById(t.line).visible});h.each(t,function(t,i){var n=e.getElementById(t.line);i!==r&&n&&t.src!==t.end&&n.visible&&(e.removeEdge.push(t),n.visible=!1)})}}),t},_.prototype.getElementById=function(t){var e=[];return h.each(this.elements,function(t){if(t instanceof f.EdgeBundle){var r=t.children;e=e.concat(r)}else e.push(t)}),h.find(e,function(e){return e.id===t})},_.prototype.getVisibleEdge=function(t){var e=this;return this.isExpanded||(this.hideEdges=h.filter(t,function(t){return!t.visible&&!e.isExpanded})),h.difference(t,this.hideEdges)},_.prototype.getAllGroup=function(){return h.filter(this.elements,function(t){return t instanceof _})},_.prototype.getEdgeResource=function(){var t=this.getChildEdges(),e=[];return h.each(t,function(t){var r={src:t.startNode.getUID(),end:t.endNode.getUID(),line:t.getUID()};e.push(r)}),e},_.prototype.toggleChildNodesVisible=function(t,e){var r=e?[e]:this.getVisibleNodes();h.each(r,function(e){e.visible=t})},_.prototype.getGroupVertexNumber=function(){return this.positionList=[],this.vertexPoints(this.expandedVisibleNodes),h.map(this.positionList,function(t){return h.values(t)})},_.prototype.getAllVisibleNodes=function(t){var e=this;return this.visibleNode=[],h.each(t||this.childrenNode,function(t){t instanceof v.Node&&t.visible&&e.visibleNode.push(t)}),this.visibleNode},_.prototype.vertexPoints=function(t){var e=this;h.each(t,function(t){if(t instanceof v.Node)e.positionList.push({x:t.x,y:t.y});else if(t instanceof _){var r=t.getChildByName(t.polygonHullOutlineName);e.positionList.push({x:r.x,y:r.y})}})},_.prototype.drawGroupNode=function(){var t=this.defaultStyle,e=this.getGroupPosition(),r=new PIXI.Graphics;r.name=this.polygonHullOutlineName,r.lineStyle(t.lineWidth,t.lineWidth),r.beginFill(t.fillColor,t.fillOpacity),r.drawCircle(0,0,t.width),r.position.set(e.x,e.y),r.endFill(),r.interactive=!0,this.addChild(r)},_.prototype.sortGraphicsIndex=function(){var t=this.getChildByName(this.polygonHullOutlineName);t&&this.setChildIndex(t,0)},_.prototype.onDragStart=function(t){if(t.stopPropagation(),this.removeHighLight(),0===t.data.originalEvent.button){var e=this.parent.toLocal(t.data.global);this.dragging=!0,this.selecting=!1,this.last={parents:e},this.topo.setSelectedGroups(this),this.selectOn()}},_.prototype.onDragMove=function(t){var e=this;if(this.dragging){var r=this.parent.toLocal(t.data.global),i=[],n=this.getEdgeGroups(),o=this.intersection()[0],s=this.intersection()[1];0<this.childrenNode.length?(h.each(this.childrenNode,function(t){t instanceof v.Node&&(t.position.x+=r.x-e.last.parents.x,t.position.y+=r.y-e.last.parents.y,i=i.concat(t.linksArray))}),h.each(h.uniq(i),function(t){t.draw()}),h.each(n,function(t){t.draw()}),o&&h.each(s,function(t){t.draw()})):(this.position.x+=r.x-this.last.parents.x,this.position.y+=r.y-this.last.parents.y,this.centerPoint.x=r.x,this.centerPoint.y=r.y),this.last={parents:r},this.draw()}else this.dragging=!1},_.prototype.onMouseup=function(){this.last=null,this.selecting&&this.onSelectEnd(),this.dragging=!1,this.selecting=!1,this.rectangle.clear(),this.parent&&this.parent.addChild(this.rectangle)},_.prototype.onSelectStart=function(t){t.stopPropagation(),this.removeHighLight();var e=this.parent.toLocal(t.data.global);this.dragging=!1,this.selecting=!0,this.last={parents:e}},_.prototype.onSelectMove=function(t){if(this.selecting){this.rectangle.clear();var e=this.parent.toLocal(t.data.global),r=document.getElementById(this.topo.domRegex),i=e.x,n=e.y;if(r){var o=r.clientWidth-1,s=r.clientHeight-1;e.x<=1?i=1:e.x>=o&&(i=o),e.y<=1?n=1:e.y>=s&&(n=s)}var a=this.last.parents.x,h=this.last.parents.y,u=i-a,l=n-h;this.rectangle.lineStyle(1,149911,1),this.rectangle.alpha=.8,this.rectangle.drawRect(a,h,u,l)}},_.prototype.onSelectEnd=function(){var t=this,e=this.rectangle.getLocalBounds(),r=this.topo.getElements(),i=this.topo.getGroups(),n=[];if(h.each(r,function(t){if(t instanceof v.Node){var r=t.getSprite();if(r){var i=t.y-r.height/2,o=t.x-r.width/2,s=t.x+r.width/2,a=t.y+r.height/2;i>=e.top&&s<=e.right&&a<=e.bottom&&o>=e.left&&n.push(t)}}}),h.each(n,function(e){t.selectLockNodes===e.isLock&&t.topo.setSelectedNodes(e)}),this.isSelectGroup){var o=h.filter(i,function(t){var e=t.getVisibleNodes();return h.every(e,function(t){return h.includes(n,t)})});this.removeHighLight(),h.each(o,function(e){t.topo.setSelectedGroups(e)})}},_.prototype.removeHighLight=function(){var t=this.topo.getSelectedNodes();h.each(t,function(t){t.selectOff()}),this.topo.removeSelectedNodes();var e=this.topo.getSelectedEdge();e&&e.selectOff(),this.topo.removeSelectedEdge();var r=this.topo.getSelectedGroups();h.each(r,function(t){t.selectOff()}),this.topo.removeSelectedGroups()},_.prototype.marginPolygon=function(t,e){return(new l.default).data(t).margin(e||10)},_.prototype.getHulls=function(t){if(h.size(t)<3)throw Error("Get hulls error: Points count must greater than 3.");var e=new g.default;if(0===t.length)return!1;e.addPoints(t);var r=e.getHull();return(r=h.map(r,function(t){return t.toArray()})).push(r[0]),r},_.prototype.setOutlineGraphicStyle=function(t){var e=this.defaultStyle;return t.lineStyle(e.lineWidth,e.lineColor),t.beginFill(e.fillColor,e.fillOpacity),t},_.prototype.createOutlineGraphic=function(){var t=new PIXI.Graphics;return t.name=this.polygonHullOutlineName,t.interactive=!0,this.addChild(t),t},_.prototype.getMeanSize=function(t){var e=h.map(t,function(t){if(t instanceof v.Node)return t?[t.getWidth(),t.getHeight()]:[0,0]});return h.mean(h.flatten(e))||0},_.prototype.getNodesMeanSize=function(){var t=this.expandedVisibleNodes;return this.getMeanSize(t)},_.prototype.drawHull=function(t,e){var r=this.getNodesMeanSize(),i=new u.default(e).toArray(),n=this.getHulls(i),o=this.marginPolygon(n,this.defaultStyle.padding+r),s=h.flattenDeep(o);t.drawPolygon(s),t.endFill()},_.prototype.drawPolygonOutline=function(t,e){var r=this.getNodesMeanSize(),i=r+this.defaultStyle.padding;if(2<e.length)this.drawHull(t,e);else{var n=this.expandedVisibleNodes,o=0,s=0;if(1<e.length){var a=h.map(n,function(t){return t?[t.x,t.y]:[0,0]});o=h.multiply(a[1][0]+a[0][0],.5),s=h.multiply(a[1][1]+a[0][1],.5),e.push([o,s+.5]),this.drawHull(t,e)}else{var u=e[0][0],l=e[0][1],c=r+i/2;t.drawCircle(u,l,c),t.endFill()}}},_.prototype.drawEllipseOutline=function(t,e){var r=this.getNodesMeanSize(),i=r+this.defaultStyle.padding;if(1<e.length){var n=new u.default(e).aabb(),o=n.x-i/2,s=n.y-i/2,a=n.w+i,h=n.h+i,l=o+.5*a,c=s+.5*h,d=a/Math.sqrt(2),f=h/Math.sqrt(2);t.drawEllipse(l,c,d,f),t.endFill()}else{o=e[0][0],s=e[0][1];var p=r+i/2;t.drawCircle(o,s,p),t.endFill()}},_.prototype.drawRectOutline=function(t,e){var r=this.getNodesMeanSize(),i=r+this.defaultStyle.padding;if(1<e.length){var n=new u.default(e).aabb(),o=n.x-i,s=n.y-i,a=n.w+2*i,h=n.h+2*i;t.drawRect(o,s,a,h),t.endFill()}else{var l=r+i;o=e[0][0]-i,s=e[0][1]-i,t.drawRect(o,s,l,l),t.endFill()}},_.prototype.drawGroupExpandedOutline=function(){this.getExpandedVisibleNodes(),this.centerPoint=this.getGroupPosition();var t=this.getGroupVertexNumber(),e=t.length,r=this.createOutlineGraphic();if(this.setOutlineGraphicStyle(r),0===e)return!1;switch(this.outLineStyleType){case 1:this.drawPolygonOutline(r,t);break;case 2:this.drawEllipseOutline(r,t);break;case 3:this.drawRectOutline(r,t);break;default:this.drawPolygonOutline(r,t)}},_.prototype.toggleShowEdges=function(t){var e=this.getVisibleEdge(this.filterInsideEdge());h.each(e,function(e){e.visible=t})},_.prototype.addEdgeLabel=function(){var t=this;0<this.nodeResource.length&&h.each(this.edgeArray,function(e,r){t.nodeResource[r].srcLabel&&t.nodeResource[r].endLabel&&(e.addChild(t.nodeResource[r].srcLabel),e.addChild(t.nodeResource[r].endLabel))})},_.prototype.drawEmptyGroup=function(){if(this.emptyObj){var t=new PIXI.Graphics,e=this.emptyObj,r=this.defaultStyle;switch(t.name=this.polygonHullOutlineName,t.interactive=!0,this.addChild(t),t.lineStyle(r.lineWidth,r.lineColor),t.beginFill(r.fillColor,r.fillOpacity),e.type){case"circle":t.drawCircle(e.location.x,e.location.y,e.size),t.endFill(),this.outLineStyleType=2;break;case"square":t.drawRect(e.location.x,e.location.y,e.size,e.size),t.endFill(),this.outLineStyleType=3;break;default:t.drawCircle(e.location.x,e.location.y,e.size),t.endFill(),this.outLineStyleType=2}}},_.prototype.getChildEdges=function(){var t=[];return h.each(this.elements,function(e){if(e instanceof d.Edge)t.push(e);else if(e instanceof f.EdgeBundle){var r=e.children;t=t.concat(r)}}),t},_.prototype.filterEdge=function(){var t=this.getChildEdges(),e=h.filter(this.childrenNode,function(t){return t instanceof v.Node});return h.filter(t,function(t){var r=t.startNode,i=t.endNode;return!(!h.includes(e,r)&&!h.includes(e,i))})},_.prototype.filterInsideEdge=function(){var t=this.getChildEdges(),e=h.filter(this.childrenNode,function(t){return t instanceof v.Node});return e=h.concat(e,this.substratumInfo),h.filter(t,function(t){var r=t.startNode,i=t.endNode;return h.includes(e,r)&&h.includes(e,i)})},_.prototype.getLabelPos=function(){var t=0;h.each(this.children,function(e){e.name&&-1!==e.name.indexOf("hull_outline")&&(t=e.height)});var e={Center:{x:0,y:0},Above:{x:0,y:-t/2},Below:{x:0,y:t/2}},r={x:0,y:0},i={x:0,y:0};if(this.emptyObj)switch(this.emptyObj.type){case"circle":i.x=this.emptyObj.location.x,i.y=this.emptyObj.location.y;break;case"square":i.x=this.emptyObj.location.x+this.emptyObj.size/2,i.y=this.emptyObj.location.y+this.emptyObj.size/2;break;default:i.x=this.emptyObj.location.x,i.y=this.emptyObj.location.y}else i.x=this.getGroupPosition().x,i.y=this.getGroupPosition().y;return r.x=i.x+e[this.labelPosition].x,r.y=i.y+e[this.labelPosition].y,r},_.prototype.getEdgeGroups=function(){var t=this.elements;return h.filter(t,function(t){return t instanceof p.EdgeGroup})},_);function _(t,e,r){var i=a.call(this)||this;return i.type="Group",i.isExpanded=!0,i.centerPoint={x:0,y:0},i.expandedVisibleNodes=[],i.superstratumInfo=[],i.substratumInfo=[],i.labelContent="",i.linksArray=[],i.isSelected=!1,i.isLock=!1,i.polygonHullOutlineName=h.uniqueId("hull_outline_"),i.isSelecting=!1,i.childNodesList=[],i.edgeResource=[],i.labelStyle={},i.toggleExpanded=!1,i.positionList=[],i.childrenNode=[],i.visibleNode=[],i.outLineStyleType=1,i.lastClickTime=0,i.dragging=!1,i.hideNodes=[],i.hideEdges=[],i.labelPosition="Center",i.rectangle=new PIXI.Graphics,i.selecting=!1,i.selectLockNodes=!1,i.isSelectGroup=!1,i.edgeArray=[],i.nodeResource=[],i.removeEdge=[],i.elements=t,i.emptyObj=r,i.topo=e,i.edgeResource=i.getEdgeResource(),i.interactive=!0,i.emptyObj&&(i.centerPoint.x=i.emptyObj.location.x,i.centerPoint.y=i.emptyObj.location.y),i.setDrag(),document.addEventListener("mouseup",i.onMouseup.bind(i)),i}e.Group=m},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(r(5)),h=(n(u,s=PIXI.Text),u.prototype.setText=function(t){this.text=t},u.prototype.getText=function(){return this.text},u.prototype.setStyle=function(t){a.extend(this.style,t)},u.prototype.setPosition=function(t){switch(t){case 0:this.anchor.set(.5,1.5);break;case 1:this.anchor.set(.5,-.5);break;case 2:this.anchor.set(1.5,1.375);break;case 3:this.anchor.set(-.5,1.375);break;case 4:this.anchor.set(.5,.5)}},u);function u(t,e,r){var i=this,n=new PIXI.TextStyle({fontFamily:"Arial",fontSize:12,fill:"0x0386d2"});return e&&a.extend(n,e),(i=s.call(this,t,n,r)||this).interactive=!0,i.buttonMode=!0,i.name="label",i}e.Label=h},function(t,e,r){"use strict";e.__esModule=!0;var i=r(2),n=h(r(3)),o=h(r(12)),s=h(r(68)),a=h(r(44));function h(t){return t&&t.__esModule?t:{default:t}}var u,l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,u=o.default),c.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},c.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=a.default.isPow2(this.realWidth)&&a.default.isPow2(this.realHeight)},c.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var r=!this.source;if(((this.source=t).src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),r&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var i=this;if(t.onload=function(){i._updateImageType(),t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i._sourceLoaded(),"svg"!==i.imageType?i.emit("loaded",i):i._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,i.isLoading&&(i.isLoading=!1,i.emit("error",i))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===i.imageType)return void i._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},c.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,i.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var r=t.subType.split("+")[0];if(!(e=(0,i.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else e=(e=(0,i.getUrlFileExtension)(this.imageUrl))||"png";this.imageType=e}},c.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,i.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},c.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},c.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},c.prototype._loadSvgSourceUsingString=function(t){var e=(0,i.getSvgSize)(t),r=e.width,n=e.height;if(!r||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(r*this.sourceScale),this.realHeight=Math.round(n*this.sourceScale),this._updateDimensions();var o=document.createElement("canvas");o.width=this.realWidth,o.height=this.realHeight,o._pixiId="canvas_"+(0,i.uid)(),o.getContext("2d").drawImage(this.source,0,0,r,n,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=o,c.addToCache(this,o._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},c.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},c.prototype.destroy=function(){this.imageUrl&&(delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),c.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},c.prototype.dispose=function(){this.emit("dispose",this)},c.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},c.fromImage=function(t,e,r,n){var o=i.BaseTextureCache[t];if(!o){var a=new Image;void 0===e&&0!==t.indexOf("data:")?a.crossOrigin=(0,s.default)(t):e&&(a.crossOrigin="string"==typeof e?e:"anonymous"),(o=new c(a,r)).imageUrl=t,n&&(o.sourceScale=n),o.resolution=(0,i.getResolutionOfUrl)(t),a.src=t,c.addToCache(o,t)}return o},c.fromCanvas=function(t,e,r){var n=2<arguments.length&&void 0!==r?r:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,i.uid)());var o=i.BaseTextureCache[t._pixiId];return o||(o=new c(t,e),c.addToCache(o,t._pixiId)),o},c.from=function(t,e,r){if("string"==typeof t)return c.fromImage(t,void 0,e,r);if(t instanceof HTMLImageElement){var n=t.src,o=i.BaseTextureCache[n];return o||((o=new c(t,e)).imageUrl=n,r&&(o.sourceScale=r),o.resolution=(0,i.getResolutionOfUrl)(n),c.addToCache(o,n)),o}return t instanceof HTMLCanvasElement?c.fromCanvas(t,e):t},c.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),i.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),i.BaseTextureCache[e]=t)},c.removeFromCache=function(t){if("string"==typeof t){var e=i.BaseTextureCache[t];if(e){var r=e.textureCacheIds.indexOf(t);return-1<r&&e.textureCacheIds.splice(r,1),delete i.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete i.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},c);function c(t,e,r){!function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this));return o.uid=(0,i.uid)(),o.touched=0,o.resolution=r||n.default.RESOLUTION,o.width=100,o.height=100,o.realWidth=100,o.realHeight=100,o.scaleMode=void 0!==e?e:n.default.SCALE_MODE,o.hasLoaded=!1,o.isLoading=!1,o.source=null,o.origSource=null,o.imageType=null,o.sourceScale=1,o.premultipliedAlpha=!0,o.imageUrl=null,o.isPowerOfTwo=!1,o.mipmap=n.default.MIPMAP_TEXTURES,o.wrapMode=n.default.WRAP_MODE,o._glTextures={},o._enabled=0,o._virtalBoundId=-1,o._destroyed=!1,o.textureCacheIds=[],t&&o.loadSource(t),o}e.default=l},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(r(5)),h=r(11),u=r(9),l=r(14),c=(n(d,s=h.CommonElement),d.prototype.draw=function(){a.each(this.children,function(t){t.draw()})},d.prototype.multiEdgeBundle=function(){if(this.toggleBundle){this.isExpanded?this.openBundle():this.closeBundle();var t=document.getElementById("tooltip");t&&t.remove()}},d.prototype.addEdge=function(t){this.addEdges([t])},d.prototype.setExpaned=function(t){this.isExpanded=t,this.multiEdgeBundle()},d.prototype.addEdges=function(t){var e=this;this.addChildren(t),this.bundleEdge=this.children,this.setBundleEdgesPosition(),a.each(t,function(t){e.setBundle(t)})},d.prototype.setBundleEdgesPosition=function(){var t=this,e=this.children,r=this.defaultStyle.bundleStyle,i=[],n=4,o=a.every(e,function(e){return e.startNode===t.startNode});1===r?(n=1,a.each(e,function(t,e){o?a.each([1,-1],function(t){i.push([(2+e*n)*t,(15+8*e)*t])}):i.push([2+e*n,15+8*e])})):a.each(e,function(e,r){var o=r%2==1?1:-1;e.startNode===t.startNode?i.push([(2+r*n)*o,(15+8*r)*o]):i.push([-(2+r*n)*o,(15+8*r)*o])});var s=0;a.each(this.children,function(t,e){if(t instanceof u.Edge)if(1===r)t.setStyle({bezierLineDistance:i[e][0],bezierLineDegree:i[e][1],lineType:1});else{var n=e%2==1?1.1:-1.1,o=t.getChildByName("edge_srclabel"),a=t.getChildByName("edge_endlabel");(o||a)&&(o.anchor.set(.5,s+e*n),a.anchor.set(.5,s+e*n),s+=e*n),t.setStyle({bezierLineDistance:i[e][0],bezierLineDegree:i[e][1],lineType:0})}})},d.prototype.getBundleID=function(){return this.bundleID},d.prototype.removeBundleEdge=function(){var t=this;a.remove(this.startNode.linksArray,function(e){return e.id===t.afterBundle.id}),a.remove(this.endNode.linksArray,function(e){return e.id===t.afterBundle.id})},d.prototype.setBundle=function(t){var e=this;(t.bundleParent=this).toggleBundle&&t.addEventListener("click",function(r){var i=(new Date).getTime();i-e.lastClickTime<500?t.parent instanceof d&&(e.isExpanded=!e.isExpanded,e.multiEdgeBundle()):e.lastClickTime=i})},d.prototype.updateNum=function(){var t=this.afterBundle.getChildByName("bundle_label");t&&t.setText(""+this.bundleData.length,{fill:16777215,fontFamily:"Times New Roman",fontWeight:"bold"})},d.prototype.closeBundle=function(){var t=this;if(this.bundleData=[],a.each(this.children,function(e){t.bundleData.push(e),a.remove(t.startNode.linksArray,function(t){return t===e}),a.remove(t.endNode.linksArray,function(t){return t===e})}),this.startNode.linksArray.push(this.afterBundle),this.endNode.linksArray.push(this.afterBundle),this.removeChildren(0,this.children.length),this.afterBundle.setStyle(this.style),this.afterBundle.name="bundle_line",this.afterBundle.removeChild(this.afterBundle.getChildByName("label_background")),this.afterBundle.removeChild(this.afterBundle.getChildByName("bundle_label")),this.afterBundle.removeAllListeners(),0<this.bundleData.length){var e=new PIXI.Graphics,r=this.defaultStyle;e.name="label_background",e.beginFill(r.fillColor,1),e.drawCircle(0,0,7),e.endFill(),this.afterBundle.addChild(e);var i=new l.Label(""+this.bundleData.length,{fill:16777215,fontFamily:"Times New Roman",fontWeight:"bold"});i.name="bundle_label",i.setPosition(4),this.afterBundle.addChild(i),this.afterBundle.setChildIndex(i,this.afterBundle.children.length-1),this.afterBundle.setChildIndex(e,this.afterBundle.children.length-2),this.afterBundle.initStyle({lineType:0,lineColor:this.defaultColor,lineWidth:this.defaultWidth}),this.addChild(this.afterBundle),this.setBundle(this.afterBundle)}else this.removeChild(this.getChildByName("bundle_label"))},d.prototype.openBundle=function(){var t=this;this.removeChildren(0,this.children.length);var e=this.bundleData;a.each(e,function(e){t.addChild(e),e.draw(),t.startNode.linksArray.push(e),t.endNode.linksArray.push(e)}),this.removeBundleEdge()},d);function d(t){var e=s.call(this)||this;return e.isExpanded=!0,e.bundleEdge=[],e.toggleBundle=!0,e.type="EdgeBundle",e.bundleData=[],e.bundleID="",e.lastClickTime=0,e.bundleID=t.edgeNodesSortUIDStr(),e.startNode=t.startNode,e.endNode=t.endNode,e.style=t.defaultStyle,e.defaultColor=a.cloneDeep(t.defaultColor),e.defaultWidth=t.invariableStyles.lineWidth,e.bundleEdge=e.children,e.afterBundle=new u.Edge(e.startNode,e.endNode),e.addChild(t),e.setBundle(t),e.removeBundleEdge(),e}e.EdgeBundle=c},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},s=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var a,h=o(r(5)),u=s(r(31)),l=s(r(106)),c=r(11),d=r(9),f=r(16),p=r(13),y=r(14),g=s(r(107)),v=r(10),m=(n(_,a=c.CommonElement),_.prototype.addChildEdges=function(t){h.indexOf(this.childrenEdge,t)<0&&(this.childrenEdge.push(t),t.parent instanceof f.EdgeBundle&&h.indexOf(t.parent.afterBundle.includeGroup,this)<0&&t.parent.afterBundle.setIncluedGroup(this),t.setIncluedGroup(this))},_.prototype.draw=function(){this.polygon.clear(),this.initPolygonOutline();var t=this.getPolygonPoints();this.drawPolygon(t),this.updateLabelPos(),this.updateLabelSize()},_.prototype.setLabel=function(t,e,r){var i=this.getChildByName("group_label");if(i&&i.destroy(),0!==this.width&&t){this.labelStyle={fill:["#0776da","#5146d9"],fontFamily:"Georgia",fontWeight:"bold",letterSpacing:1},r&&h.extend(this.labelStyle,r),25<t.length&&h.extend(this.labelStyle,{breakWords:!0,wordWrap:!0});var n=new y.Label(t||void 0,this.labelStyle);n.anchor.set(.5,.5),n.name="group_label",n.alpha=.8,n.interactive=!1,n.buttonMode=!1,e&&(this.labelPosition=e);var o=this.getLabelPos();return n.x=o.x,n.y=o.y,this.addChild(n),this.labelContent=n.text,n}},_.prototype.setLabelText=function(t){var e=this.getChildByName("group_label"),r=this.polygon;if(e&&r)return e.setText(t),this.labelContent=t,1!==this.childNodes.length?(e.style.fontSize=h.floor(r.width/20)+1,e.style.breakWords=!0,e.style.wordWrap=!0,e.style.wordWrapWidth=r.width-10):(e.style.wordWrap=!1,e.style.breakWords=!1,e.style.fontSize=10),e},_.prototype.removeChildEdge=function(t){h.remove(this.childrenEdge,function(e){return e===t}),h.remove(this.childNodes,function(e){return e===t.startNode||e===t.endNode}),this.draw()},_.prototype.selectOn=function(){this.isSelected=!0,this.setStyle({lineColor:16104817,lineWidth:3})},_.prototype.selectOff=function(){var t=this.invariableStyles;this.isSelected=!1,this.setStyle({lineColor:t.lineColor,lineWidth:t.lineWidth})},_.prototype.getVisibleNodes=function(){var t=[];return h.each(this.childrenEdge,function(e){e.visible&&(t.push(e.startNode),t.push(e.endNode))}),h.uniq(t)},_.prototype.setDrag=function(){this.isSelecting=!1,this.off("mousedown"),this.off("mousemove"),this.off("mouseup"),this.on("mousedown",this.onDragStart,this),this.cursor="pointer",this.isLock||this.on("mousemove",this.onDragMove,this)},_.prototype.setSelect=function(t){this.isSelecting=!0,this.off("mousedown"),this.off("mousemove"),this.off("mouseup"),this.cursor="crosshair",t&&(this.selectLockNodes=t.isLock,this.isSelectGroup=t.isSelectGroup),this.on("mousedown",this.onSelectStart,this),this.on("mousemove",this.onSelectMove,this),this.on("mouseup",this.onSelectEnd,this)},_.prototype.getLabelPos=function(){var t=0,e=this.polygon;e&&(t=e.height);var r={Center:{x:0,y:0},Above:{x:0,y:-t/2},Below:{x:0,y:t/2}},i={x:0,y:0};return i.x=this.centerPoint.x+r[this.labelPosition].x,i.y=this.centerPoint.y+r[this.labelPosition].y,i},_.prototype.updateLabelPos=function(){var t=this.getChildByName("group_label"),e=0,r=0;if(t){if(1===this.childrenEdge.length){var i=this.childrenEdge[0];e=Math.atan2(i.startNode.y-i.endNode.y,i.startNode.x-i.endNode.x),r=Math.atan2(i.endNode.y-i.startNode.y,i.endNode.x-i.startNode.x),i.startNode.x>i.endNode.x?(t.rotation=e,t.rotation=e):(t.rotation=r,t.rotation=r)}var n=this.getLabelPos();t.x=n.x,t.y=n.y,this.setChildIndex(t,this.children.length-1)}},_.prototype.updateLabelSize=function(){var t=this.getChildByName("group_label"),e=this.polygon,r=this.defaultStyle.width;if(t&&e)if(0!==this.width){var i=h.floor(e.width/10)+1;12<i&&i<20?t.style.fontSize=h.floor(e.width/10)+1:i<=12?t.style.fontSize=10:20<=i&&(t.style.fontSize=20)}else{var n=h.ceil(t.text.length/2);t.style.fontSize=r/n}},_.prototype.initPolygonOutline=function(){var t=this.polygon;t.interactive=!0,this.addChild(t);var e=this.defaultStyle;t.lineStyle(e.lineWidth,e.lineColor),t.beginFill(e.fillColor,e.fillOpacity)},_.prototype.getPolygonPoints=function(){var t=this,e=[];return this.childrenEdge&&(this.childrenEdge.length<=1?h.each(this.childrenEdge,function(r){-1===h.indexOf(t.childNodes,r.startNode)&&t.childNodes.push(r.startNode),-1===h.indexOf(t.childNodes,r.endNode)&&t.childNodes.push(r.endNode),r instanceof d.Edge&&r.visible?e=h.concat(e,r.polygonData):r instanceof f.EdgeBundle&&h.each(r.children,function(t){e=h.concat(e,t.polygonData)})}):h.each(this.childrenEdge,function(r){-1===h.indexOf(t.childNodes,r.startNode)&&t.childNodes.push(r.startNode),-1===h.indexOf(t.childNodes,r.endNode)&&t.childNodes.push(r.endNode),e.push(r.startNode.x,r.startNode.y),e.push(r.endNode.x,r.endNode.y)})),h.chunk(e,2)},_.prototype.drawPolygon=function(t){var e=this.polygon,r=this.defaultStyle;if(0<t.length){var i=new u.default(t);this.centerPoint=i.center();var n=i.toArray(),o=this.getHulls(n),s=this.marginPolygon(o,5|r.margin),a=h.flattenDeep(s);e.drawPolygon(a),e.endFill()}},_.prototype.getHulls=function(t){if(h.size(t)<3)throw Error("Get hulls error: Points count must greater than 3.");var e=new g.default;if(0===t.length)return!1;e.addPoints(t);var r=e.getHull();return(r=h.map(r,function(t){return t.toArray()})).push(r[0]),r},_.prototype.marginPolygon=function(t,e){return(new l.default).data(t).margin(e||10)},_.prototype.onDragStart=function(t){if(t.stopPropagation(),this.removeHighLight(),0===t.data.originalEvent.button){var e=this.parent.toLocal(t.data.global);this.dragging=!0,this.selecting=!1,this.last={parents:e},this.topo.setSelectedGroups(this),this.selectOn()}},_.prototype.onDragMove=function(t){var e=this;if(this.dragging){var r=this.parent.toLocal(t.data.global),i=[],n=[],o=[];0<this.childrenEdge.length&&(h.each(this.childNodes,function(t){t.isLock||(t.position.x+=r.x-e.last.parents.x,t.position.y+=r.y-e.last.parents.y,i=i.concat(t.linksArray),n=n.concat(t.includedGroups))}),h.each(h.uniq(i),function(t){o=o.concat(t.includeGroup)}),h.each(h.uniq(i),function(t){t.draw()}),h.each(h.uniq(n),function(t){t.draw()}),h.each(h.uniq(o),function(t){t.draw()})),this.last={parents:r}}else this.dragging=!1},_.prototype.onMouseup=function(){this.last=null,this.selecting&&this.onSelectEnd(),this.dragging=!1,this.selecting=!1,this.rectangle.clear(),this.parent&&this.parent.addChild(this.rectangle)},_.prototype.onSelectStart=function(t){this.removeHighLight();var e=this.parent.toLocal(t.data.global);this.dragging=!1,this.selecting=!0,this.last={parents:e}},_.prototype.onSelectMove=function(t){if(this.selecting){this.rectangle.clear();var e=this.parent.toLocal(t.data.global),r=document.getElementById(this.topo.domRegex),i=e.x,n=e.y;if(r){var o=r.clientWidth-1,s=r.clientHeight-1;e.x<=1?i=1:e.x>=o&&(i=o),e.y<=1?n=1:e.y>=s&&(n=s)}var a=this.last.parents.x,h=this.last.parents.y,u=i-a,l=n-h;this.rectangle.lineStyle(1,149911,1),this.rectangle.alpha=.8,this.rectangle.drawRect(a,h,u,l)}},_.prototype.onSelectEnd=function(){var t=this,e=this.rectangle.getLocalBounds(),r=this.topo.getElements(),i=this.topo.getGroups(),n=[];if(h.each(r,function(t){if(t instanceof v.Node){var r=t.getSprite();if(r){var i=t.y-r.height/2,o=t.x-r.width/2,s=t.x+r.width/2,a=t.y+r.height/2;i>=e.top&&s<=e.right&&a<=e.bottom&&o>=e.left&&n.push(t)}}}),h.each(n,function(e){t.selectLockNodes===e.isLock&&t.topo.setSelectedNodes(e)}),this.isSelectGroup){var o=h.filter(i,function(t){var e=t.getVisibleNodes();return h.every(e,function(t){return h.includes(n,t)})});this.removeHighLight(),h.each(o,function(e){t.topo.setSelectedGroups(e)})}},_.prototype.removeHighLight=function(){var t=this.topo.getSelectedNodes();h.each(t,function(t){t.selectOff()}),this.topo.removeSelectedNodes();var e=this.topo.getSelectedEdge();e&&e.selectOff(),this.topo.removeSelectedEdge();var r=this.topo.getSelectedGroups();h.each(r,function(t){t.selectOff()}),this.topo.removeSelectedGroups()},_.prototype.getGroups=function(){var t=this.elements;return h.filter(t,function(t){return t instanceof p.Group})},_);function _(t,e){var r=a.call(this)||this;return r.type="EdgeGroup",r.childrenEdge=[],r.labelContent="",r.centerPoint={x:0,y:0},r.isSelected=!1,r.polygonHullOutlineName=h.uniqueId("hull_outline_"),r.isSelecting=!1,r.childNodes=[],r.isLock=!1,r.labelPosition="Center",r.dragging=!1,r.rectangle=new PIXI.Graphics,r.selecting=!1,r.selectLockNodes=!1,r.isSelectGroup=!1,r.elements=t,r.polygon=new PIXI.Graphics,r.polygon.name=r.polygonHullOutlineName,r.interactive=!0,r.topo=e,document.addEventListener("mouseup",r.onMouseup.bind(r)),r.setDrag(),r}e.EdgeGroup=m},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o,s=r(2),a=(n=r(65))&&n.__esModule?n:{default:n},h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o=a.default),u.prototype.onChildrenChange=function(){},u.prototype.addChild=function(t){var e=arguments.length;if(1<e)for(var r=0;r<e;r++)this.addChild(arguments[r]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},u.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},u.prototype.swapChildren=function(t,e){if(t!==e){var r=this.getChildIndex(t),i=this.getChildIndex(e);this.children[r]=e,this.children[i]=t,this.onChildrenChange(r<i?r:i)}},u.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},u.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var r=this.getChildIndex(t);(0,s.removeItems)(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)},u.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},u.prototype.removeChild=function(t){var e=arguments.length;if(1<e)for(var r=0;r<e;r++)this.removeChild(arguments[r]);else{var i=this.children.indexOf(t);if(-1===i)return null;t.parent=null,t.transform._parentID=-1,(0,s.removeItems)(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this)}return t},u.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},u.prototype.removeChildren=function(t,e){var r=0<arguments.length&&void 0!==t?t:0,i=r,n="number"==typeof e?e:this.children.length,o=n-i,s=void 0;if(0<o&&o<=n){s=this.children.splice(i,o);for(var a=0;a<s.length;++a)s[a].parent=null,s[a].transform&&(s[a].transform._parentID=-1);this._boundsID++,this.onChildrenChange(r);for(var h=0;h<s.length;++h)s[h].emit("removed",this);return s}if(0==o&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},u.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var r=this.children[t];r.visible&&r.updateTransform()}},u.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},u.prototype._calculateBounds=function(){},u.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(t)}},u.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]);for(var i=this._enabledFilters.length=0;i<e.length;i++)e[i].enabled&&this._enabledFilters.push(e[i]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}r&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].renderWebGL(t);t.flush(),r&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},u.prototype._renderWebGL=function(t){},u.prototype._renderCanvas=function(t){},u.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},u.prototype.destroy=function(t){o.prototype.destroy.call(this);var e="boolean"==typeof t?t:t&&t.children,r=this.removeChildren(0,this.children.length);if(e)for(var i=0;i<r.length;++i)r[i].destroy(t)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(u,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),u);function u(){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return t.children=[],t}(e.default=h).prototype.containerUpdateTransform=h.prototype.updateTransform},function(t,e,r){"use strict";e.__esModule=!0;var i=l(r(72)),n=l(r(163)),o=l(r(74)),s=l(r(164)),a=r(2),h=r(0),u=l(r(3));function l(t){return t&&t.__esModule?t:{default:t}}var c,d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,c=i.default),f.prototype.render=function(t,e,r,i,n){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new o.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!n){var u=t.parent,l=this._tempDisplayObjectParent.transform.worldTransform;i?(i.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=u}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=h.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[h.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==r?r:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=a,t.renderCanvas(this),this.context=c,a.restore(),this.resolution=s,this.emit("postrender")}},f.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},f.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},f.prototype.destroy=function(t){this.destroyPlugins(),c.prototype.destroy.call(this,t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},f.prototype.resize=function(t,e){c.prototype.resize.call(this,t,e),this.smoothProperty&&(this.rootContext[this.smoothProperty]=u.default.SCALE_MODE===h.SCALE_MODES.LINEAR)},f.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},f);function f(t,e,r){!function(t,e){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this,"Canvas",t,e,r));return i.type=h.RENDERER_TYPE.CANVAS,i.rootContext=i.view.getContext("2d",{alpha:i.transparent}),i.context=i.rootContext,i.refresh=!0,i.maskManager=new n.default(i),i.smoothProperty="imageSmoothingEnabled",i.rootContext.imageSmoothingEnabled||(i.rootContext.webkitImageSmoothingEnabled?i.smoothProperty="webkitImageSmoothingEnabled":i.rootContext.mozImageSmoothingEnabled?i.smoothProperty="mozImageSmoothingEnabled":i.rootContext.oImageSmoothingEnabled?i.smoothProperty="oImageSmoothingEnabled":i.rootContext.msImageSmoothingEnabled&&(i.smoothProperty="msImageSmoothingEnabled")),i.initPlugins(),i.blendModes=(0,s.default)(),i._activeBlendMode=null,i.renderingToScreen=!1,i.resize(i.options.width,i.options.height),i}e.default=d,a.pluginTarget.mixin(d)},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},n);function n(t){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.renderer=t,this.renderer.on("context",this.onContextChange,this)}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var i,n=r(6),o=(i=r(3))&&i.__esModule?i:{default:i};function s(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var r=t.slice(0);return r.unshift("precision "+e+" float;"),r}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}var a,h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,a=n.GLShader),u);function u(t,e,r,i,n){return function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,s(e,n||o.default.PRECISION_VERTEX),s(r,n||o.default.PRECISION_FRAGMENT),void 0,i))}e.default=h},function(t,e,r){"use strict";var i=r(217).Loader,n=r(48).Resource,o=r(99),s=r(100);i.Resource=n,i.async=o,i.encodeBinary=s,i.base64=s,t.exports=i,t.exports.Loader=i,t.exports.default=i},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o,s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),a=(n=r(8))&&n.__esModule?n:{default:n},h=new s.Point,u=new s.Polygon,l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,o=s.Container),c.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},c.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},c.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},c.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},c.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},c.prototype._refresh=function(){},c.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},c.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,h);for(var e=this.vertices,r=u.points,i=this.indices,n=this.indices.length,o=this.drawMode===c.DRAW_MODES.TRIANGLES?3:1,s=0;s+2<n;s+=o){var a=2*i[s],l=2*i[s+1],d=2*i[s+2];if(r[0]=e[a],r[1]=e[1+a],r[2]=e[l],r[3]=e[1+l],r[4]=e[d],r[5]=e[1+d],u.contains(h.x,h.y))return!0}return!1},c.prototype.destroy=function(t){for(var e in this._glDatas){var r=this._glDatas[e];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,o.prototype.destroy.call(this,t)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(c,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t)&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this))}},{key:"tint",get:function(){return s.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=s.utils.hex2rgb(t,this.tintRgb)}}]),c);function c(t,e,r,i,n){!function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return h._texture=t||a.default.EMPTY,h.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),h.vertices=e||new Float32Array([0,0,100,0,100,100,0,100]),h.indices=i||new Uint16Array([0,1,3,2]),h.dirty=0,h.indexDirty=0,h.vertexDirty=0,h.autoUpdate=!0,h.blendMode=s.BLEND_MODES.NORMAL,h.canvasPadding=s.settings.MESH_CANVAS_PADDING,h.drawMode=n||c.DRAW_MODES.TRIANGLE_MESH,h.shader=null,h.tintRgb=new Float32Array([1,1,1]),h._glDatas={},h._uvTransform=new s.TextureMatrix(h._texture),h.uploadUvTransform=!1,h.pluginName="mesh",h}(e.default=l).DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},function(t,e,r){"use strict";var i=r(33),n=r(52),o=r(53),s=r(118);function a(t,e){for(var r=new Array(t.length-1),i=1;i<t.length;++i)for(var n=r[i-1]=new Array(t.length-1),o=0,s=0;o<t.length;++o)o!==e&&(n[s++]=t[i][o]);return r}function h(t){if(1===t.length)return t[0];if(2===t.length)return["sum(",t[0],",",t[1],")"].join("");var e=t.length>>1;return["sum(",h(t.slice(0,e)),",",h(t.slice(e)),")"].join("")}function u(t){if(2===t.length)return[["sum(prod(",t[0][0],",",t[1][1],"),prod(-",t[0][1],",",t[1][0],"))"].join("")];for(var e=[],r=0;r<t.length;++r)e.push(["scale(",h(u(a(t,r))),",",(i=r,1&i?"-":""),t[0][r],")"].join(""));return e;var i}function l(t){for(var e=[],r=[],l=function(t){for(var e=new Array(t),r=0;r<t;++r){e[r]=new Array(t);for(var i=0;i<t;++i)e[r][i]=["m",i,"[",t-r-1,"]"].join("")}return e}(t),c=[],d=0;d<t;++d)0==(1&d)?e.push.apply(e,u(a(l,d))):r.push.apply(r,u(a(l,d))),c.push("m"+d);var f=h(e),p=h(r),y="orientation"+t+"Exact",g=["function ",y,"(",c.join(),"){var p=",f,",n=",p,",d=sub(p,n);return d[d.length-1];};return ",y].join("");return new Function("sum","prod","scale","sub",g)(n,i,o,s)}var c=l(3),d=l(4),f=[function(){return 0},function(){return 0},function(t,e){return e[0]-t[0]},function(t,e,r){var i,n=(t[1]-r[1])*(e[0]-r[0]),o=(t[0]-r[0])*(e[1]-r[1]),s=n-o;if(0<n){if(o<=0)return s;i=n+o}else{if(!(n<0))return s;if(0<=o)return s;i=-(n+o)}var a=3.3306690738754716e-16*i;return a<=s||s<=-a?s:c(t,e,r)},function(t,e,r,i){var n=t[0]-i[0],o=e[0]-i[0],s=r[0]-i[0],a=t[1]-i[1],h=e[1]-i[1],u=r[1]-i[1],l=t[2]-i[2],c=e[2]-i[2],f=r[2]-i[2],p=o*u,y=s*h,g=s*a,v=n*u,m=n*h,_=o*a,x=l*(p-y)+c*(g-v)+f*(m-_),b=7.771561172376103e-16*((Math.abs(p)+Math.abs(y))*Math.abs(l)+(Math.abs(g)+Math.abs(v))*Math.abs(c)+(Math.abs(m)+Math.abs(_))*Math.abs(f));return b<x||b<-x?x:d(t,e,r,i)}];!function(){for(;f.length<=5;)f.push(l(f.length));for(var e=[],r=["slow"],i=0;i<=5;++i)e.push("a"+i),r.push("o"+i);var n=["function getOrientation(",e.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(i=2;i<=5;++i)n.push("case ",i,":return o",i,"(",e.slice(0,i).join(),");");n.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation"),r.push(n.join(""));var o=Function.apply(void 0,r);for(t.exports=o.apply(void 0,[function(t){var e=f[t.length];return(e=e||(f[t.length]=l(t.length))).apply(void 0,t)}].concat(f)),i=0;i<=5;++i)t.exports[i]=f[i]}()},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(r(5)),h=r(11),u=r(105),l=PIXI.Point,c=(n(d,s=h.CommonElement),d.prototype.draw=function(){this.clearRelatedGraph();var t=this.lineFunction.adustNodePos(this.defaultStyle),e=this.calcDottedEdgePoints(t.srcNode,t.endNode);this.createBackground(t.srcNode,t.endNode),this.drawImaginaryLink(e)},d.prototype.clearRelatedGraph=function(){this.background.clear(),this.neon.clear()},d.prototype.createBackground=function(t,e){var r,i=this.defaultStyle,n=this.background,o=this.calcEdgePoints(t,e);r=this.invariableStyles&&this.invariableStyles.lineColor&&15658734!==this.invariableStyles.lineColor?this.invariableStyles.lineColor:2899536,n.interactive=!0,n.buttonMode=!0,n.beginFill(r,i.fillOpacity),n.moveTo(o.sLeft.x,o.sLeft.y),n.lineTo(o.sRight.x,o.sRight.y),n.lineTo(o.eRight.x,o.eRight.y),n.lineTo(o.eLeft.x,o.eLeft.y),n.endFill(),this.addChild(n)},d.prototype.drawImaginaryLink=function(t){var e=this.defaultStyle;if(!this.hitTestRectangle(this.start,this.end)){var r,i=this.neon;i.interactive=!0,r=this.invariableStyles&&this.invariableStyles.fillColor?this.invariableStyles.fillColor:16776960,a.each(t,function(t){i.beginFill(r,e.fillOpacity),i.moveTo(t.sLeft.x,t.sLeft.y),i.lineTo(t.sRight.x,t.sRight.y),i.lineTo(t.eRight.x,t.eRight.y),i.lineTo(t.eLeft.x,t.eLeft.y),i.endFill()}),this.background.addChild(i)}},d.prototype.calcEdgePoints=function(t,e){var r=this.defaultStyle.lineWidth,i=this.lineFunction.getAngle(),n=4*r,o=t.x,s=t.y,a=e.x,h=e.y,u={sLeft:{x:0,y:0},sRight:{x:0,y:0},eRight:{x:0,y:0},eLeft:{x:0,y:0}},c=new l(o-Math.cos(i)*n,s+Math.sin(i)*n),d=new l(o+Math.cos(i)*n,s-Math.sin(i)*n),f=new l(a+Math.cos(i)*n,h-Math.sin(i)*n),p=new l(a-Math.cos(i)*n,h+Math.sin(i)*n);return u.sLeft=c,u.sRight=d,u.eRight=f,u.eLeft=p,u},d.prototype.calcDottedEdgePoints=function(t,e){for(var r=4*this.defaultStyle.lineWidth,i=this.lineFunction.getAngle(),n=this.flowLength,o=t.x-e.x,s=t.y-e.y,a=Math.sqrt(o*o+s*s)/n/2,h=n*Math.sin(i),u=n*Math.cos(i),c=[],d=t.x,f=t.y,p=0;p<a;p+=1){var y={sLeft:{x:0,y:0},sRight:{x:0,y:0},eRight:{x:0,y:0},eLeft:{x:0,y:0}},g=new l(d-Math.cos(i)*r,f+Math.sin(i)*r),v=new l(d+Math.cos(i)*r,f-Math.sin(i)*r),m=new l(d-h+Math.cos(i)*r,f-u-Math.sin(i)*r),_=new l(d-h-Math.cos(i)*r,f-u+Math.sin(i)*r);d-=2*h,f-=2*u,y.sLeft=g,y.sRight=v,y.eRight=m,y.eLeft=_,c.push(y)}return c},d.prototype.hitTestRectangle=function(t,e){var r,i,n,o;return t.centerX=t.x,t.centerY=t.y,e.centerX=e.x,e.centerY=e.y,t.halfWidth=t.iconWidth/2,t.halfHeight=t.iconHeight/2,e.halfWidth=e.iconWidth/2,e.halfHeight=e.iconHeight/2,n=t.centerX-e.centerX,o=t.centerY-e.centerY,r=t.halfWidth+e.halfWidth,i=t.halfHeight+e.halfHeight,Math.abs(n)<r&&Math.abs(o)<i},d.prototype.gameLoop=function(){requestAnimationFrame(this.gameLoop.bind(this)),this.moveDistance+=1;var t=this.lineFunction.adustNodePos(this.defaultStyle),e=this.calcDottedEdgePoints(t.srcNode,t.endNode);this.moveDistance===this.flowLength+1&&(this.moveDistance=-(this.flowLength+1)),this.movePoints(e)},d.prototype.movePoints=function(t){var e=this,r=this.lineFunction.getAngle(),i=this.moveDistance*Math.sin(r),n=this.moveDistance*Math.cos(r),o=a.each(t,function(t){t.sLeft=new l(t.sLeft.x-i,t.sLeft.y-n),t.sRight=new l(t.sRight.x-i,t.sRight.y-n),t.eLeft=new l(t.eLeft.x-i,t.eLeft.y-n),t.eRight=new l(t.eRight.x-i,t.eRight.y-n),t=e.adjustedPoints(t)});this.neon.clear(),this.drawImaginaryLink(o)},d.prototype.adjustedPoints=function(t){var e=t,r=this.lineFunction.adustNodePos(this.defaultStyle),i=4*this.defaultStyle.lineWidth,n=this.lineFunction.getAngle(),o=r.srcNode.x,s=r.srcNode.y,a=r.endNode.x,h=r.endNode.y,u=new l(o-Math.cos(n)*i,s+Math.sin(n)*i),c=new l(o+Math.cos(n)*i,s-Math.sin(n)*i),d=new l(a+Math.cos(n)*i,h-Math.sin(n)*i),f=new l(a-Math.cos(n)*i,h+Math.sin(n)*i);return o<=a&&s<=h?(e.eRight.x>=d.x&&e.eRight.y>=d.y&&(e.eRight=d,e.eLeft=f),e.sRight.x>=d.x&&e.sRight.y>=d.y&&(e.sRight=d,e.sLeft=f),e.sRight.x<=c.x&&e.sRight.y<=c.y&&(e.sRight=c,e.sLeft=u),e.eRight.x<=c.x&&e.eRight.y<=c.y&&(e.eRight=c,e.eLeft=u)):a<o&&s<h?(e.eRight.x<=d.x&&e.eRight.y>=d.y&&(e.eRight=d,e.eLeft=f),e.sRight.x<=d.x&&e.sRight.y>=d.y&&(e.sRight=d,e.sLeft=f),e.sRight.x>=c.x&&e.sRight.y<=c.y&&(e.sRight=c,e.sLeft=u),e.eRight.x>=c.x&&e.eRight.y<=c.y&&(e.eRight=c,e.eLeft=u)):a<o&&h<s?(e.eRight.x<=d.x&&e.eRight.y<=d.y&&(e.eRight=d,e.eLeft=f),e.sRight.x<=d.x&&e.sRight.y<=d.y&&(e.sRight=d,e.sLeft=f),e.sRight.x>=c.x&&e.sRight.y>=c.y&&(e.sRight=c,e.sLeft=u),e.eRight.x>=c.x&&e.eRight.y>=c.y&&(e.eRight=c,e.eLeft=u)):o<a&&h<s?(e.eRight.x>=d.x&&e.eRight.y<=d.y&&(e.eRight=d,e.eLeft=f),e.sRight.x>=d.x&&e.sRight.y<=d.y&&(e.sRight=d,e.sLeft=f),e.sRight.x<=c.x&&e.sRight.y>=c.y&&(e.sRight=c,e.sLeft=u),e.eRight.x<=c.x&&e.eRight.y>=c.y&&(e.eRight=c,e.eLeft=u)):s===h&&o<=a?(e.eRight.x>=d.x&&(e.eRight=d,e.eLeft=f),e.sRight.x>=d.x&&(e.sRight=d,e.sLeft=f),e.sRight.x<=c.x&&(e.sRight=c,e.sLeft=u),e.eRight.x<=c.x&&(e.eRight=c,e.eLeft=u)):s===h&&a<o?(e.eRight.x<d.x&&(e.eRight=d,e.eLeft=f),e.sRight.x<d.x&&(e.sRight=d,e.sLeft=f),e.sRight.x>c.x&&(e.sRight=c,e.sLeft=u),e.eRight.x>c.x&&(e.eRight=c,e.eLeft=u)):o===a&&s<h?(e.eRight.y>d.y&&(e.eRight=d,e.eLeft=f),e.sRight.y>d.y&&(e.sRight=d,e.sLeft=f),e.sRight.y<c.y&&(e.sRight=c,e.sLeft=u),e.eRight.y<c.y&&(e.eRight=c,e.eLeft=u)):o===a&&h<s&&(e.eRight.y<=d.y&&(e.eRight=d,e.eLeft=f),e.sRight.y<=d.y&&(e.sRight=d,e.sLeft=f),e.sRight.y>=c.y&&(e.sRight=c,e.sLeft=u),e.eRight.y>=c.y&&(e.eRight=c,e.eLeft=u)),e},d);function d(t,e){var r=s.call(this)||this;return r.type="DataFlow",r.flowLength=30,r.moveDistance=0,r.start=t,r.end=e,r.background=new PIXI.Graphics,r.neon=new PIXI.Graphics,r.lineFunction=new u.LineCommonFunction(t,e),t.exceptEdgesArray.push(r),e.exceptEdgesArray.push(r),r.gameLoop(),r}e.DataFlow=c},function(t,e,r){"use strict";e.__esModule=!0;var i,n=r(2),o={getTintedTexture:function(t,e){var r=t._texture,i="#"+("00000"+(0|(e=o.roundColor(e))).toString(16)).substr(-6);r.tintCache=r.tintCache||{};var n=r.tintCache[i],s=void 0;if(n){if(n.tintId===r._updateID)return r.tintCache[i];s=r.tintCache[i]}else s=o.canvas||document.createElement("canvas");if(o.tintMethod(r,e,s),s.tintId=r._updateID,o.convertTintToImage){var a=new Image;a.src=s.toDataURL(),r.tintCache[i]=a}else r.tintCache[i]=s,o.canvas=null;return s},tintWithMultiply:function(t,e,r){var i=r.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.save(),i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="multiply",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.restore()},tintWithOverlay:function(t,e,r){var i=r.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,r.width=Math.ceil(n.width),r.height=Math.ceil(n.height),i.save(),i.globalCompositeOperation="copy",i.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),i.fillRect(0,0,n.width,n.height),i.globalCompositeOperation="destination-atop",i.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),i.restore()},tintWithPerPixel:function(t,e,r){var i=r.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,r.width=Math.ceil(o.width),r.height=Math.ceil(o.height),i.save(),i.globalCompositeOperation="copy",i.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),i.restore();for(var a=(0,n.hex2rgb)(e),h=a[0],u=a[1],l=a[2],c=i.getImageData(0,0,o.width,o.height),d=c.data,f=0;f<d.length;f+=4)d[f+0]*=h,d[f+1]*=u,d[f+2]*=l;i.putImageData(c,0,0)},roundColor:function(t){var e=o.cacheStepsPerColorChannel,r=(0,n.hex2rgb)(t);return r[0]=Math.min(255,r[0]/e*e),r[1]=Math.min(255,r[1]/e*e),r[2]=Math.min(255,r[2]/e*e),(0,n.rgb2hex)(r)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((i=r(75))&&i.__esModule?i:{default:i}).default)(),tintMethod:0};o.tintMethod=o.canUseMultiply?o.tintWithMultiply:o.tintWithPerPixel,e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=(i=r(20))&&i.__esModule?i:{default:i},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.default),a.prototype.start=function(){},a.prototype.stop=function(){this.flush()},a.prototype.flush=function(){},a.prototype.render=function(t){},a);function a(){return function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.apply(this,arguments))}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=m(r(72)),n=m(r(166)),o=m(r(169)),s=m(r(170)),a=m(r(29)),h=m(r(27)),u=m(r(172)),l=m(r(15)),c=m(r(173)),d=m(r(174)),f=m(r(176)),p=m(r(177)),y=r(2),g=m(r(6)),v=r(0);function m(t){return t&&t.__esModule?t:{default:t}}var _,x=0,b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,_=i.default),w.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new u.default(this),this.filterManager=new s.default(this),this.textureGC=new c.default(this),this.state.resetToDefault(),this.rootRenderTarget=new a.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var r=new g.default.GLTexture.fromData(t,null,1,1),i={_glTextures:{}};i._glTextures[this.CONTEXT_UID]={};for(var n=0;n<e;n++){var o=new l.default;o._glTextures[this.CONTEXT_UID]=r,this.boundTextures[n]=i,this.emptyTextures[n]=o,this.bindTexture(null,n)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},w.prototype.render=function(t,e,r,i,n){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!n){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,i),this.currentRenderer.start(),(void 0!==r?r:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},w.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},w.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},w.prototype.resize=function(t,e){i.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},w.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},w.prototype.clear=function(t){this._activeRenderTarget.clear(t)},w.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},w.prototype.clearRenderTexture=function(t,e){var r=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return r&&r.clear(e),this},w.prototype.bindRenderTexture=function(t,e){var r=void 0;if(t){var i=t.baseTexture;i._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(i,0),this.unbindTexture(i),(r=i._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else r=this.rootRenderTarget;return r.transform=e,this.bindRenderTarget(r),this},w.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&((this._activeRenderTarget=t).activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},w.prototype.bindShader=function(t,e){return this._activeShader!==t&&((this._activeShader=t).bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},w.prototype.bindTexture=function(t,e,r){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,r)e=e||0;else{for(var i=0;i<this.boundTextures.length;i++)if(this.boundTextures[i]===t)return i;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},w.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===this.emptyTextures[r]&&(e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture))}for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===t&&(this.boundTextures[i]=this.emptyTextures[i],e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture));return this},w.prototype.createVao=function(){return new g.default.VertexArrayObject(this.gl,this.state.attribState)},w.prototype.bindVao=function(t){return this._activeVao===t||(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t),this},w.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},w.prototype.handleContextLost=function(t){t.preventDefault()},w.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},w.prototype.destroy=function(t){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),_.prototype.destroy.call(this,t),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},w);function w(t,e,r){!function(t,e){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,_.call(this,"WebGL",t,e,r));return i.legacy=i.options.legacy,i.legacy&&(g.default.VertexArrayObject.FORCE_NATIVE=!0),i.type=v.RENDERER_TYPE.WEBGL,i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),i.view.addEventListener("webglcontextlost",i.handleContextLost,!1),i.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i._contextOptions={alpha:i.transparent,antialias:i.options.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:i.options.preserveDrawingBuffer,powerPreference:i.options.powerPreference},i._backgroundColorRgba[3]=i.transparent?0:1,i.maskManager=new n.default(i),i.stencilManager=new o.default(i),i.emptyRenderer=new h.default(i),i.currentRenderer=i.emptyRenderer,i.textureManager=null,i.filterManager=null,i.initPlugins(),i.options.context&&(0,p.default)(i.options.context),i.gl=i.options.context||g.default.createContext(i.view,i._contextOptions),i.CONTEXT_UID=x++,i.state=new d.default(i.gl),i.renderingToScreen=!0,i.boundTextures=null,i._activeShader=null,i._activeVao=null,i._activeRenderTarget=null,i._initContext(),i.drawModes=(0,f.default)(i.gl),i._nextTextureLocation=0,i.setBlendMode(0),i}e.default=b,y.pluginTarget.mixin(b)},function(t,e,r){"use strict";e.__esModule=!0;var i,n=r(4),o=r(0),s=(i=r(3))&&i.__esModule?i:{default:i},a=r(6),h=(u.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},u.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},u.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},u.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},u.prototype.calculateProjection=function(t,e){var r=this.projectionMatrix;e=e||t,r.identity(),this.root?(r.a=1/t.width*2,r.d=-1/t.height*2,r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=1/t.width*2,r.d=1/t.height*2,r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},u.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var r=this.frame||this.size;this.calculateProjection(r)}},u.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},u);function u(t,e,r,i,h,l){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=h||s.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==i?i:s.default.SCALE_MODE,this.root=l||!1,this.root?(this.frameBuffer=new a.GLFramebuffer(t,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=a.GLFramebuffer.createRGBA(t,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(e,r)}e.default=h},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){t.nativeLines?function(t,e){var r=0,i=t.points;if(0!==i.length){var o=e.points,s=i.length/2,a=(0,n.hex2rgb)(t.lineColor),h=t.lineAlpha,u=a[0]*h,l=a[1]*h,c=a[2]*h;for(r=1;r<s;r++){var d=i[2*(r-1)],f=i[2*(r-1)+1],p=i[2*r],y=i[2*r+1];o.push(d,f),o.push(u,l,c,h),o.push(p,y),o.push(u,l,c,h)}}}(t,r):function(t,e){var r=t.points;if(0!==r.length){var o=new i.Point(r[0],r[1]),s=new i.Point(r[r.length-2],r[r.length-1]);if(o.x===s.x&&o.y===s.y){(r=r.slice()).pop(),r.pop();var a=(s=new i.Point(r[r.length-2],r[r.length-1])).x+.5*(o.x-s.x),h=s.y+.5*(o.y-s.y);r.unshift(a,h),r.push(a,h)}var u=e.points,l=e.indices,c=r.length/2,d=r.length,f=u.length/6,p=t.lineWidth/2,y=(0,n.hex2rgb)(t.lineColor),g=t.lineAlpha,v=y[0]*g,m=y[1]*g,_=y[2]*g,x=r[0],b=r[1],w=r[2],T=r[3],E=0,S=0,M=-(b-T),O=x-w,P=0,C=0,A=0,I=0,R=Math.sqrt(M*M+O*O);M/=R,O/=R,M*=p,O*=p;var D=t.lineAlignment,N=2*(1-D),L=2*D;u.push(x-M*N,b-O*N,v,m,_,g),u.push(x+M*L,b+O*L,v,m,_,g);for(var k=1;k<c-1;++k){x=r[2*(k-1)],b=r[2*(k-1)+1],w=r[2*k],T=r[2*k+1],E=r[2*(k+1)],S=r[2*(k+1)+1],M=-(b-T),O=x-w,M/=R=Math.sqrt(M*M+O*O),O/=R,M*=p,O*=p,P=-(T-S),C=w-E,P/=R=Math.sqrt(P*P+C*C),C/=R;var B=-O+b-(-O+T),F=-M+w-(-M+x),j=(-M+x)*(-O+T)-(-M+w)*(-O+b),U=-(C*=p)+S-(-C+T),z=-(P*=p)+w-(-P+E),G=(-P+E)*(-C+T)-(-P+w)*(-C+S),X=B*z-U*F;if(Math.abs(X)<.1)X+=10.1,u.push(w-M*N,T-O*N,v,m,_,g),u.push(w+M*L,T+O*L,v,m,_,g);else{var W=(F*G-z*j)/X,H=(U*j-B*G)/X;196*p*p<(W-w)*(W-w)+(H-T)*(H-T)?(A=M-P,I=O-C,A/=R=Math.sqrt(A*A+I*I),I/=R,A*=p,I*=p,u.push(w-A*N,T-I*N),u.push(v,m,_,g),u.push(w+A*L,T+I*L),u.push(v,m,_,g),u.push(w-A*L*N,T-I*N),u.push(v,m,_,g),d++):(u.push(w+(W-w)*N,T+(H-T)*N),u.push(v,m,_,g),u.push(w-(W-w)*L,T-(H-T)*L),u.push(v,m,_,g))}}x=r[2*(c-2)],b=r[2*(c-2)+1],w=r[2*(c-1)],M=-(b-(T=r[2*(c-1)+1])),O=x-w,M/=R=Math.sqrt(M*M+O*O),O/=R,M*=p,O*=p,u.push(w-M*N,T-O*N),u.push(v,m,_,g),u.push(w+M*L,T+O*L),u.push(v,m,_,g),l.push(f);for(var V=0;V<d;++V)l.push(f++);l.push(f-1)}}(t,e)};var i=r(4),n=r(2)},function(t,e,r){function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t){return"function"==typeof t}function o(t){return void 0!==t}var s=r(112),a=r(32),h=r(113),u=r(115),l=r(125),c=2*Math.PI;function d(t){return t instanceof d?t:this instanceof d?(Array.isArray(t)||(t=t?[t]:[]),void(this.points=t.map(function(t){return Array.isArray(t)?s.fromArray(t):t instanceof s?t:void 0!==t.x&&void 0!==t.y?s(t.x,t.y):void 0}))):new d(t)}d.prototype={each:function(t){for(var e=0;e<this.points.length&&!1!==t.call(this,this.point(e-1),this.point(e),this.point(e+1),e);e++);return this},insert:function(t,e){this.points.splice(e,0,t)},point:function(t){var e=t%this.points.length;return e<0&&(e=this.points.length+e),this.points[e]},dedupe:function(t){var e={},r=this.points.filter(function(t){var r=t.x+":"+t.y;if(!e[r])return e[r]=!0});return t?new d(r):(this.points=r,this)},remove:function(t){return"number"==typeof t?this.points.splice(t,1):this.points=this.points.filter(function(e){return e!==t}),this},clean:function(t){var e=this.point(-1),r=this.points.filter(function(t){var r=!1;return e.equal(t)||(r=!0),e=t,r});return t?new d(r):(this.points=r,this)},simplify:function(){function t(t){return Math.round(1e4*t)/1e4}this.points=this.points.filter(Boolean);for(var e,r,i,n=[],o=0;o<this.points.length;o++){var s=this.point(o-1),a=this.point(o+1),h=this.point(o),u=h.subtract(s,!0).angleTo(h.subtract(a,!0));r=h,i=a,0!==t((e=s).x*(r.y-i.y)+r.x*(i.y-e.y)+i.x*(e.y-r.y))&&t(u)&&n.push(h)}return this.points=n,this},winding:function(){return 0<this.area()},rewind:function(t){return t=!!t,this.winding()!==t&&this.points.reverse(),this},area:function(){var t=0,e=this.point(0);return this.each(function(r,i,n,o){if(!(o<2)){var s=e.subtract(i,!0),a=e.subtract(r,!0);t+=s.x*a.y-s.y*a.x}}),t/2},closestPointTo:function(t){var e,r=this.points.length,i=1/0,n=null,o=0,s=!1;for(e=0;e<r;e++){var a=this.point(e-1),h=this.point(e);if(!a.equal(h)){var u=h.subtract(a,!0),l=t.subtract(a,!0).dot(u),c=u.dot(u),d=Math.min(Math.max(l/c,0),1),f=u.multiply(d).add(a),p=t.subtract(f,!0).lengthSquared();p<i&&(n=f,o=e,s=0===d||1===d,i=p)}}return n.prev=this.point(o-1),n.next=this.point(o+1),s&&(n.current=this.point(o)),n},center:function(){var t=this.aabb();return s(t.x+t.w/2,t.y+t.h/2)},scale:function(t,e,r){var i=this;r&&(i=this.clone()),e=e||i.center(),i.each(function(e,r){r.multiply(t)});var n=e.multiply(t,!0).subtract(e);return i.each(function(t,e){e.subtract(n)}),i},containsPoint:function(t){var e=!1;return this.each(function(r,i,n){(r.y<=t.y&&t.y<i.y||i.y<=t.y&&t.y<r.y)&&t.x<(i.x-r.x)*(t.y-r.y)/(i.y-r.y)+r.x&&(e=!e)}),e},containsPolygon:function(t){i(t)&&(t=new d(t));for(var e=0;e<t.points.length;e++)if(!this.containsPoint(t.points[e]))return!1;for(e=0;e<this.points.length;e++)for(var r=this.line(e),n=0;n<t.points.length;n++){var o=t.line(n),s=a(r[0],r[1],o[0],o[1]);if(s&&!0!==s)return!1}return!0},aabb:function(){if(this.points.length<2)return{x:0,y:0,w:0,h:0};var t,e,r,i,n=this.point(1);return e=t=n.x,r=i=n.y,this.each(function(n,o){o.x>e&&(e=o.x),o.x<t&&(t=o.x),o.y>r&&(r=o.y),o.y<i&&(i=o.y)}),{x:t,y:i,w:e-t,h:r-i}},offset:function(t,e){var r=[];function i(e,r){var i=e.subtract(r,!0),n=s(1,0).angleTo(i),o=s(t,0).rotate(n+Math.PI/2);o.add(r);var a=o.add(i,!0),u=new h(o.x,o.y,a.x,a.y),l=e.add(i,!0);return new h(e.x,e.y,l.x,l.y),u}this.rewind(!1).simplify().each(function(e,i,n,o){var s=i.subtract(e,!0).normalize(),a=i.subtract(n,!0).normalize(),h=t/Math.sin(Math.acos(s.dot(a))/2),u=s.add(a,!0).normalize().multiply(h,!0),l=function(t){return t<0&&(t+=c),t}(s.angleTo(a)),d=s.perpDot(a)<0?i.add(u,!0):i.subtract(u,!0);(.75*c<l||l<.25*c)&&(d.computeSegments=l,i.color="white",i.radius=3),d.point=i,r.push(d)});var n=d(r),o=[];return n.each(function(t,e,r,s){if(a(e,e.point,r,r.point)){var h=n.point(s-2),u=n.point(s+2),l=(i(h.point,t.point),i(t.point,e.point)),c=(i(e.point,r.point),i(r.point,u.point)),d=l.intersect(c);d.color="yellow",d.point=e.point,o.push(d)}else o.push(e)}),o.length?d(o):n},line:function(t){return[this.point(t),this.point(t+1)]},lines:function(t){var e=0;return this.each(function(r,i,n){t(i,n,e++)}),this},selfIntersections:function(){var t=[];return l(this.points,function(e,r,i,n,o,a,h,u){if(u){var l=s.fromArray(e);return t.push(l),l.s=r+i.subtract(l,!0).length()/i.subtract(n,!0).length(),l.b=o+a.subtract(l,!0).length()/a.subtract(h,!0).length(),l.si=r,l.bi=o,!1}}),d(t)},pruneSelfIntersections:function(){var t=this.selfIntersections(),e=this.point(0).clone();e.s=0,e.b=this.points.length-1+.99;var r=new function(t,e){this.value=t,this.depth=this.depth,this.children=[]}(e),i=[e];t.each(function(t,e,n){console.log("belongTo:",function(t,e,r,i){return r<t&&e<i}(r.s,r.b,e.s,e.b),"contain:",function(t,e,r,i){return t<r&&i<e}(r.s,r.b,e.s,e.b),"interfere:",function(t,e,r,i){return t<r&&r<e&&e<i||r<e&&e<i&&t<r}(r.s,r.b,e.s,e.b)),i.push(e),r=e});var n=[];if(i.length<2)return[this];i.sort(function(t,e){return t.s-e.s});for(var o=0;o<i.length;o+=2){var s=[],a=o<i.length-1?i[o+1]:null;if(a){for(var h=Math.floor(i[o].s);h<=Math.floor(a.s);h++)s.push(this.point(h));for(s.push(a),h=Math.floor(a.b+1);h<=Math.floor(i[o].b);h++)s.push(this.point(h))}else{s.push(i[o]);for(var u=Math.floor(i[o].s+1);u<=Math.floor(i[o].b);u++)s.push(this.point(u))}n.push(new d(s))}return n},get length(){return this.points.length},clone:function(){var t=[];return this.each(function(e,r){t.push(r.clone())}),new d(t)},rotate:function(t,e,r){return e=e||this.center(),(r?this.clone():this).each(function(r,i){i.subtract(e).rotate(t).add(e)})},translate:function(t,e){var r=e?this.clone():this;return r.each(function(e,r){r.add(t)}),r},equal:function(t){for(var e=t.length;e--;)if(!this.point(e).equal(t.point(e)))return!1;return!0},containsCircle:function(t,e,r){var i=new s(t,e);return!!this.containsPoint(i)&&(this.closestPointTo(i).distance(i)>=r||void 0)},contains:function(t){return!!t&&(o(t.radius)&&t.position?(e=n(t.radius)?t.radius():t.radius,this.containsCircle(t.position.x,t.position.y,e)):void 0!==t.points?(n(t.containsPolygon)?r=t.points:i(t.points)&&(r=t.points),this.containsPolygon(r)):o(t.x1)&&o(t.x2)&&o(t.y1)&&o(t.y2)?this.containsPolygon([new s(t.x1,t.y1),new s(t.x2,t.y1),new s(t.x2,t.y2),new s(t.x1,t.y2)]):!(!o(t.x)||!o(t.y))&&(o(t.w)&&o(t.h)&&(a=t.x+t.w,h=t.y+t.h),o(t.width)&&o(t.height)&&(a=t.x+t.width,h=t.y+t.height),this.containsPolygon([new s(t.x,t.y),new s(a,t.y),new s(a,h),new s(t.x,h)])));var e,r,a,h},union:function(t){return d(u(this.toArray(),t.toArray(),"or")[0])},cut:function(t){return u(this.toArray(),t.toArray(),"not").map(function(t){return new d(t)})},intersect:function(t){return u(this.toArray(),t.toArray(),"and").map(function(t){return new d(t)})},toArray:function(){for(var t=this.length,e=Array(t),r=0;r<t;r++)e[r]=this.points[r].toArray();return e},toString:function(){return this.points.join(",")}},void 0!==t&&t.exports&&(t.exports=d),"undefined"!=typeof window&&(window.Polygon=d)},function(t,e){function r(t,e,r,i,n,o,s,a){if(4===arguments.length){var h=t,u=e,l=r,c=i;a=h.length&&2===h.length?(t=h[0],e=h[1],r=u[0],i=u[1],n=l[0],o=l[1],s=c[0],c[1]):(t=h.x,e=h.y,r=u.x,i=u.y,n=l.x,o=l.y,s=c.x,c.y)}var d,f,p,y,g,v,m,_,x,b,w;if(b=(d=i-e)*s+(p=t-r)*a+(g=r*e-t*i),!(0!=(x=d*n+p*o+g)&&0!=b&&(0<=x&&0<=b||x<0&&b<0)||(_=(f=a-o)*r+(y=n-s)*i+(v=s*o-n*a),0!=(m=f*t+y*e+v)&&0!=_&&(0<=m&&0<=_||m<0&&_<0))))return 0==(w=d*y-f*p)||[(p*v-y*g)/w,(f*g-d*v)/w]}void 0!==t&&t.exports&&(t.exports=r),"undefined"!=typeof window&&(window.segseg=window.segseg||r)},function(t,e,r){"use strict";t.exports=function(t,e,r){var n=t*e,o=i*t,s=o-(o-t),a=t-s,h=i*e,u=h-(h-e),l=e-u,c=a*l-(n-s*u-a*u-s*l);return r?(r[0]=c,r[1]=n,r):[c,n]};var i=+(Math.pow(2,27)+1)},function(WW,XW){var YW;YW=function(){return this}();try{YW=YW||Function("return this")()||eval("this")}catch(t){"object"==typeof window&&(YW=window)}WW.exports=YW},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.copy=function(t){this.set(t.x,t.y)},n.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},n.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},n);function n(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o=(n=r(35))&&n.__esModule?n:{default:n},s=r(0),a=(h.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},h.prototype.set=function(t,e,r,i,n,o){return this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this},h.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var r=e||this.array;return t?(r[0]=this.a,r[1]=this.b,r[2]=0,r[3]=this.c,r[4]=this.d,r[5]=0,r[6]=this.tx,r[7]=this.ty):(r[0]=this.a,r[1]=this.c,r[2]=this.tx,r[3]=this.b,r[4]=this.d,r[5]=this.ty,r[6]=0,r[7]=0),r[8]=1,r},h.prototype.apply=function(t,e){e=e||new o.default;var r=t.x,i=t.y;return e.x=this.a*r+this.c*i+this.tx,e.y=this.b*r+this.d*i+this.ty,e},h.prototype.applyInverse=function(t,e){e=e||new o.default;var r=1/(this.a*this.d+this.c*-this.b),i=t.x,n=t.y;return e.x=this.d*r*i+-this.c*r*n+(this.ty*this.c-this.tx*this.d)*r,e.y=this.a*r*n+-this.b*r*i+(-this.ty*this.a+this.tx*this.b)*r,e},h.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},h.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},h.prototype.rotate=function(t){var e=Math.cos(t),r=Math.sin(t),i=this.a,n=this.c,o=this.tx;return this.a=i*e-this.b*r,this.b=i*r+this.b*e,this.c=n*e-this.d*r,this.d=n*r+this.d*e,this.tx=o*e-this.ty*r,this.ty=o*r+this.ty*e,this},h.prototype.append=function(t){var e=this.a,r=this.b,i=this.c,n=this.d;return this.a=t.a*e+t.b*i,this.b=t.a*r+t.b*n,this.c=t.c*e+t.d*i,this.d=t.c*r+t.d*n,this.tx=t.tx*e+t.ty*i+this.tx,this.ty=t.tx*r+t.ty*n+this.ty,this},h.prototype.setTransform=function(t,e,r,i,n,o,s,a,h){return this.a=Math.cos(s+h)*n,this.b=Math.sin(s+h)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(r*this.a+i*this.c),this.ty=e-(r*this.b+i*this.d),this},h.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var r=this.a,i=this.c;this.a=r*t.a+this.b*t.c,this.b=r*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},h.prototype.decompose=function(t){var e=this.a,r=this.b,i=this.c,n=this.d,o=-Math.atan2(-i,n),a=Math.atan2(r,e),h=Math.abs(o+a);return h<1e-5||Math.abs(s.PI_2-h)<1e-5?(t.rotation=a,e<0&&0<=n&&(t.rotation+=t.rotation<=0?Math.PI:-Math.PI),t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=a),t.scale.x=Math.sqrt(e*e+r*r),t.scale.y=Math.sqrt(i*i+n*n),t.position.x=this.tx,t.position.y=this.ty,t},h.prototype.invert=function(){var t=this.a,e=this.b,r=this.c,i=this.d,n=this.tx,o=t*i-e*r;return this.a=i/o,this.b=-e/o,this.c=-r/o,this.d=t/o,this.tx=(r*this.ty-i*n)/o,this.ty=-(t*this.ty-e*n)/o,this},h.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},h.prototype.clone=function(){var t=new h;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},h.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(h,null,[{key:"IDENTITY",get:function(){return new h}},{key:"TEMP_MATRIX",get:function(){return new h}}]),h);function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),this.a=t,this.b=e,this.c=r,this.d=i,this.tx=n,this.ty=o,this.array=null}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=r(0),o=(s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height)},s.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},s.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},s.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},s.prototype.fit=function(t){var e=Math.max(this.x,t.x),r=Math.min(this.x+this.width,t.x+t.width),i=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(r-e,0),this.y=i,this.height=Math.max(n-i,0)},s.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),r=Math.max(this.x+this.width,t.x+t.width),i=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=r-e,this.y=i,this.height=n-i},s.prototype.ceil=function(t,e){var r=0<arguments.length&&void 0!==t?t:1,i=1<arguments.length&&void 0!==e?e:.001,n=Math.ceil((this.x+this.width-i)*r)/r,o=Math.ceil((this.y+this.height-i)*r)/r;this.x=Math.floor((this.x+i)*r)/r,this.y=Math.floor((this.y+i)*r)/r,this.width=n-this.x,this.height=o-this.y},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(s,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new s(0,0,0,0)}}]),s);function s(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.x=Number(t),this.y=Number(e),this.width=Number(r),this.height=Number(i),this.type=n.SHAPES.RECT}e.default=o},function(t,e){var r=null,i={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};t.exports=function(t,e){if(!r){var n=Object.keys(i);r={};for(var o=0;o<n.length;++o){var s=n[o];r[t[s]]=i[s]}}return r[e]}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(4),n=(o.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},o.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},o.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?i.Rectangle.EMPTY:((t=t||new i.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},o.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},o.prototype.addQuad=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,r=s<r?s:r,i=i<o?o:i,n=n<s?s:n,e=(o=t[2])<e?o:e,r=(s=t[3])<r?s:r,i=i<o?o:i,n=n<s?s:n,e=(o=t[4])<e?o:e,r=(s=t[5])<r?s:r,i=i<o?o:i,n=n<s?s:n,e=(o=t[6])<e?o:e,r=(s=t[7])<r?s:r,i=i<o?o:i,n=n<s?s:n,this.minX=e,this.minY=r,this.maxX=i,this.maxY=n},o.prototype.addFrame=function(t,e,r,i,n){var o=t.worldTransform,s=o.a,a=o.b,h=o.c,u=o.d,l=o.tx,c=o.ty,d=this.minX,f=this.minY,p=this.maxX,y=this.maxY,g=s*e+h*r+l,v=a*e+u*r+c;d=g<d?g:d,f=v<f?v:f,p=p<g?g:p,y=y<v?v:y,d=(g=s*i+h*r+l)<d?g:d,f=(v=a*i+u*r+c)<f?v:f,p=p<g?g:p,y=y<v?v:y,d=(g=s*e+h*n+l)<d?g:d,f=(v=a*e+u*n+c)<f?v:f,p=p<g?g:p,y=y<v?v:y,d=(g=s*i+h*n+l)<d?g:d,f=(v=a*i+u*n+c)<f?v:f,p=p<g?g:p,y=y<v?v:y,this.minX=d,this.minY=f,this.maxX=p,this.maxY=y},o.prototype.addVertices=function(t,e,r,i){for(var n=t.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,y=r;y<i;y+=2){var g=e[y],v=e[y+1],m=o*g+a*v+u,_=h*v+s*g+l;c=m<c?m:c,d=_<d?_:d,f=f<m?m:f,p=p<_?_:p}this.minX=c,this.minY=d,this.maxX=f,this.maxY=p},o.prototype.addBounds=function(t){var e=this.minX,r=this.minY,i=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<r?t.minY:r,this.maxX=t.maxX>i?t.maxX:i,this.maxY=t.maxY>n?t.maxY:n},o.prototype.addBoundsMask=function(t,e){var r=t.minX>e.minX?t.minX:e.minX,i=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(r<=n&&i<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=h<n?n:h,this.maxY=u<o?o:u}},o.prototype.addBoundsArea=function(t,e){var r=t.minX>e.x?t.minX:e.x,i=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(r<=n&&i<=o){var s=this.minX,a=this.minY,h=this.maxX,u=this.maxY;this.minX=r<s?r:s,this.minY=i<a?i:a,this.maxX=h<n?n:h,this.maxY=u<o?o:u}},o);function o(){!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}e.default=n},function(t,e,r){var i,n,o,s,a,h,u,l,c,d,f,p,y,g,v,m,_;function x(t,e){return t.test(e)}function b(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),r=e.split("[FBAN");void 0!==r[1]&&(e=r[0]),void 0!==(r=e.split("Twitter"))[1]&&(e=r[0]);var i={apple:{phone:x(s,e)&&!x(f,e),ipod:x(a,e),tablet:!x(s,e)&&x(h,e)&&!x(f,e),device:(x(s,e)||x(a,e)||x(h,e))&&!x(f,e)},amazon:{phone:x(c,e),tablet:!x(c,e)&&x(d,e),device:x(c,e)||x(d,e)},android:{phone:!x(f,e)&&x(c,e)||!x(f,e)&&x(u,e),tablet:!x(f,e)&&!x(c,e)&&!x(u,e)&&(x(d,e)||x(l,e)),device:!x(f,e)&&(x(c,e)||x(d,e)||x(u,e)||x(l,e))},windows:{phone:x(f,e),tablet:x(p,e),device:x(f,e)||x(p,e)},other:{blackberry:x(y,e),blackberry10:x(g,e),opera:x(v,e),firefox:x(_,e),chrome:x(m,e),device:x(y,e)||x(g,e)||x(v,e)||x(_,e)||x(m,e)}};return i.any=i.apple.device||i.android.device||i.windows.device||i.other.device,i.phone=i.apple.phone||i.android.phone||i.windows.phone,i.tablet=i.apple.tablet||i.android.tablet||i.windows.tablet,i}s=/iPhone/i,a=/iPod/i,h=/iPad/i,u=/\bAndroid(?:.+)Mobile\b/i,l=/Android/i,c=/\bAndroid(?:.+)SD4930UR\b/i,d=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,f=/Windows Phone/i,p=/\bWindows(?:.+)ARM\b/i,y=/BlackBerry/i,g=/BB10/i,v=/Opera Mini/i,m=/\b(CriOS|Chrome)(?:.+)Mobile/i,_=/\Mobile(?:.+)Firefox\b/i,void 0!==t&&t.exports&&"undefined"==typeof window?t.exports=b:void 0!==t&&t.exports&&"undefined"!=typeof window?t.exports=b():(n=[],void 0===(o="function"==typeof(i=this.isMobile=b())?i.apply(e,n):i)||(t.exports=o))},function(t,e,r){"use strict";e.__esModule=!0;var i=r(4),n=(o.prototype.updateLocalTransform=function(){},o.prototype.updateTransform=function(t){var e=t.worldTransform,r=this.worldTransform,i=this.localTransform;r.a=i.a*e.a+i.b*e.c,r.b=i.a*e.b+i.b*e.d,r.c=i.c*e.a+i.d*e.c,r.d=i.c*e.b+i.d*e.d,r.tx=i.tx*e.a+i.ty*e.c+e.tx,r.ty=i.tx*e.b+i.ty*e.d+e.ty,this._worldID++},o);function o(){!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.worldTransform=new i.Matrix,this.localTransform=new i.Matrix,this._worldID=0,this._parentID=0}(e.default=n).prototype.updateWorldTransform=n.prototype.updateTransform,n.IDENTITY=new n},function(t,e,r){"use strict";function i(t,e,r){r=r||2;var i,a,h,u,l,f,y,g=e&&e.length,v=g?e[0]*r:t.length,m=n(t,0,v,r,!0),_=[];if(!m||m.next===m.prev)return _;if(g&&(m=function(t,e,r,i){var s,a,h,u=[];for(s=0,a=e.length;s<a;s++)(h=n(t,e[s]*i,s<a-1?e[s+1]*i:t.length,i,!1))===h.next&&(h.steiner=!0),u.push(p(h));for(u.sort(c),s=0;s<u.length;s++)d(u[s],r),r=o(r,r.next);return r}(t,e,m,r)),t.length>80*r){i=h=t[0],a=u=t[1];for(var x=r;x<v;x+=r)(l=t[x])<i&&(i=l),(f=t[x+1])<a&&(a=f),h<l&&(h=l),u<f&&(u=f);y=0!==(y=Math.max(h-i,u-a))?1/y:0}return s(m,_,r,i,a,y),_}function n(t,e,r,i,n){var o,s;if(n===0<E(t,e,r,i))for(o=e;o<r;o+=i)s=b(o,t[o],t[o+1],s);else for(o=r-i;e<=o;o-=i)s=b(o,t[o],t[o+1],s);return s&&v(s,s.next)&&(w(s),s=s.next),s}function o(t,e){if(!t)return t;e=e||t;var r,i=t;do{if(r=!1,i.steiner||!v(i,i.next)&&0!==g(i.prev,i,i.next))i=i.next;else{if(w(i),(i=e=i.prev)===i.next)break;r=!0}}while(r||i!==e);return e}function s(t,e,r,i,n,c,d){if(t){!d&&c&&function(t,e,r,i){for(var n=t;null===n.z&&(n.z=f(n.x,n.y,e,r,i)),n.prevZ=n.prev,n.nextZ=n.next,(n=n.next)!==t;);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,r,i,n,o,s,a,h,u=1;do{for(r=t,o=t=null,s=0;r;){for(s++,i=r,e=a=0;e<u&&(a++,i=i.nextZ);e++);for(h=u;0<a||0<h&&i;)0!==a&&(0===h||!i||r.z<=i.z)?(r=(n=r).nextZ,a--):(i=(n=i).nextZ,h--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;r=i}o.nextZ=null,u*=2}while(1<s)}(n)}(t,i,n,c);for(var p,y,g=t;t.prev!==t.next;)if(p=t.prev,y=t.next,c?h(t,i,n,c):a(t))e.push(p.i/r),e.push(t.i/r),e.push(y.i/r),w(t),t=y.next,g=y.next;else if((t=y)===g){d?1===d?s(t=u(t,e,r),e,r,i,n,c,2):2===d&&l(t,e,r,i,n,c):s(o(t),e,r,i,n,c,1);break}}}function a(t){var e=t.prev,r=t,i=t.next;if(0<=g(e,r,i))return!1;for(var n=t.next.next;n!==t.prev;){if(y(e.x,e.y,r.x,r.y,i.x,i.y,n.x,n.y)&&0<=g(n.prev,n,n.next))return!1;n=n.next}return!0}function h(t,e,r,i){var n=t.prev,o=t,s=t.next;if(0<=g(n,o,s))return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,h=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,u=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,l=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=f(a,h,e,r,i),d=f(u,l,e,r,i),p=t.prevZ,v=t.nextZ;p&&p.z>=c&&v&&v.z<=d;){if(p!==t.prev&&p!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=g(p.prev,p,p.next))return!1;if(p=p.prevZ,v!==t.prev&&v!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&0<=g(v.prev,v,v.next))return!1;v=v.nextZ}for(;p&&p.z>=c;){if(p!==t.prev&&p!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,p.x,p.y)&&0<=g(p.prev,p,p.next))return!1;p=p.prevZ}for(;v&&v.z<=d;){if(v!==t.prev&&v!==t.next&&y(n.x,n.y,o.x,o.y,s.x,s.y,v.x,v.y)&&0<=g(v.prev,v,v.next))return!1;v=v.nextZ}return!0}function u(t,e,r){var i=t;do{var n=i.prev,o=i.next.next;!v(n,o)&&m(n,i,i.next,o)&&_(n,o)&&_(o,n)&&(e.push(n.i/r),e.push(i.i/r),e.push(o.i/r),w(i),w(i.next),i=t=o),i=i.next}while(i!==t);return i}function l(t,e,r,i,n,a){var h,u,l=t;do{for(var c=l.next.next;c!==l.prev;){if(l.i!==c.i&&(u=c,(h=l).next.i!==u.i&&h.prev.i!==u.i&&!function(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&m(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}(h,u)&&_(h,u)&&_(u,h)&&function(t,e){for(var r=t,i=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;r.y>o!=r.next.y>o&&r.next.y!==r.y&&n<(r.next.x-r.x)*(o-r.y)/(r.next.y-r.y)+r.x&&(i=!i),(r=r.next)!==t;);return i}(h,u))){var d=x(l,c);return l=o(l,l.next),d=o(d,d.next),s(l,e,r,i,n,a),void s(d,e,r,i,n,a)}c=c.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function d(t,e){if(e=function(t,e){var r,i=e,n=t.x,o=t.y,s=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var a=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&s<a){if((s=a)===n){if(o===i.y)return i;if(o===i.next.y)return i.next}r=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!r)return null;if(n===s)return r.prev;var h,u=r,l=r.x,c=r.y,d=1/0;for(i=r.next;i!==u;)n>=i.x&&i.x>=l&&n!==i.x&&y(o<c?n:s,o,l,c,o<c?s:n,o,i.x,i.y)&&((h=Math.abs(o-i.y)/(n-i.x))<d||h===d&&i.x>r.x)&&_(i,t)&&(r=i,d=h),i=i.next;return r}(t,e)){var r=x(e,t);o(r,r.next)}}function f(t,e,r,i,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-r)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-i)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function p(t){for(var e=t,r=t;(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),(e=e.next)!==t;);return r}function y(t,e,r,i,n,o,s,a){return 0<=(n-s)*(e-a)-(t-s)*(o-a)&&0<=(t-s)*(i-a)-(r-s)*(e-a)&&0<=(r-s)*(o-a)-(n-s)*(i-a)}function g(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function m(t,e,r,i){return!!(v(t,e)&&v(r,i)||v(t,i)&&v(r,e))||0<g(t,e,r)!=0<g(t,e,i)&&0<g(r,i,t)!=0<g(r,i,e)}function _(t,e){return g(t.prev,t,t.next)<0?0<=g(t,e,t.next)&&0<=g(t,t.prev,e):g(t,e,t.prev)<0||g(t,t.next,e)<0}function x(t,e){var r=new T(t.i,t.x,t.y),i=new T(e.i,e.x,e.y),n=t.next,o=e.prev;return(t.next=e).prev=t,(r.next=n).prev=r,(i.next=r).prev=i,(o.next=i).prev=o,i}function b(t,e,r,i){var n=new T(t,e,r);return i?(n.next=i.next,(n.prev=i).next.prev=n,i.next=n):(n.prev=n).next=n,n}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function T(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,r,i){for(var n=0,o=e,s=r-i;o<r;o+=i)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}t.exports=i,(t.exports.default=i).deviation=function(t,e,r,i){var n=e&&e.length,o=n?e[0]*r:t.length,s=Math.abs(E(t,0,o,r));if(n)for(var a=0,h=e.length;a<h;a++){var u=e[a]*r,l=a<h-1?e[a+1]*r:t.length;s-=Math.abs(E(t,u,l,r))}var c=0;for(a=0;a<i.length;a+=3){var d=i[a]*r,f=i[a+1]*r,p=i[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[1+f]-t[1+d])-(t[d]-t[f])*(t[1+p]-t[1+d]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},i.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},i=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)r.vertices.push(t[n][o][s]);0<n&&(i+=t[n-1].length,r.holes.push(i))}return r}},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=r(4),o=r(2),s=r(0),a=u(r(8)),h=u(r(18));function u(t){return t&&t.__esModule?t:{default:t}}var l,c=new n.Point,d=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(f,l=h.default),f.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},f.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},f.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t,e=this._texture,r=this.transform.worldTransform,i=r.a,n=r.b,o=r.c,s=r.d,a=r.tx,h=r.ty,u=this.vertexData,l=e.trim,c=e.orig,d=this._anchor,f=0,p=0,y=0;t=l?(f=(p=l.x-d._x*c.width)+l.width,(y=l.y-d._y*c.height)+l.height):(f=(p=-d._x*c.width)+c.width,(y=-d._y*c.height)+c.height),u[0]=i*p+o*y+a,u[1]=s*y+n*p+h,u[2]=i*f+o*y+a,u[3]=s*y+n*f+h,u[4]=i*f+o*t+a,u[5]=s*t+n*f+h,u[6]=i*p+o*t+a,u[7]=s*t+n*p+h}},f.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,r=t.orig,i=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,h=n.d,u=n.tx,l=n.ty,c=-i._x*r.width,d=c+r.width,f=-i._y*r.height,p=f+r.height;e[0]=o*c+a*f+u,e[1]=h*f+s*c+l,e[2]=o*d+a*f+u,e[3]=h*f+s*d+l,e[4]=o*d+a*p+u,e[5]=h*p+s*d+l,e[6]=o*c+a*p+u,e[7]=h*p+s*c+l},f.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},f.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},f.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},f.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):l.prototype.getLocalBounds.call(this,t)},f.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,c);var e=this._texture.orig.width,r=this._texture.orig.height,i=-e*this.anchor.x,n=0;return c.x>=i&&c.x<i+e&&(n=-r*this.anchor.y,c.y>=n&&c.y<n+r)},f.prototype.destroy=function(t){if(l.prototype.destroy.call(this,t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof t?t:t&&t.texture){var e="boolean"==typeof t?t:t&&t.baseTexture;this._texture.destroy(!!e)}this._texture=null,this.shader=null},f.from=function(t){return new f(a.default.from(t))},f.fromFrame=function(t){var e=o.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new f(e)},f.fromImage=function(t,e,r){return new f(a.default.fromImage(t,e,r))},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(f,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||a.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),f);function f(t){!function(t,e){if(!(t instanceof f))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,l.call(this));return e._anchor=new n.ObservablePoint(e._onAnchorUpdate,e,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),e._texture=null,e._width=0,e._height=0,e._tint=null,e._tintRGB=null,e.tint=16777215,e.blendMode=s.BLEND_MODES.NORMAL,e.shader=null,e.cachedTint=16777215,e.texture=t||a.default.EMPTY,e.vertexData=new Float32Array(8),e.vertexTrimmedData=null,e._transformID=-1,e._textureID=-1,e._transformTrimmedID=-1,e._textureTrimmedID=-1,e.pluginName="sprite",e}e.default=d},function(t,e,r){"use strict";function i(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}e.INT_BITS=32,e.INT_MAX=2147483647,e.INT_MIN=-1<<31,e.sign=function(t){return(0<t)-(t<0)},e.abs=function(t){var e=t>>31;return(t^e)-e},e.min=function(t,e){return e^(t^e)&-(t<e)},e.max=function(t,e){return t^(t^e)&-(t<e)},e.isPow2=function(t){return!(t&t-1||!t)},e.log2=function(t){var e,r;return e=(65535<t)<<4,e|=r=(255<(t>>>=e))<<3,e|=r=(15<(t>>>=r))<<2,(e|=r=(3<(t>>>=r))<<1)|(t>>>=r)>>1},e.log10=function(t){return 1e9<=t?9:1e8<=t?8:1e7<=t?7:1e6<=t?6:1e5<=t?5:1e4<=t?4:1e3<=t?3:100<=t?2:10<=t?1:0},e.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},e.countTrailingZeros=i,e.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},e.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},e.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var r=e,i=e,n=7;for(r>>>=1;r;r>>>=1)i<<=1,i|=1&r,--n;t[e]=i<<n&255}}(n),e.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},e.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},e.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},e.interleave3=function(t,e,r){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(r=1227133513&((r=3272356035&((r=251719695&((r=4278190335&((r&=1023)|r<<16))|r<<8))|r<<4))|r<<2))<<2},e.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},e.nextCombination=function(t){var e=t|t-1;return 1+e|(~e&-~e)-1>>>i(t)+1}},function(t,e,r){"use strict";e.__esModule=!0,e.Ticker=e.shared=void 0;var i,n=(i=r(160))&&i.__esModule?i:{default:i},o=new n.default;o.autoStart=!0,o.destroy=function(){},e.shared=o,e.Ticker=n.default},function(t,e,r){"use strict";e.__esModule=!0;var i=o(r(73)),n=o(r(8));function o(t){return t&&t.__esModule?t:{default:t}}var s,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,s=n.default),h.prototype.resize=function(t,e,r){t=Math.ceil(t),e=Math.ceil(e),this.valid=0<t&&0<e,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,r||this.baseTexture.resize(t,e),this._updateUvs()},h.create=function(t,e,r,n){return new h(new i.default(t,e,r,n))},h);function h(t,e){!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var r=null;if(!(t instanceof i.default)){var n=arguments[1],o=arguments[2],a=arguments[3],u=arguments[4];console.warn("Please use RenderTexture.create("+n+", "+o+") instead of the ctor directly."),r=arguments[0],e=null,t=new i.default(n,o,a,u)}var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t,e));return l.legacyRenderer=r,l.valid=!0,l._updateUvs(),l}e.default=a},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){for(var e=6*t,r=new Uint16Array(e),i=0,n=0;i<e;i+=6,n+=4)r[i+0]=n+0,r[i+1]=n+1,r[i+2]=n+2,r[i+3]=n+0,r[i+4]=n+2,r[i+5]=n+3;return r}},function(t,e,r){"use strict";e.__esModule=!0,e.Resource=void 0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=s(r(98)),o=s(r(97));function s(t){return t&&t.__esModule?t:{default:t}}var a=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),h=null;function u(){}var l=e.Resource=(c.setExtensionLoadType=function(t,e){d(c._loadTypeMap,t,e)},c.setExtensionXhrType=function(t,e){d(c._xhrTypeMap,t,e)},c.prototype.complete=function(){this._clearEvents(),this._finish()},c.prototype.abort=function(t){if(!this.error){if(this.error=new Error(t),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=c.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},c.prototype.load=function(t){var e=this;if(!this.isLoading)if(this.isComplete)t&&setTimeout(function(){return t(e)},1);else switch(t&&this.onComplete.once(t),this._setFlag(c.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case c.LOAD_TYPE.IMAGE:this.type=c.TYPE.IMAGE,this._loadElement("image");break;case c.LOAD_TYPE.AUDIO:this.type=c.TYPE.AUDIO,this._loadSourceElement("audio");break;case c.LOAD_TYPE.VIDEO:this.type=c.TYPE.VIDEO,this._loadSourceElement("video");break;case c.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr()}},c.prototype._hasFlag=function(t){return 0!=(this._flags&t)},c.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},c.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},c.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(c.STATUS_FLAGS.COMPLETE,!0),this._setFlag(c.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},c.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},c.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,r=0;r<this.url.length;++r)this.data.appendChild(this._createSource(t,this.url[r],Array.isArray(e)?e[r]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},c.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url,!0),t.timeout=this.timeout,this.xhrType===c.XHR_RESPONSE_TYPE.JSON||this.xhrType===c.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=c.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("timeout",this._boundXhrOnTimeout,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},c.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},c.prototype._createSource=function(t,e,r){r=r||t+"/"+this._getExtension(e);var i=document.createElement("source");return i.src=e,i.type=r,i},c.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},c.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},c.prototype._onTimeout=function(){this.abort("Load timed out.")},c.prototype._xhrOnError=function(){var t=this.xhr;this.abort(f(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},c.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(f(t)+" Request timed out.")},c.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(f(t)+" Request was aborted by the user.")},c.prototype._xhrOnLoad=function(){var t=this.xhr,e="",r=void 0===t.status?200:t.status;if(""!==t.responseType&&"text"!==t.responseType&&void 0!==t.responseType||(e=t.responseText),0===r&&(0<e.length||t.responseType===c.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===c.XHR_RESPONSE_TYPE.TEXT)this.data=e,this.type=c.TYPE.TEXT;else if(this.xhrType===c.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(e),this.type=c.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===c.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var i=new DOMParser;this.data=i.parseFromString(e,"text/xml")}else{var n=document.createElement("div");n.innerHTML=e,this.data=n}this.type=c.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=t.response||e;this.complete()}else this.abort("["+t.status+"] "+t.statusText+": "+t.responseURL)},c.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,(h=h||document.createElement("a")).href=t;var r=!(t=(0,n.default)(h.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,i=t.protocol?t.protocol+":":"";return t.host===e.hostname&&r&&i===e.protocol?"":"anonymous"},c.prototype._determineXhrType=function(){return c._xhrTypeMap[this.extension]||c.XHR_RESPONSE_TYPE.TEXT},c.prototype._determineLoadType=function(){return c._loadTypeMap[this.extension]||c.LOAD_TYPE.XHR},c.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var r=t.indexOf("/");e=t.substring(r+1,t.indexOf(";",r))}else{var i=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(-1<i?i:t.length,-1<n?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},c.prototype._getMimeFromXhrType=function(t){switch(t){case c.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case c.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case c.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case c.XHR_RESPONSE_TYPE.JSON:return"application/json";case c.XHR_RESPONSE_TYPE.DEFAULT:case c.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(c,[{key:"isDataUrl",get:function(){return this._hasFlag(c.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(c.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(c.STATUS_FLAGS.LOADING)}}]),c);function c(t,e,r){if(function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),"string"!=typeof t||"string"!=typeof e)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(c.STATUS_FLAGS.DATA_URL,0===e.indexOf("data:")),this.name=t,this.url=e,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=c.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=u,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}function d(t,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=r)}function f(t){return t.toString().replace("object ","")}l.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},l.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},l.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},l.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},l._loadTypeMap={gif:l.LOAD_TYPE.IMAGE,png:l.LOAD_TYPE.IMAGE,bmp:l.LOAD_TYPE.IMAGE,jpg:l.LOAD_TYPE.IMAGE,jpeg:l.LOAD_TYPE.IMAGE,tif:l.LOAD_TYPE.IMAGE,tiff:l.LOAD_TYPE.IMAGE,webp:l.LOAD_TYPE.IMAGE,tga:l.LOAD_TYPE.IMAGE,svg:l.LOAD_TYPE.IMAGE,"svg+xml":l.LOAD_TYPE.IMAGE,mp3:l.LOAD_TYPE.AUDIO,ogg:l.LOAD_TYPE.AUDIO,wav:l.LOAD_TYPE.AUDIO,mp4:l.LOAD_TYPE.VIDEO,webm:l.LOAD_TYPE.VIDEO},l._xhrTypeMap={xhtml:l.XHR_RESPONSE_TYPE.DOCUMENT,html:l.XHR_RESPONSE_TYPE.DOCUMENT,htm:l.XHR_RESPONSE_TYPE.DOCUMENT,xml:l.XHR_RESPONSE_TYPE.DOCUMENT,tmx:l.XHR_RESPONSE_TYPE.DOCUMENT,svg:l.XHR_RESPONSE_TYPE.DOCUMENT,tsx:l.XHR_RESPONSE_TYPE.DOCUMENT,gif:l.XHR_RESPONSE_TYPE.BLOB,png:l.XHR_RESPONSE_TYPE.BLOB,bmp:l.XHR_RESPONSE_TYPE.BLOB,jpg:l.XHR_RESPONSE_TYPE.BLOB,jpeg:l.XHR_RESPONSE_TYPE.BLOB,tif:l.XHR_RESPONSE_TYPE.BLOB,tiff:l.XHR_RESPONSE_TYPE.BLOB,webp:l.XHR_RESPONSE_TYPE.BLOB,tga:l.XHR_RESPONSE_TYPE.BLOB,json:l.XHR_RESPONSE_TYPE.JSON,text:l.XHR_RESPONSE_TYPE.TEXT,txt:l.XHR_RESPONSE_TYPE.TEXT,ttf:l.XHR_RESPONSE_TYPE.BUFFER,otf:l.XHR_RESPONSE_TYPE.BUFFER},l.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",t.exports.default=l},function(t,e,r){"use strict";e.__esModule=!0;var i,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=(i=r(104))&&i.__esModule?i:{default:i},s=n.ticker.shared;n.settings.UPLOADS_PER_FRAME=4;var a=(h.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,s.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY))):e&&e()},h.prototype.tick=function(){setTimeout(this.delayedTick,0)},h.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var r=0,i=this.uploadHooks.length;r<i;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)s.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;for(var o=this.completes.slice(0),a=this.completes.length=0,h=o.length;a<h;a++)o[a]()}},h.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},h.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},h.prototype.add=function(t){for(var e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof n.Container)for(var i=t.children.length-1;0<=i;i--)this.add(t.children[i]);return this},h.prototype.destroy=function(){this.ticking&&s.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},h);function h(t){var e=this;!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),this.limiter=new o.default(n.settings.UPLOADS_PER_FRAME),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){e.queue&&e.prepareItems()},this.registerFindHook(p),this.registerFindHook(y),this.registerFindHook(u),this.registerFindHook(l),this.registerFindHook(c),this.registerUploadHook(d),this.registerUploadHook(f)}function u(t,e){var r=!1;if(t&&t._textures&&t._textures.length)for(var i=0;i<t._textures.length;i++)if(t._textures[i]instanceof n.Texture){var o=t._textures[i].baseTexture;-1===e.indexOf(o)&&(e.push(o),r=!0)}return r}function l(t,e){return t instanceof n.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function c(t,e){if(t._texture&&t._texture instanceof n.Texture){var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function d(t,e){return e instanceof n.Text&&(e.updateText(!0),!0)}function f(t,e){if(e instanceof n.TextStyle){var r=e.toFontString();return n.TextMetrics.measureFont(r),!0}return!1}function p(t,e){if(t instanceof n.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var r=t._texture.baseTexture;return-1===e.indexOf(r)&&e.push(r),!0}return!1}function y(t,e){return t instanceof n.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}e.default=a},function(t,e,r){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var n=i(r(5)),o=(s.prototype.addTooltip=function(t,e,r){var i=this;t.on("mouseover",function(t){i.tooltipOn(e,r),i.tooltipMove(t)}),t.on("mouseout",function(t){i.clearTooltip()})},s.prototype.setTooltipDisplay=function(t){s.commonStyles.display=t?"block":"none"},s.prototype.clearTooltip=function(){if(this.domRegex){var t=document.getElementById(this.domRegex),e=document.getElementById("tooltip");t&&e&&t.removeChild(e)}},s.prototype.tooltipOn=function(t,e){this.clearTooltip();var r=t;n.extend(s.commonStyles,e),this.createTooltip(r,s.commonStyles)},s.prototype.createTooltip=function(t,e){var r=document.getElementById("pop-menu");if((!r||"none"===r.style.display)&&this.domRegex){var i=document.getElementById(this.domRegex);if(i){var o=document.createElement("div");o.id="tooltip",n.each(e,function(t,e){o.style[e]=t}),o.innerHTML=t,i&&i.appendChild(o)}}},s.prototype.tooltipMove=function(t){if(this.domRegex){var e=document.getElementById("tooltip"),r=document.getElementById(this.domRegex);if(r&&e){var i=r.getBoundingClientRect().top,n=r.getBoundingClientRect().left,o=r.offsetHeight+i,s=r.offsetWidth+n,a=t.data.global.x+n,h=t.data.global.y+i,u=e.offsetHeight,l=e.offsetWidth;e.style.left=l<s-a?a+40+"px":a-l-40+"px",e.style.top=u+20<o-h?h-20+"px":h-u+20+"px"}}},s.commonStyles={display:"block",position:"fixed",backgroundColor:"black",color:"white",padding:"5px 20px",fontSize:"12px",userSelect:"none"},s);function s(t){this.domRegex=t}e.Tooltip=o},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},s=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var a,h=o(r(108)),u=s(r(5)),l=r(11),c=r(14),d=r(105),f=r(50),p=PIXI.Point,y=(n(g,a=l.CommonElement),g.prototype.draw=function(){this.clearOldGraphics();var t;t=0===this.defaultStyle.lineType?(this.createBackground(),this.drawLeftLine(),this.drawRightLine(),this.drawStartToEndArrow(),this.drawEndToStartArrow(),this.getLineCenterPoint()):(this.createBezierBackground(),this.drawBezierLeftLine(),this.drawBezierRightLine(),this.drawBezierStartToEndArrow(),this.drawBezierEndToStartArrow(),this.getBeizerCurveCenterPoint()),this.addLabel(),this.midLine?this.drawMidline(t):this.removeMidline()},g.prototype.createStartLine=function(t,e){var r=this.defaultStyle;if(1<t||t<=0)throw Error("Ratio must be greater than zero and less than 1");this.leftRatio=t,e&&(this.eachSideStyle.left=e),0===r.lineType?this.drawLeftLine():this.drawBezierLeftLine(),this.background.addChild(this.leftLine)},g.prototype.createEndLine=function(t,e){var r=this.defaultStyle;if(1<t||t<=0)throw Error("Ratio must be greater than zero and less than 1");this.rightRatio=t,e&&(this.eachSideStyle.right=e),0===r.lineType?this.drawRightLine():this.drawBezierRightLine(),this.background.addChild(this.rightLine)},g.prototype.getStartLine=function(){return this.leftLine},g.prototype.getEndLine=function(){return this.rightLine},g.prototype.getEndArrow=function(){return this.startArrow},g.prototype.getStartArrow=function(){return this.endArrow},g.prototype.setStartLine=function(t,e){this.leftRatio=t,e&&(this.eachSideStyle.left=e),this.draw()},g.prototype.setEndLine=function(t,e){e&&(this.eachSideStyle.right=e),this.rightRatio=t,this.draw()},g.prototype.setMidline=function(t){this.midLine=t,this.draw()},g.prototype.setLabel=function(t,e,r){this.labelId+=1;var i="label_"+this.labelId;this.labelIdList.push(i),this.labelObj[i]={},this.labelObj[i].style={},u.extend(this.labelObj[i].style,{fontSize:14,wordWrap:!0,wordWrapWidth:10}),r&&u.extend(this.labelObj[i].style,r);var n=new c.Label(t,this.labelObj[i].style);n.name=i,this.labelObj[i].label=n,this.labelObj[i].ratio=e,this.draw()},g.prototype.setTooltip=function(t,e){return this.removeListener("mouseover"),this.removeListener("mouseout"),this.tooltip.addTooltip(this,t,e),this.tooltip},g.prototype.createStartArrow=function(t){var e=this.defaultStyle;t&&(this.eachSideStyle.startArrow=t),this.isStartArrow=!0,0===e.lineType?this.drawStartToEndArrow():this.drawBezierStartToEndArrow(),this.background.addChild(this.startArrow)},g.prototype.createEndArrow=function(t){var e=this.defaultStyle;t&&(this.eachSideStyle.endArrow=t),this.isEndArrow=!0,0===e.lineType?this.drawEndToStartArrow():this.drawBezierEndToStartArrow(),this.background.addChild(this.endArrow)},g.prototype.setStartArrow=function(t){t&&(this.eachSideStyle.startArrow=t),this.background.getChildByName("start_end_arrow")&&(this.isStartArrow=!0,this.draw())},g.prototype.setEndArrow=function(t){t&&(this.eachSideStyle.endArrow=t),this.background.getChildByName("end_start_arrow")&&(this.isEndArrow=!0,this.draw())},g.prototype.visibleElement=function(t,e){t.visible=e,t.name&&-1!==t.name.indexOf("arrow")&&("start_end_arrow"===t.name?this.isStartArrow=e:"end_start_arrow"===t.name&&(this.isEndArrow=e),this.draw())},g.prototype.drawStartToEndArrow=function(){var t=this.eachSideStyle.startArrow,e=this.lineFunction.adustNodePos(this.defaultStyle),r=this.lineFunction.getAngle();this.startArrow.name="start_end_arrow",this.startArrow.lineStyle(1,t.color,t.opacity),this.defaultStyle.fillArrow&&this.startArrow.beginFill(t.color);var i=this.getArrowPints(e.srcNode,r,!0);return this.startArrow.drawPolygon(u.flatMap(u.map(u.values(i),function(t){return[t.x,t.y]}))),this.startArrow.endFill(),this.startArrow},g.prototype.drawBezierStartToEndArrow=function(){var t=this.eachSideStyle.startArrow,e=this.bezierPoints,r=this.bezierData,i=this.getArrowRatio(r.length());this.startArrow.lineStyle(1,t.color,t.opacity),this.defaultStyle.fillArrow&&this.startArrow.beginFill(t.color);var n=this.getTangentAngle(e[3],e[2],e[1],e[0],1),o=this.getArrowPints(r.get(i),n,!1);return this.startArrow.drawPolygon(u.flatMap(u.map(u.values(o),function(t){return[t.x,t.y]}))),this.startArrow.endFill(),this.startArrow.name="start_end_arrow",this.startArrow},g.prototype.getArrowRatio=function(t){var e=0;return 0<t&&t<=200?e=-.06:200<t&&t<=300?e=-.05:300<t&&t<=400?e=-.04:400<t&&t<=500?e=-.03:500<t&&t<=600?e=-.02:600<t&&t<=700?e=-.01:700<t&&(e=-.007),e},g.prototype.drawEndToStartArrow=function(){var t=this.eachSideStyle.endArrow,e=this.lineFunction.adustNodePos(this.defaultStyle),r=this.lineFunction.getAngle();this.endArrow.name="end_start_arrow",this.endArrow.lineStyle(1,t.color,t.opacity),this.defaultStyle.fillArrow&&this.endArrow.beginFill(t.color);var i=this.getArrowPints(e.endNode,r,!1);return this.endArrow.drawPolygon(u.flatMap(u.map(u.values(i),function(t){return[t.x,t.y]}))),this.endArrow.endFill(),this.endArrow},g.prototype.drawBezierEndToStartArrow=function(){var t=this.eachSideStyle.endArrow,e=this.bezierPoints,r=this.bezierData,i=this.getArrowRatio(r.length());this.defaultStyle.fillArrow&&this.endArrow.beginFill(t.color);var n=this.getTangentAngle(e[0],e[1],e[2],e[3],1),o=this.getArrowPints(r.get(1-i),n,!1);return this.endArrow.drawPolygon(u.flatMap(u.map(u.values(o),function(t){return[t.x,t.y]}))),this.endArrow.endFill(),this.endArrow.name="end_start_arrow",this.endArrow},g.prototype.getTangentAngle=function(t,e,r,i,n){var o=this.bezierTangent(t.x,e.x,r.x,i.x,n),s=this.bezierTangent(t.y,r.y,r.y,i.y,n);return Math.atan2(o,s)+Math.PI},g.prototype.bezierTangent=function(t,e,r,i,n){return 3*n*n*(3*e-t-3*r+i)+6*n*(t-2*e+r)+3*(-t+e)},g.prototype.clearOldGraphics=function(){this.background.clear(),this.leftLine.clear(),this.rightLine.clear(),this.startArrow.clear(),this.endArrow.clear()},g.prototype.getOneSideLinkPoints=function(t,e){var r=this.lineFunction.adustNodePos(this.defaultStyle),i=this.lineFunction.getCenterPoint(r.srcNode,r.endNode),n={x:0,y:0};return n.x=t.x+(i.x-t.x)*e,n.y=t.y+(i.y-t.y)*e,n},g.prototype.drawMidline=function(t){this.removeMidline();var e=this.defaultStyle.lineWidth,r=new PIXI.Graphics;r.name="midLine",r.lineStyle(0),r.beginFill(7649791,1),r.drawCircle(t.x,t.y,4*e),r.endFill(),this.background.addChild(r)},g.prototype.removeMidline=function(){var t=this.background.getChildByName("midLine");t&&this.background.removeChild(t)},g.prototype.createBackground=function(){var t,e,r=this.defaultStyle,i=this.background;t=this.isStartArrow?this.lineFunction.getDistance(this.start,r.lineDistance+10*r.lineWidth):this.lineFunction.getDistance(this.start,r.lineDistance),e=this.isEndArrow?this.lineFunction.getDistance(this.end,r.lineDistance+10*r.lineWidth):this.lineFunction.getDistance(this.end,r.lineDistance);var n,o=this.lineFunction.getNodePosition(this.end),s=this.lineFunction.getAdjustedLocation(o,1,e),a=this.lineFunction.getNodePosition(this.start),h=this.lineFunction.getAdjustedLocation(a,-1,t),u=this.calcEdgePoints(h,s);n=this.invariableStyles&&this.invariableStyles.lineColor&&15658734!==this.invariableStyles.lineColor?this.invariableStyles.lineColor:13421772,i.interactive=!0,i.buttonMode=!0,i.beginFill(n,r.fillOpacity),i.moveTo(u.sLeft.x,u.sLeft.y),i.lineTo(u.sRight.x,u.sRight.y),i.lineTo(u.eRight.x,u.eRight.y),i.lineTo(u.eLeft.x,u.eLeft.y),i.endFill(),this.addChild(i)},g.prototype.createBezierBackground=function(){var t,e,r,i=this.defaultStyle,n=this.background,o=i.bezierLineDistance,s=i.bezierLineDegree,a=(this.lineFunction.adustNodePos(i),[]);e=this.isStartArrow?this.lineFunction.getDistance(this.start,i.lineDistance+10*i.lineWidth):this.lineFunction.getDistance(this.start,i.lineDistance),r=this.isEndArrow?this.lineFunction.getDistance(this.end,i.lineDistance+10*i.lineWidth):this.lineFunction.getDistance(this.end,i.lineDistance);var h=this.lineFunction.getNodePosition(this.end),u=this.lineFunction.getAdjustedLocation(h,1,r),l=this.lineFunction.getNodePosition(this.start),c=this.lineFunction.getAdjustedLocation(l,-1,e),d=this.lineFunction.getControlPoint(c,u);t=this.invariableStyles&&this.invariableStyles.lineColor&&15658734!==this.invariableStyles.lineColor?this.invariableStyles.lineColor:13421772,n.lineStyle(8*i.lineWidth,t),a.push(c),a.push({x:d[0],y:d[1]}),a.push({x:d[2],y:d[3]}),a.push(u);var f=this.calcBezierCurvePoints(a,o,s);this.bezierPoints=f,this.bezierData=this.calcBezierArrowPoints(f);var p=[f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y];n.moveTo(f[0].x,f[0].y),n.bezierCurveTo(f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y),this.hitArea=new PIXI.Polygon(p),this.addChild(n)},g.prototype.calcBezierCurvePoints=function(t,e,r){var i=this.lineFunction.getAngle();return t[0].x=t[0].x+e*Math.cos(i),t[0].y=t[0].y-e*Math.sin(i),t[3].x=t[3].x+e*Math.cos(i),t[3].y=t[3].y-e*Math.sin(i),t[1].x=t[1].x+r*Math.cos(i),t[1].y=t[1].y-r*Math.sin(i),t[2].x=t[2].x+r*Math.cos(i),t[2].y=t[2].y-r*Math.sin(i),t},g.prototype.calcBezierArrowPoints=function(t){return new h.default(t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y)},g.prototype.getCurvePointsWithRatio=function(t,e,r){return(r?new h.default(t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y):new h.default(t[3].x,t[3].y,t[2].x,t[2].y,t[1].x,t[1].y,t[0].x,t[0].y)).split(0,e/2).points},g.prototype.calcEdgePoints=function(t,e){var r=this.defaultStyle.lineWidth,i=this.lineFunction.getAngle(),n=4*r,o=t.x,s=t.y,a=e.x,h=e.y,u={sLeft:{x:0,y:0},sRight:{x:0,y:0},eRight:{x:0,y:0},eLeft:{x:0,y:0}},l=new p(o-Math.cos(i)*n,s+Math.sin(i)*n),c=new p(o+Math.cos(i)*n,s-Math.sin(i)*n),d=new p(a+Math.cos(i)*n,h-Math.sin(i)*n),f=new p(a-Math.cos(i)*n,h+Math.sin(i)*n);return u.sLeft=l,u.sRight=c,u.eRight=d,u.eLeft=f,u},g.prototype.drawLeftLine=function(){var t,e=this.eachSideStyle.left,r=this.leftLine,i=this.defaultStyle;t=this.isStartArrow?this.lineFunction.getDistance(this.start,i.lineDistance+10*i.lineWidth):this.lineFunction.getDistance(this.start,i.lineDistance);var n=this.lineFunction.getNodePosition(this.start),o=this.lineFunction.getAdjustedLocation(n,-1,t),s=this.getOneSideLinkPoints(o,this.leftRatio),a=this.calcEdgePoints(o,s);r.name="left_line",r.beginFill(e.color,e.opacity),r.moveTo(a.sLeft.x,a.sLeft.y),r.lineTo(a.sRight.x,a.sRight.y),r.lineTo(a.eRight.x,a.eRight.y),r.lineTo(a.eLeft.x,a.eLeft.y),r.endFill()},g.prototype.drawBezierLeftLine=function(){var t=this.eachSideStyle.left,e=this.leftLine,r=this.defaultStyle,i=this.getCurvePointsWithRatio(this.bezierPoints,this.leftRatio,!0);e.name="left_line",e.lineStyle(8*r.lineWidth,t.color,t.opacity),e.moveTo(i[0].x,i[0].y),e.bezierCurveTo(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y)},g.prototype.drawRightLine=function(){var t,e=this.eachSideStyle.right,r=this.rightLine,i=this.defaultStyle;t=this.isEndArrow?this.lineFunction.getDistance(this.end,i.lineDistance+10*i.lineWidth):this.lineFunction.getDistance(this.end,i.lineDistance);var n=this.lineFunction.getNodePosition(this.end),o=this.lineFunction.getAdjustedLocation(n,1,t),s=this.getOneSideLinkPoints(o,this.rightRatio),a=this.calcEdgePoints(s,o);r.name="right_line",r.beginFill(e.color,e.opacity),r.moveTo(a.sLeft.x,a.sLeft.y),r.lineTo(a.sRight.x,a.sRight.y),r.lineTo(a.eRight.x,a.eRight.y),r.lineTo(a.eLeft.x,a.eLeft.y),r.endFill()},g.prototype.drawBezierRightLine=function(){var t=this.eachSideStyle.right,e=this.rightLine,r=this.defaultStyle;e.name="right_line";var i=this.getCurvePointsWithRatio(this.bezierPoints,this.rightRatio,!1);e.lineStyle(8*r.lineWidth,t.color,t.opacity),e.moveTo(i[0].x,i[0].y),e.bezierCurveTo(i[1].x,i[1].y,i[2].x,i[2].y,i[3].x,i[3].y)},g.prototype.addLabel=function(){var t=this;u.each(this.labelObj,function(e){0===t.defaultStyle.lineType?t.setLabelPosition(e.label,e.ratio):t.setBezierLabelPosition(e.label,e.ratio)})},g.prototype.setLabelPosition=function(t,e){var r=this.lineFunction.getDistance(this.start,this.defaultStyle.lineDistance),i=this.lineFunction.getNodePosition(this.start),n=this.lineFunction.getAdjustedLocation(i,-1,r),o=this.getOneSideLinkPoints(n,e),s=this.lineFunction.adustNodePos(this.defaultStyle);t.anchor.set(.5,.5);var a=this.deleteSpace(t.getText()).split(/\s+/).length,h=this.lineFunction.getAngle(),u=Number(t.style.fontSize)+8*(a-1);t.x=o.x-Math.cos(h)*u,t.y=o.y+Math.sin(h)*u,this.start.x>this.end.x?t.rotation=Math.atan2(s.srcNode.y-s.endNode.y,s.srcNode.x-s.endNode.x):t.rotation=Math.atan2(s.endNode.y-s.srcNode.y,s.endNode.x-s.srcNode.x),this.addChild(t)},g.prototype.setBezierLabelPosition=function(t,e){var r=this.bezierPoints,i=new h.default(r[0].x,r[0].y,r[1].x,r[1].y,r[2].x,r[2].y,r[3].x,r[3].y).get(e/2),n=this.lineFunction.adustNodePos(this.defaultStyle);t.anchor.set(.5,.5);var o=this.getTangentAngle(r[3],r[2],r[1],r[0],1),s=this.deleteSpace(t.getText()).split(/\s+/).length,a=Number(t.style.fontSize)+8*(s-1);0<this.defaultStyle.bezierLineDegree?(t.x=i.x-Math.cos(o)*a,t.y=i.y+Math.sin(o)*a):(t.x=i.x+Math.cos(o)*a,t.y=i.y-Math.sin(o)*a),this.start.x>this.end.x?t.rotation=Math.atan2(n.srcNode.y-n.endNode.y,n.srcNode.x-n.endNode.x):t.rotation=Math.atan2(n.endNode.y-n.srcNode.y,n.endNode.x-n.srcNode.x),this.addChild(t)},g.prototype.deleteSpace=function(t){return t.replace(/\s+$/,"").replace(/^\s+/,"")},g.prototype.getBeizerCurveCenterPoint=function(){var t=this.bezierPoints;return new h.default(t[0].x,t[0].y,t[1].x,t[1].y,t[2].x,t[2].y,t[3].x,t[3].y).get(.5)},g.prototype.getLineCenterPoint=function(){var t=this.lineFunction.adustNodePos(this.defaultStyle);return this.lineFunction.getCenterPoint(t.srcNode,t.endNode)},g.prototype.getArrowPints=function(t,e,r){var i=this.defaultStyle,n=i.arrowAngle,o=e+u.divide(n*Math.PI,180),s=e-u.divide(n*Math.PI,180),a=t.x,h=t.y,l=r?-1:1;return{p1:{x:a+0,y:h+0},p2:{x:a+15*i.lineWidth*Math.sin(o)*l,y:h+15*i.lineWidth*Math.cos(o)*l},p3:{x:a+15*i.lineWidth*Math.sin(s)*l,y:h+15*i.lineWidth*Math.cos(s)*l},p4:{x:a+0,y:h+0}}},g.prototype.analysisBrotherEdge=function(){var t=this,e=this.start.exceptEdgesArray,r=u.filter(e,function(e){return e.start===t.start&&e.end===t.end||e.start===t.end&&e.end===t.start});1<r.length&&this.setBundleEdgesPosition(r)},g.prototype.setBundleEdgesPosition=function(t){var e=this,r=[],i=u.every(t,function(t){return t.start===e.start});u.each(t,function(t,e){i?u.each([1,-1],function(t){r.push([(10+4*e)*t,(30+80*e)*t])}):r.push([10+4*e,30+80*e])}),u.each(t,function(t,e){t instanceof g&&t.setStyle({bezierLineDistance:r[e][0],bezierLineDegree:r[e][1],lineType:1})})},g);function g(t,e,r){var i=a.call(this)||this;return i.type="MultipleColorLine",i.labelObj={},i.midLine=!1,i.leftRatio=1,i.rightRatio=1,i.isStartArrow=!1,i.isEndArrow=!1,i.labelIdList=[],i.labelId=0,i.bezierPoints=[],i.start=t,i.end=e,i.background=new PIXI.Graphics,i.leftLine=new PIXI.Graphics,i.rightLine=new PIXI.Graphics,i.startArrow=new PIXI.Graphics,i.endArrow=new PIXI.Graphics,i.lineFunction=new d.LineCommonFunction(t,e),i.eachSideStyle={left:{color:15683664,opacity:1},startArrow:{color:15683664,opacity:1},right:{color:2146721,opacity:1},endArrow:{color:2146721,opacity:1}},i.interactive=!0,i.buttonMode=!0,i.tooltip=new f.Tooltip(r),t.exceptEdgesArray.push(i),e.exceptEdgesArray.push(i),i.analysisBrotherEdge(),i}e.MultipleColorLine=y},function(t,e,r){"use strict";t.exports=function(t,e){var r=0|t.length,i=0|e.length;if(1==r&&1==i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);return n?[n,r]:[r]}(t[0],e[0]);var n,o,s=new Array(r+i),a=0,h=0,u=0,l=Math.abs,c=t[h],d=l(c),f=e[u],p=l(f);d<p?(o=c,(h+=1)<r&&(d=l(c=t[h]))):(o=f,(u+=1)<i&&(p=l(f=e[u]))),h<r&&d<p||i<=u?(n=c,(h+=1)<r&&(d=l(c=t[h]))):(n=f,(u+=1)<i&&(p=l(f=e[u])));for(var y,g,v=n+o,m=v-n,_=o-m,x=_,b=v;h<r&&u<i;)d<p?(n=c,(h+=1)<r&&(d=l(c=t[h]))):(n=f,(u+=1)<i&&(p=l(f=e[u]))),(_=(o=x)-(m=(v=n+o)-n))&&(s[a++]=_),x=b-((y=b+v)-(g=y-b))+(v-g),b=y;for(;h<r;)(_=(o=x)-(m=(v=(n=c)+o)-n))&&(s[a++]=_),x=b-((y=b+v)-(g=y-b))+(v-g),b=y,(h+=1)<r&&(c=t[h]);for(;u<i;)(_=(o=x)-(m=(v=(n=f)+o)-n))&&(s[a++]=_),x=b-((y=b+v)-(g=y-b))+(v-g),b=y,(u+=1)<i&&(f=e[u]);return x&&(s[a++]=x),b&&(s[a++]=b),a||(s[a++]=0),s.length=a,s}},function(t,e,r){"use strict";var i=r(33),n=r(117);t.exports=function(t,e){var r=t.length;if(1===r){var o=i(t[0],e);return o[0]?o:[o[1]]}var s=new Array(2*r),a=[.1,.1],h=[.1,.1],u=0;i(t[0],e,a),a[0]&&(s[u++]=a[0]);for(var l=1;l<r;++l){i(t[l],e,h);var c=a[1];n(c,h[0],a),a[0]&&(s[u++]=a[0]);var d=h[1],f=a[1],p=d+f,y=f-(p-d);a[1]=p,y&&(s[u++]=y)}return a[1]&&(s[u++]=a[1]),0===u&&(s[u++]=0),s.length=u,s}},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=(o.prototype.clone=function(t,e){var r=1<arguments.length&&void 0!==e?e:null;return new o((0<arguments.length&&void 0!==t?t:null)||this.cb,r||this.scope,this._x,this._y)},o.prototype.set=function(t,e){var r=t||0,i=e||(0!==e?r:0);this._x===r&&this._y===i||(this._x=r,this._y=i,this.cb.call(this.scope))},o.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},o.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(o,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),o);function o(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this._x=r,this._y=i,this.cb=t,this.scope=e}e.default=n},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(36))&&i.__esModule?i:{default:i},o=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],s=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],l=[];function c(t){return t<0?-1:0<t?1:0}!function(){for(var t=0;t<16;t++){var e=[];l.push(e);for(var r=0;r<16;r++)for(var i=c(o[t]*o[r]+a[t]*s[r]),d=c(s[t]*o[r]+h[t]*s[r]),f=c(o[t]*a[r]+a[t]*h[r]),p=c(s[t]*a[r]+h[t]*h[r]),y=0;y<16;y++)if(o[y]===i&&s[y]===d&&a[y]===f&&h[y]===p){e.push(y);break}}for(var g=0;g<16;g++){var v=new n.default;v.set(o[g],s[g],a[g],h[g],0,0),u.push(v)}}();var d={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return o[t]},uY:function(t){return s[t]},vX:function(t){return a[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return l[t][e]},sub:function(t,e){return l[t][d.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?0<=e?d.S:d.N:2*Math.abs(e)<=Math.abs(t)?0<t?d.E:d.W:0<e?0<t?d.SE:d.SW:0<t?d.NE:d.NW},matrixAppendRotationInv:function(t,e,r,i){var n=2<arguments.length&&void 0!==r?r:0,o=3<arguments.length&&void 0!==i?i:0,s=u[d.inv(e)];s.tx=n,s.ty=o,t.append(s)}};e.default=d},function(t,e){t.exports=function(t,e,r){var i;if(r){var n=r.tempAttribState,o=r.attribState;for(i=0;i<n.length;i++)n[i]=!1;for(i=0;i<e.length;i++)n[e[i].attribute.location]=!0;for(i=0;i<o.length;i++)o[i]!==n[i]&&(o[i]=n[i],r.attribState[i]?t.enableVertexAttribArray(i):t.disableVertexAttribArray(i))}else for(i=0;i<e.length;i++){var s=e[i];t.enableVertexAttribArray(s.attribute.location)}}},function(t,e){function r(t,e,r,i,n){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=r||-1,this.format=i||t.RGBA,this.type=n||t.UNSIGNED_BYTE}var i=!(r.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var r=t.videoWidth||t.width,i=t.videoHeight||t.height;i!==this.height||r!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=r,this.height=i});r.prototype.uploadData=function(t,e,r){this.bind();var n=this.gl;if(t instanceof Float32Array){if(!i){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");i=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||r!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,r,0,this.format,this.type,t||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,r,this.format,this.type,t||null),this.width=e,this.height=r},r.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},r.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},r.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},r.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},r.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},r.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},r.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},r.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},r.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},r.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},r.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},r.fromSource=function(t,e,i){var n=new r(t);return n.premultiplyAlpha=i||!1,n.upload(e),n},r.fromData=function(t,e,i,n){var o=new r(t);return o.uploadData(e,i,n),o},t.exports=r},function(t,e){var r=function(t,e,r){var i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.log(t.getShaderInfoLog(i)),null)};t.exports=function(t,e,i,n){var o=r(t,t.VERTEX_SHADER,e),s=r(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),n)for(var h in n)t.bindAttribLocation(a,n[h],h);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",t.getProgramParameter(a,t.VALIDATE_STATUS)),console.error("gl.getError()",t.getError()),""!==t.getProgramInfoLog(a)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(a)),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a}},function(t,e,r){var i=r(38),n=r(60),o=function(t,e,r,i){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,r||0,i||0)};t.exports=function(t,e){for(var r={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var h=t.getActiveAttrib(e,a),u=i(t,h.type);r[h.name]={type:u,size:n(u),location:t.getAttribLocation(e,h.name),pointer:o}}return r}},function(t,e){var r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};t.exports=function(t){return r[t]}},function(t,e,r){var i=r(38),n=r(62);t.exports=function(t,e){for(var r={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),h=a.name.replace(/\[.*?\]/,""),u=i(t,a.type);r[h]={type:u,size:a.size,location:t.getUniformLocation(e,h),value:n(u,a.size)}}return r}},function(t,e){var r=function(t){for(var e=new Array(t),r=0;r<e.length;r++)e[r]=!1;return e};t.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},function(t,e){t.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},function(t,e){var r=function(t){return function(){return this.data[t].value}},i={float:function(t,e,r){t.uniform1f(e,r)},vec2:function(t,e,r){t.uniform2f(e,r[0],r[1])},vec3:function(t,e,r){t.uniform3f(e,r[0],r[1],r[2])},vec4:function(t,e,r){t.uniform4f(e,r[0],r[1],r[2],r[3])},int:function(t,e,r){t.uniform1i(e,r)},ivec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},ivec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},ivec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},bool:function(t,e,r){t.uniform1i(e,r)},bvec2:function(t,e,r){t.uniform2i(e,r[0],r[1])},bvec3:function(t,e,r){t.uniform3i(e,r[0],r[1],r[2])},bvec4:function(t,e,r){t.uniform4i(e,r[0],r[1],r[2],r[3])},mat2:function(t,e,r){t.uniformMatrix2fv(e,!1,r)},mat3:function(t,e,r){t.uniformMatrix3fv(e,!1,r)},mat4:function(t,e,r){t.uniformMatrix4fv(e,!1,r)},sampler2D:function(t,e,r){t.uniform1i(e,r)}},n={float:function(t,e,r){t.uniform1fv(e,r)},vec2:function(t,e,r){t.uniform2fv(e,r)},vec3:function(t,e,r){t.uniform3fv(e,r)},vec4:function(t,e,r){t.uniform4fv(e,r)},int:function(t,e,r){t.uniform1iv(e,r)},ivec2:function(t,e,r){t.uniform2iv(e,r)},ivec3:function(t,e,r){t.uniform3iv(e,r)},ivec4:function(t,e,r){t.uniform4iv(e,r)},bool:function(t,e,r){t.uniform1iv(e,r)},bvec2:function(t,e,r){t.uniform2iv(e,r)},bvec3:function(t,e,r){t.uniform3iv(e,r)},bvec4:function(t,e,r){t.uniform4iv(e,r)},sampler2D:function(t,e,r){t.uniform1iv(e,r)}};function o(t,e){return function(r){this.data[t].value=r;var o=this.data[t].location;1===e.size?i[e.type](this.gl,o,r):n[e.type](this.gl,o,r)}}function s(t,e){for(var r=e,i=0;i<t.length-1;i++){var n=r[t[i]]||{data:{}};r[t[i]]=n,r=n}return r}t.exports=function(t,e){var i={data:{}};i.gl=t;for(var n=Object.keys(e),a=0;a<n.length;a++){var h=n[a],u=h.split("."),l=u[u.length-1],c=s(u,i),d=e[h];c.data[l]=d,c.gl=t,Object.defineProperty(c,l,{get:r(l),set:o(l,d)})}return i}},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=c(r(12)),o=r(0),s=c(r(3)),a=c(r(66)),h=c(r(67)),u=c(r(39)),l=r(4);function c(t){return t&&t.__esModule?t:{default:t}}var d,f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,d=n.default),p.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},p.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},p.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new l.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},p.prototype.getLocalBounds=function(t){var e=this.transform,r=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new l.Rectangle),t=this._localBoundsRect);var i=this.getBounds(!1,t);return this.parent=r,this.transform=e,i},p.prototype.toGlobal=function(t,e,r){return 2<arguments.length&&void 0!==r&&r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},p.prototype.toLocal=function(t,e,r,i){return e&&(t=e.toGlobal(t,r,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,r)},p.prototype.renderWebGL=function(t){},p.prototype.renderCanvas=function(t){},p.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},p.prototype.setTransform=function(t,e,r,i,n,o,s,a,h){var u=0<arguments.length&&void 0!==t?t:0,l=1<arguments.length&&void 0!==e?e:0,c=2<arguments.length&&void 0!==r?r:1,d=3<arguments.length&&void 0!==i?i:1,f=4<arguments.length&&void 0!==n?n:0,p=5<arguments.length&&void 0!==o?o:0,y=6<arguments.length&&void 0!==s?s:0,g=7<arguments.length&&void 0!==a?a:0,v=8<arguments.length&&void 0!==h?h:0;return this.position.x=u,this.position.y=l,this.scale.x=c||1,this.scale.y=d||1,this.rotation=f,this.skew.x=p,this.skew.y=y,this.pivot.x=g,this.pivot.y=v,this},p.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(p,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new p),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),p);function p(){!function(t,e){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,d.call(this)),e=s.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?a.default:h.default;return t.tempDisplayObjectParent=null,t.transform=new e,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t.filterArea=null,t._filters=null,t._enabledFilters=null,t._bounds=new u.default,t._boundsID=0,t._lastBoundsID=-1,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t}(e.default=f).prototype.displayObjectUpdateTransform=f.prototype.updateTransform},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o,s=r(4),a=(n=r(41))&&n.__esModule?n:{default:n},h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o=a.default),u.prototype.onChange=function(){this._localID++},u.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},u.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},u.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}},u.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(u,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),u);function u(){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return t.position=new s.ObservablePoint(t.onChange,t,0,0),t.scale=new s.ObservablePoint(t.onChange,t,1,1),t.pivot=new s.ObservablePoint(t.onChange,t,0,0),t.skew=new s.ObservablePoint(t.updateSkew,t,0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t._localID=0,t._currentLocalID=0,t}e.default=h},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o,s=r(4),a=(n=r(41))&&n.__esModule?n:{default:n},h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,o=a.default),u.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},u.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},u.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var r=t.worldTransform,i=this.worldTransform;i.a=e.a*r.a+e.b*r.c,i.b=e.a*r.b+e.b*r.d,i.c=e.c*r.a+e.d*r.c,i.d=e.c*r.b+e.d*r.d,i.tx=e.tx*r.a+e.ty*r.c+r.tx,i.ty=e.tx*r.b+e.ty*r.d+r.ty,this._worldID++},u.prototype.setFromMatrix=function(t){t.decompose(this)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(u,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),u);function u(){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this));return t.position=new s.Point(0,0),t.scale=new s.Point(1,1),t.skew=new s.ObservablePoint(t.updateSkew,t,0,0),t.pivot=new s.Point(0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t}e.default=h},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,(o=o||document.createElement("a")).href=t;var r=!(t=n.default.parse(o.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&r&&t.protocol===e.protocol?"":"anonymous"};var i,n=(i=r(69))&&i.__esModule?i:{default:i},o=void 0},function(t,e,r){"use strict";var i=r(154),n=r(156);function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}e.parse=_,e.resolve=function(t,e){return _(t,!1,!0).resolve(e)},e.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},e.format=function(t){return n.isString(t)&&(t=_(t)),t instanceof o?t.format():o.prototype.format.call(t)},e.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,h=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),c=["%","/","?",";","#"].concat(l),d=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,p=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,y={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=r(157);function _(t,e,r){if(t&&n.isObject(t)&&t instanceof o)return t;var i=new o;return i.parse(t,e,r),i}o.prototype.parse=function(t,e,r){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",u=t.split(a);u[0]=u[0].replace(/\\/g,"/");var _=t=u.join(a);if(_=_.trim(),!r&&1===t.split("#").length){var x=h.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?m.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=s.exec(_);if(b){var w=(b=b[0]).toLowerCase();this.protocol=w,_=_.substr(b.length)}if(r||b||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var T="//"===_.substr(0,2);!T||b&&g[b]||(_=_.substr(2),this.slashes=!0)}if(!g[b]&&(T||b&&!v[b])){for(var E,S,M=-1,O=0;O<d.length;O++)-1!==(P=_.indexOf(d[O]))&&(-1===M||P<M)&&(M=P);for(-1!==(S=-1===M?_.lastIndexOf("@"):_.lastIndexOf("@",M))&&(E=_.slice(0,S),_=_.slice(S+1),this.auth=decodeURIComponent(E)),M=-1,O=0;O<c.length;O++){var P;-1!==(P=_.indexOf(c[O]))&&(-1===M||P<M)&&(M=P)}-1===M&&(M=_.length),this.host=_.slice(0,M),_=_.slice(M),this.parseHost(),this.hostname=this.hostname||"";var C="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!C)for(var A=this.hostname.split(/\./),I=(O=0,A.length);O<I;O++){var R=A[O];if(R&&!R.match(f)){for(var D="",N=0,L=R.length;N<L;N++)127<R.charCodeAt(N)?D+="x":D+=R[N];if(!D.match(f)){var k=A.slice(0,O),B=A.slice(O+1),F=R.match(p);F&&(k.push(F[1]),B.unshift(F[2])),B.length&&(_="/"+B.join(".")+_),this.hostname=k.join(".");break}}}255<this.hostname.length?this.hostname="":this.hostname=this.hostname.toLowerCase(),C||(this.hostname=i.toASCII(this.hostname));var j=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+j,this.href+=this.host,C&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!y[w])for(O=0,I=l.length;O<I;O++){var z=l[O];if(-1!==_.indexOf(z)){var G=encodeURIComponent(z);G===z&&(G=escape(z)),_=_.split(z).join(G)}}var X=_.indexOf("#");-1!==X&&(this.hash=_.substr(X),_=_.slice(0,X));var W=_.indexOf("?");if(-1!==W?(this.search=_.substr(W),this.query=_.substr(W+1),e&&(this.query=m.parse(this.query)),_=_.slice(0,W)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[w]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var H=this.search||"";this.path=j+H}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",i=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=m.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):o=o||"",i&&"#"!==i.charAt(0)&&(i="#"+i),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(r=r.replace(/[?#]/g,function(t){return encodeURIComponent(t)}))+(a=a.replace("#","%23"))+i},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var r=new o,i=Object.keys(this),s=0;s<i.length;s++){var a=i[s];r[a]=this[a]}if(r.hash=t.hash,""===t.href)return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var h=Object.keys(t),u=0;u<h.length;u++){var l=h[u];"protocol"!==l&&(r[l]=t[l])}return v[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),d=0;d<c.length;d++){var f=c[d];r[f]=t[f]}return r.href=r.format(),r}if(r.protocol=t.protocol,t.host||g[t.protocol])r.pathname=t.pathname;else{for(var p=(t.pathname||"").split("/");p.length&&!(t.host=p.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==p[0]&&p.unshift(""),p.length<2&&p.unshift(""),r.pathname=p.join("/")}if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var y=r.pathname||"",m=r.search||"";r.path=y+m}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var _=r.pathname&&"/"===r.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=x||_||r.host&&t.pathname,w=b,T=r.pathname&&r.pathname.split("/")||[],E=(p=t.pathname&&t.pathname.split("/")||[],r.protocol&&!v[r.protocol]);if(E&&(r.hostname="",r.port=null,r.host&&(""===T[0]?T[0]=r.host:T.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===p[0]?p[0]=t.host:p.unshift(t.host)),t.host=null),b=b&&(""===p[0]||""===T[0])),x)r.host=t.host||""===t.host?t.host:r.host,r.hostname=t.hostname||""===t.hostname?t.hostname:r.hostname,r.search=t.search,r.query=t.query,T=p;else if(p.length)(T=T||[]).pop(),T=T.concat(p),r.search=t.search,r.query=t.query;else if(!n.isNullOrUndefined(t.search))return E&&(r.hostname=r.host=T.shift(),(C=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=C.shift(),r.host=r.hostname=C.shift())),r.search=t.search,r.query=t.query,n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r;if(!T.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=T.slice(-1)[0],M=(r.host||t.host||1<T.length)&&("."===S||".."===S)||""===S,O=0,P=T.length;0<=P;P--)"."===(S=T[P])?T.splice(P,1):".."===S?(T.splice(P,1),O++):O&&(T.splice(P,1),O--);if(!b&&!w)for(;O--;)T.unshift("..");!b||""===T[0]||T[0]&&"/"===T[0].charAt(0)||T.unshift(""),M&&"/"!==T.join("/").substr(-1)&&T.push("");var C,A=""===T[0]||T[0]&&"/"===T[0].charAt(0);return E&&(r.hostname=r.host=A?"":T.length?T.shift():"",(C=!!(r.host&&0<r.host.indexOf("@"))&&r.host.split("@"))&&(r.auth=C.shift(),r.host=r.hostname=C.shift())),(b=b||r.host&&T.length)&&!A&&T.unshift(""),T.length?r.pathname=T.join("/"):(r.pathname=null,r.path=null),n.isNull(r.pathname)&&n.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=u(r(15)),o=r(2),s=r(45),a=r(0),h=u(r(68));function u(t){return t&&t.__esModule?t:{default:t}}var l,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,l=n.default),d.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},d.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},d.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},d.prototype._onPlayStop=function(){this._isAutoUpdating&&(s.shared.remove(this.update,this),this._isAutoUpdating=!1)},d.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},d.prototype.destroy=function(){this._isAutoUpdating&&s.shared.remove(this.update,this),this.source&&this.source._pixiId&&(n.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),l.prototype.destroy.call(this)},d.fromVideo=function(t,e,r){t._pixiId||(t._pixiId="video_"+(0,o.uid)());var i=o.BaseTextureCache[t._pixiId];return i||(i=new d(t,e,r),n.default.addToCache(i,t._pixiId)),i},d.fromUrl=function(t,e,r,i){var n=document.createElement("video");n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline","");var o=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==o.indexOf("data:")?n.crossOrigin=(0,h.default)(o):r&&(n.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var s=0;s<t.length;++s)n.appendChild(f(t[s].src||t[s],t[s].mime));else n.appendChild(f(o,t.mime));return n.load(),d.fromVideo(n,e,i)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(d,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(s.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),d);function d(t,e){var r=!(2<arguments.length&&void 0!==arguments[2])||arguments[2];if(function(t,e){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this),!t)throw new Error("No video source element specified.");(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,l.call(this,t,e));return i.width=t.videoWidth,i.height=t.videoHeight,i._autoUpdate=!0,i._isAutoUpdating=!1,i.autoPlay=r,i.update=i.update.bind(i),i._onCanPlay=i._onCanPlay.bind(i),t.addEventListener("play",i._onPlayStart.bind(i)),t.addEventListener("pause",i._onPlayStop.bind(i)),i.hasLoaded=!1,i.__loaded=!1,i._isSourceReady()?i._onCanPlay():(t.addEventListener("canplay",i._onCanPlay),t.addEventListener("canplaythrough",i._onCanPlay)),i}function f(t,e){if(!e){var r=t.split("?").shift().toLowerCase();e="video/"+r.substr(r.lastIndexOf(".")+1)}var i=document.createElement("source");return i.src=t,i.type=e,i}(e.default=c).fromUrls=c.fromUrl},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(55))&&i.__esModule?i:{default:i},o=(s.prototype.set=function(t,e,r){var i=e.width,o=e.height;if(r){var s=t.width/2/i,a=t.height/2/o,h=t.x/i+s,u=t.y/o+a;r=n.default.add(r,n.default.NW),this.x0=h+s*n.default.uX(r),this.y0=u+a*n.default.uY(r),r=n.default.add(r,2),this.x1=h+s*n.default.uX(r),this.y1=u+a*n.default.uY(r),r=n.default.add(r,2),this.x2=h+s*n.default.uX(r),this.y2=u+a*n.default.uY(r),r=n.default.add(r,2),this.x3=h+s*n.default.uX(r),this.y3=u+a*n.default.uY(r)}else this.x0=t.x/i,this.y0=t.y/o,this.x1=(t.x+t.width)/i,this.y1=t.y/o,this.x2=(t.x+t.width)/i,this.y2=(t.y+t.height)/o,this.x3=t.x/i,this.y3=(t.y+t.height)/o;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},s);function s(){!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=r(2),o=r(4),s=r(0),a=c(r(3)),h=c(r(18)),u=c(r(46)),l=c(r(12));function c(t){return t&&t.__esModule?t:{default:t}}var d,f=new o.Matrix,p=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(y,d=l.default),y.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},y.prototype.generateTexture=function(t,e,r,i){i=i||t.getLocalBounds();var n=u.default.create(0|i.width,0|i.height,e,r);return f.tx=-i.x,f.ty=-i.y,this.render(t,n,!1,f,!!t.parent),n},y.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(y,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,n.hex2string)(t),(0,n.hex2rgb)(t,this._backgroundColorRgba)}}]),y);function y(t,e,r,i){!function(t,e){if(!(t instanceof y))throw new TypeError("Cannot call a class as a function")}(this);var u=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,d.call(this));return(0,n.sayHello)(t),"number"==typeof e&&(e=Object.assign({width:e,height:r||a.default.RENDER_OPTIONS.height},i)),e=Object.assign({},a.default.RENDER_OPTIONS,e),u.options=e,u.type=s.RENDERER_TYPE.UNKNOWN,u.screen=new o.Rectangle(0,0,e.width,e.height),u.view=e.view||document.createElement("canvas"),u.resolution=e.resolution||a.default.RESOLUTION,u.transparent=e.transparent,u.autoResize=e.autoResize||!1,u.blendModes=null,u.preserveDrawingBuffer=e.preserveDrawingBuffer,u.clearBeforeRender=e.clearBeforeRender,u.roundPixels=e.roundPixels,u._backgroundColor=0,u._backgroundColorRgba=[0,0,0,0],u._backgroundColorString="#000000",u.backgroundColor=e.backgroundColor||u._backgroundColor,u._tempDisplayObjectParent=new h.default,u._lastObjectRendered=u._tempDisplayObjectParent,u}e.default=p},function(t,e,r){"use strict";e.__esModule=!0;var i=o(r(15)),n=o(r(3));function o(t){return t&&t.__esModule?t:{default:t}}var s,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,s=i.default),h.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=0<t&&0<e,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},h.prototype.destroy=function(){s.prototype.destroy.call(this,!0),this.renderer=null},h);function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=arguments[2],i=arguments[3];!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,null,r));return o.resolution=i||n.default.RESOLUTION,o.width=Math.ceil(t),o.height=Math.ceil(e),o.realWidth=o.width*o.resolution,o.realHeight=o.height*o.resolution,o.scaleMode=void 0!==r?r:n.default.SCALE_MODE,o.hasLoaded=!0,o._glRenderTargets={},o._canvasRenderTarget=null,o.valid=!1,o}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o=(n=r(3))&&n.__esModule?n:{default:n},s=(a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},a.prototype.destroy=function(){this.context=null,this.canvas=null},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(a,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),a);function a(t,e,r){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||o.default.RESOLUTION,this.resize(t,e)}e.default=s},function(t,e,r){"use strict";function i(t){var e=document.createElement("canvas");e.width=6,e.height=1;var r=e.getContext("2d");return r.fillStyle=t,r.fillRect(0,0,6,1),e}e.__esModule=!0,e.default=function(){if("undefined"==typeof document)return!1;var t=i("#ff00ff"),e=i("#ffff00"),r=document.createElement("canvas");r.width=6,r.height=1;var n=r.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0);var o=n.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},function(t,e,r){"use strict";e.__esModule=!0;var i=s(r(77)),n=r(4),o=(r(7),s(r(78)));function s(t){return t&&t.__esModule?t:{default:t}}var a,h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,a=i.default),u.prototype.apply=function(t,e,r,i){var n=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new o.default(s,0)),s.transform.update(),this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,r,i))},u);function u(t){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var e=new n.Matrix,r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,r.maskSprite=t,r.maskMatrix=e,r}e.default=h},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=h(r(167)),o=r(2),s=r(0),a=h(r(3));function h(t){return t&&t.__esModule?t:{default:t}}var u={},l=(c.prototype.apply=function(t,e,r,i,n){t.applyFilter(this,e,r,i)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(c,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),c);function c(t,e,r){for(var i in function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),this.vertexSrc=t||c.defaultVertexSrc,this.fragmentSrc=e||c.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,n.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[i]=this.uniformData[i].value,this.uniformData[i].type&&(this.uniformData[i].type=this.uniformData[i].type.toLowerCase());this.glShaders={},u[this.vertexSrc+this.fragmentSrc]||(u[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=u[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=a.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}e.default=l},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o=(n=r(36))&&n.__esModule?n:{default:n},s=new o.default,a=(h.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var r=this.mapCoord,i=0;i<t.length;i+=2){var n=t[i],o=t[i+1];e[i]=n*r.a+o*r.c+r.tx,e[i+1]=n*r.b+o*r.d+r.ty}return e},h.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var r=e._uvs;this.mapCoord.set(r.x1-r.x0,r.y1-r.y0,r.x3-r.x0,r.y3-r.y0,r.x0,r.y0);var i=e.orig,n=e.trim;n&&(s.set(i.width/n.width,0,0,i.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(s));var o=e.baseTexture,a=this.uClampFrame,h=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(e._frame.x+h+u)/o.width,a[1]=(e._frame.y+h+u)/o.height,a[2]=(e._frame.x+e._frame.width-h+u)/o.width,a[3]=(e._frame.y+e._frame.height-h+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,!0},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(h,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),h);function h(t,e){!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),this._texture=t,this.mapCoord=new o.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===e?.5:e}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var i=o(r(6)),n=o(r(47));function o(t){return t&&t.__esModule?t:{default:t}}var s=(a.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},a.prototype.map=function(t,e){var r=0,i=0;return this.uvs[0]=r,this.uvs[1]=i,this.uvs[2]=r+e.width/t.width,this.uvs[3]=i,this.uvs[4]=r+e.width/t.width,this.uvs[5]=i+e.height/t.height,this.uvs[6]=r,this.uvs[7]=i+e.height/t.height,r=e.x,i=e.y,this.vertices[0]=r,this.vertices[1]=i,this.vertices[2]=r+e.width,this.vertices[3]=i,this.vertices[4]=r+e.width,this.vertices[5]=i+e.height,this.vertices[6]=r,this.vertices[7]=i+e.height,this},a.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},a);function a(t,e){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var r=0;r<4;r++)this.interleaved[4*r]=this.vertices[2*r],this.interleaved[4*r+1]=this.vertices[2*r+1],this.interleaved[4*r+2]=this.uvs[2*r],this.interleaved[4*r+3]=this.uvs[2*r+1];this.indices=(0,n.default)(1),this.vertexBuffer=i.default.GLBuffer.createVertexBuffer(t,this.interleaved,t.STATIC_DRAW),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(t,e)}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=r(0),o=r(2),s={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:n.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},a=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],h=(u.prototype.clone=function(){var t={};return d(t,this,s),new u(t)},u.prototype.reset=function(){d(this,s,s)},u.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var r=e.length-1;0<=r;r--){var i=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&a.indexOf(i)<0&&(i='"'+i+'"'),e[r]=i}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(u,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=c(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=c(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){!function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}(this._fillGradientStops,t)&&(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=c(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),u);function u(t){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.styleID=0,this.reset(),d(this,t,t)}function l(t){return"number"==typeof t?(0,o.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function c(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=l(t[e]);return t}return l(t)}function d(t,e,r){for(var i in r)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}e.default=h},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.measureText=function(t,e,r,i){var o=3<arguments.length&&void 0!==i?i:n._canvas;r=null==r?e.wordWrap:r;var s=e.toFontString(),a=n.measureFont(s),h=o.getContext("2d");h.font=s;for(var u=(r?n.wordWrap(t,e,o):t).split(/(?:\r\n|\r|\n)/),l=new Array(u.length),c=0,d=0;d<u.length;d++){var f=h.measureText(u[d]).width+(u[d].length-1)*e.letterSpacing;l[d]=f,c=Math.max(c,f)}var p=c+e.strokeThickness;e.dropShadow&&(p+=e.dropShadowDistance);var y=e.lineHeight||a.fontSize+e.strokeThickness,g=Math.max(y,a.fontSize+e.strokeThickness)+(u.length-1)*(y+e.leading);return e.dropShadow&&(g+=e.dropShadowDistance),new n(t,e,p,g,u,l,y+e.leading,c,a)},n.wordWrap=function(t,e,r){for(var i=(2<arguments.length&&void 0!==r?r:n._canvas).getContext("2d"),o=0,s="",a="",h={},u=e.letterSpacing,l=e.whiteSpace,c=n.collapseSpaces(l),d=n.collapseNewlines(l),f=!c,p=e.wordWrapWidth+u,y=n.tokenize(t),g=0;g<y.length;g++){var v=y[g];if(n.isNewline(v)){if(!d){a+=n.addLine(s),f=!c,s="",o=0;continue}v=" "}if(c){var m=n.isBreakingSpace(v),_=n.isBreakingSpace(s[s.length-1]);if(m&&_)continue}var x=n.getFromCache(v,u,h,i);if(p<x)if(""!==s&&(a+=n.addLine(s),s="",o=0),n.canBreakWords(v,e.breakWords))for(var b=v.split(""),w=0;w<b.length;w++){for(var T=b[w],E=1;b[w+E];){var S=b[w+E],M=T[T.length-1];if(n.canBreakChars(M,S,v,w,e.breakWords))break;T+=S,E++}w+=T.length-1;var O=n.getFromCache(T,u,h,i);p<O+o&&(a+=n.addLine(s),f=!1,s="",o=0),s+=T,o+=O}else{0<s.length&&(a+=n.addLine(s),s="",o=0);var P=g===y.length-1;a+=n.addLine(v,!P),f=!1,s="",o=0}else p<x+o&&(f=!1,a+=n.addLine(s),s="",o=0),(0<s.length||!n.isBreakingSpace(v)||f)&&(s+=v,o+=x)}return a+n.addLine(s,!1)},n.addLine=function(t,e){var r=!(1<arguments.length&&void 0!==e)||e;return t=n.trimRight(t),r?t+"\n":t},n.getFromCache=function(t,e,r,i){var n=r[t];if(void 0===n){var o=t.length*e;n=i.measureText(t).width+o,r[t]=n}return n},n.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},n.collapseNewlines=function(t){return"normal"===t},n.trimRight=function(t){if("string"!=typeof t)return"";for(var e=t.length-1;0<=e;e--){var r=t[e];if(!n.isBreakingSpace(r))break;t=t.slice(0,-1)}return t},n.isNewline=function(t){return"string"==typeof t&&0<=n._newlines.indexOf(t.charCodeAt(0))},n.isBreakingSpace=function(t){return"string"==typeof t&&0<=n._breakingSpaces.indexOf(t.charCodeAt(0))},n.tokenize=function(t){var e=[],r="";if("string"!=typeof t)return e;for(var i=0;i<t.length;i++){var o=t[i];n.isBreakingSpace(o)||n.isNewline(o)?(""!==r&&(e.push(r),r=""),e.push(o)):r+=o}return""!==r&&e.push(r),e},n.canBreakWords=function(t,e){return e},n.canBreakChars=function(t,e,r,i,n){return!0},n.measureFont=function(t){if(n._fonts[t])return n._fonts[t];var e={},r=n._canvas,i=n._context;i.font=t;var o=n.METRICS_STRING+n.BASELINE_SYMBOL,s=Math.ceil(i.measureText(o).width),a=Math.ceil(i.measureText(n.BASELINE_SYMBOL).width),h=2*a;a=a*n.BASELINE_MULTIPLIER|0,r.width=s,r.height=h,i.fillStyle="#f00",i.fillRect(0,0,s,h),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(o,0,a);var u=i.getImageData(0,0,s,h).data,l=u.length,c=4*s,d=0,f=0,p=!1;for(d=0;d<a;++d){for(var y=0;y<c;y+=4)if(255!==u[f+y]){p=!0;break}if(p)break;f+=c}for(e.ascent=a-d,f=l-c,p=!1,d=h;a<d;--d){for(var g=0;g<c;g+=4)if(255!==u[f+g]){p=!0;break}if(p)break;f-=c}return e.descent=d-a,e.fontSize=e.ascent+e.descent,n._fonts[t]=e},n.clearMetrics=function(t){var e=0<arguments.length&&void 0!==t?t:"";e?delete n._fonts[e]:n._fonts={}},n);function n(t,e,r,i,o,s,a,h,u){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.text=t,this.style=e,this.width=r,this.height=i,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=h,this.fontProperties=u}e.default=i;var o=document.createElement("canvas");o.width=o.height=10,i._canvas=o,i._context=o.getContext("2d"),i._fonts={},i.METRICS_STRING="|Éq",i.BASELINE_SYMBOL="M",i.BASELINE_MULTIPLIER=1.4,i._newlines=[10,13],i._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.clone=function(){return new n(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},n.prototype.addHole=function(t){this.holes.push(t)},n.prototype.destroy=function(){this.shape=null,this.holes=null},n);function n(t,e,r,i,o,s,a,h,u){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.lineWidth=t,this.lineAlignment=u,this.nativeLines=a,this.lineColor=e,this.lineAlpha=r,this._lineTint=e,this.fillColor=i,this.fillAlpha=o,this._fillTint=i,this.fill=s,this.holes=[],this.shape=h,this.type=h.type}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=r(84),o=u(r(18)),s=r(45),a=u(r(3)),h=r(0);function u(t){return t&&t.__esModule?t:{default:t}}var l=(c.prototype.render=function(){this.renderer.render(this.stage)},c.prototype.stop=function(){this._ticker.stop()},c.prototype.start=function(){this._ticker.start()},c.prototype.destroy=function(t,e){if(this._ticker){var r=this._ticker;this.ticker=null,r.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(c,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),(this._ticker=t)&&t.add(this.render,this,h.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),c);function c(t,e,r,i,h){!function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),"number"==typeof t&&(t=Object.assign({width:t,height:e||a.default.RENDER_OPTIONS.height,forceCanvas:!!i,sharedTicker:!!h},r)),this._options=t=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},t),this.renderer=(0,n.autoDetectRenderer)(t),this.stage=new o.default,this._ticker=null,this.ticker=t.sharedTicker?s.shared:new s.Ticker,t.autoStart&&this.start()}e.default=l},function(t,e,r){"use strict";e.__esModule=!0,e.autoDetectRenderer=function(t,e,r,s){var a=t&&t.forceCanvas;return void 0!==s&&(a=s),a||!i.isWebGLSupported()?new n.default(t,e,r):new o.default(t,e,r)};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(2)),n=s(r(19)),o=s(r(28));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){"use strict";e.__esModule=!0,e.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},function(t,e,r){"use strict";e.__esModule=!0,e.BitmapText=e.TilingSpriteRenderer=e.TilingSprite=e.AnimatedSprite=void 0;var i=r(200);Object.defineProperty(e,"AnimatedSprite",{enumerable:!0,get:function(){return a(i).default}});var n=r(201);Object.defineProperty(e,"TilingSprite",{enumerable:!0,get:function(){return a(n).default}});var o=r(202);Object.defineProperty(e,"TilingSpriteRenderer",{enumerable:!0,get:function(){return a(o).default}});var s=r(203);function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"BitmapText",{enumerable:!0,get:function(){return a(s).default}}),r(204),r(205),r(206)},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=h(r(88)),s=h(r(89)),a=h(r(90));function h(t){return t&&t.__esModule?t:{default:t}}var u,l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,u=n.Filter),c.prototype.apply=function(t,e,r,i){if(this.firstRun){var n=t.renderer.gl,h=(0,a.default)(n);this.vertexSrc=(0,o.default)(h,!0),this.fragmentSrc=(0,s.default)(h),this.firstRun=!1}if(this.uniforms.strength=1/r.size.width*(r.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{for(var u=t.getRenderTarget(!0),l=e,c=u,d=0;d<this.passes-1;d++){t.applyFilter(this,l,c,!0);var f=c;c=l,l=f}t.applyFilter(this,l,r,i),t.returnRenderTarget(u)}},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(c,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),c);function c(t,e,r,i){!function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),i=i||5;var a=(0,o.default)(i,!0),h=(0,s.default)(i),l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this,a,h));return l.resolution=r||n.settings.RESOLUTION,l._quality=0,l.quality=e||4,l.strength=t||8,l.firstRun=!0,l}e.default=l},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){var r=Math.ceil(t/2),n=i,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var h=s.replace("%index%",a);o+=h=h.replace("%sampleIndex%",a-(r-1)+".0"),o+="\n"}return(n=n.replace("%blur%",o)).replace("%size%",t)};var i=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){for(var e=i[t],r=e.length,o=n,s="",a=void 0,h=0;h<t;h++){var u="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",h);r<=(a=h)&&(a=t-h-1),s+=u=u.replace("%value%",e[a]),s+="\n"}return(o=o.replace("%blur%",s)).replace("%size%",t)};var i={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},n=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),r=15;e<r;)r-=2;return r}},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=h(r(88)),s=h(r(89)),a=h(r(90));function h(t){return t&&t.__esModule?t:{default:t}}var u,l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,u=n.Filter),c.prototype.apply=function(t,e,r,i){if(this.firstRun){var n=t.renderer.gl,h=(0,a.default)(n);this.vertexSrc=(0,o.default)(h,!1),this.fragmentSrc=(0,s.default)(h),this.firstRun=!1}if(this.uniforms.strength=1/r.size.height*(r.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,r,i);else{for(var u=t.getRenderTarget(!0),l=e,c=u,d=0;d<this.passes-1;d++){t.applyFilter(this,l,c,!0);var f=c;c=l,l=f}t.applyFilter(this,l,r,i),t.returnRenderTarget(u)}},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(c,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),c);function c(t,e,r,i){!function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this),i=i||5;var a=(0,o.default)(i,!1),h=(0,s.default)(i),l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this,a,h));return l.resolution=r||n.settings.RESOLUTION,l._quality=0,l.quality=e||4,l.strength=t||8,l.firstRun=!0,l}e.default=l},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=(s.prototype.getLocalPosition=function(t,e,r){return t.worldTransform.applyInverse(r||this.global,e)},s.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},s.prototype.reset=function(){this.isPrimary=!1},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(s,[{key:"pointerId",get:function(){return this.identifier}}]),s);function s(){!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.global=new n.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.stopPropagation=function(){this.stopped=!0},n.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},n);function n(){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=(o.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(o,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),o);function o(t){!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this._pointerId=t,this._flags=o.FLAGS.NONE}(e.default=n).FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},function(t,e,r){"use strict";e.__esModule=!0,e.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},function(t,e,r){"use strict";e.__esModule=!0,e.parse=s,e.default=function(){return function(t,e){if(t.data&&t.type===n.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var r=t.isDataUrl?"":i.dirname(t.url);t.isDataUrl&&("."===r&&(r=""),this.baseUrl&&r&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(r+="/")),(r=r.replace(this.baseUrl,""))&&"/"!==r.charAt(r.length-1)&&(r+="/");for(var o=t.data.getElementsByTagName("page"),a={},h=function(r){a[r.metadata.pageFile]=r.texture,Object.keys(a).length===o.length&&(s(t,a),e())},u=0;u<o.length;++u){var l=o[u].getAttribute("file"),c=r+l,d=!1;for(var f in this.resources){var p=this.resources[f];if(p.url===c){p.metadata.pageFile=l,p.texture?h(p):p.onAfterMiddleware.add(h),d=!0;break}}if(!d){var y={crossOrigin:t.crossOrigin,loadType:n.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:l},t.metadata.imageMetadata),parentResource:t};this.add(c,y,h)}}}else e();else e()}};var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(7)),n=r(22),o=r(86);function s(t,e){t.bitmapFont=o.BitmapText.registerFont(t.data,e)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t};function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=(i(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a);function a(t,e,r){void 0===e&&(e=!1),o(this,a),this._fn=t,this._once=e,this._thisArg=r,this._next=this._prev=this._owner=null}function h(t,e){return t._head?(t._tail._next=e)._prev=t._tail:t._head=e,(t._tail=e)._owner=t,e}var u=(i(l,[{key:"handlers",value:function(t){var e=!(arguments.length<=0||void 0===t)&&t,r=this._head;if(e)return!!r;for(var i=[];r;)i.push(r),r=r._next;return i}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t,e){var r=arguments.length<=1||void 0===e?null:e;if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return h(this,new s(t,!1,r))}},{key:"once",value:function(t,e){var r=arguments.length<=1||void 0===e?null:e;if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return h(this,new s(t,!0,r))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),l);function l(){o(this,l),this._head=this._tail=void 0}u.MiniSignalBinding=s,e.default=u,t.exports=e.default},function(t,e,r){"use strict";t.exports=function(t,e){e=e||{};for(var r={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},i=r.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[r.key[o]]=i[o]||"";return n[r.q.name]={},n[r.key[12]].replace(r.q.parser,function(t,e,i){e&&(n[r.q.name][e]=i)}),n}},function(t,e,r){"use strict";function i(){}function n(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}e.__esModule=!0,e.eachSeries=function(t,e,r,i){var n=0,o=t.length;!function s(a){a||n===o?r&&r(a):i?setTimeout(function(){e(t[n++],s)},1):e(t[n++],s)}()},e.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var r=0,o={_tasks:[],concurrency:e,saturated:i,unsaturated:i,buffer:e/4,empty:i,drain:i,error:i,started:!1,paused:!1,push:function(t,e){s(t,!1,e)},kill:function(){r=0,o.drain=i,o.started=!1,o._tasks=[]},unshift:function(t,e){s(t,!0,e)},process:function(){for(;!o.paused&&r<o.concurrency&&o._tasks.length;){var e=o._tasks.shift();0===o._tasks.length&&o.empty(),(r+=1)===o.concurrency&&o.saturated(),t(e.data,n(a(e)))}},length:function(){return o._tasks.length},running:function(){return r},idle:function(){return o._tasks.length+r===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};function s(t,e,r){if(null!=r&&"function"!=typeof r)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout(function(){return o.drain()},1);else{var n={data:t,callback:"function"==typeof r?r:i};e?o._tasks.unshift(n):o._tasks.push(n),setTimeout(function(){return o.process()},1)}}function a(t){return function(e){r-=1,t.callback.apply(t,arguments),null!=e&&o.error(e,t.data),r<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},function(t,e,r){"use strict";e.__esModule=!0,e.encodeBinary=n;var i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function n(t){for(var e="",r=0;r<t.length;){for(var n=[0,0,0],o=[0,0,0,0],s=0;s<n.length;++s)r<t.length?n[s]=255&t.charCodeAt(r++):n[s]=0;switch(o[0]=n[0]>>2,o[1]=(3&n[0])<<4|n[1]>>4,o[2]=(15&n[1])<<2|n[2]>>6,o[3]=63&n[2],r-(t.length-1)){case 2:o[3]=64,o[2]=64;break;case 1:o[3]=64}for(var a=0;a<o.length;++a)e+=i.charAt(o[a])}return e}t.exports.default=n},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){var r=t.name+"_image";if(t.data&&t.type===n.Resource.TYPE.JSON&&t.data.frames&&!this.resources[r]){var i={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=a(t,this.baseUrl);this.add(r,o,i,function(r){if(r.error)e(r.error);else{var i=new s.Spritesheet(r.texture.baseTexture,t.data,t.url);i.parse(function(){t.spritesheet=i,t.textures=i.textures,e()})}})}else e()}},e.getResourcePath=a;var i,n=r(22),o=(i=r(69))&&i.__esModule?i:{default:i},s=r(1);function a(t,e){return t.isDataUrl?t.data.meta.image:o.default.resolve(t.url.replace(e,""),t.data.meta.image)}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=o.default.fromLoader(t.data,t.url,t.name)),e()}};var i,n=r(22),o=(i=r(8))&&i.__esModule?i:{default:i}},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=(i=r(23))&&i.__esModule?i:{default:i},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.default),a.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,r=[],i=[],n=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,h=t.height/s,u=0;u<e;u++){var l=u%this.verticesX,c=u/this.verticesX|0;r.push(l*a,c*h),i.push(l/o,c/s)}for(var d=o*s,f=0;f<d;f++){var p=f%o,y=f/o|0,g=y*this.verticesX+p,v=y*this.verticesX+p+1,m=(1+y)*this.verticesX+p,_=(1+y)*this.verticesX+p+1;n.push(g,v,m),n.push(v,_,m)}this.vertices=new Float32Array(r),this.uvs=new Float32Array(i),this.colors=new Float32Array([]),this.indices=new Uint16Array(n),this.dirty++,this.indexDirty++,this.multiplyUvs()},a.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},a);function a(t,e,r){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return i._ready=!0,i.verticesX=e||10,i.verticesY=r||10,i.drawMode=o.default.DRAW_MODES.TRIANGLES,i.refresh(),i}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},n);function n(t){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.maxItemsPerFrame=t,this.itemsLeft=0}e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=PIXI.Point,n=(o.prototype.getNodePosition=function(t){return{x:t.x,y:t.y}},o.prototype.getAngle=function(){var t=this.getNodePosition(this.start),e=this.getNodePosition(this.end);return Math.atan2(t.x-e.x,t.y-e.y)},o.prototype.getAdjustedLocation=function(t,e,r){var i=this.getAngle();return{x:t.x+e*r*Math.sin(i),y:t.y+e*r*Math.cos(i)}},o.prototype.getDistance=function(t,e){return.5*(t.getWidth()<t.getHeight()?t.getWidth():t.getHeight())+e},o.prototype.calcEdgePoints=function(t,e,r){var n=this.getAngle(),o=4*r,s=t.x,a=t.y,h=e.x,u=e.y,l={sLeft:{x:0,y:0},sRight:{x:0,y:0},eRight:{x:0,y:0},eLeft:{x:0,y:0}},c=new i(s-Math.cos(n)*o,a+Math.sin(n)*o),d=new i(s+Math.cos(n)*o,a-Math.sin(n)*o),f=new i(h+Math.cos(n)*o,u-Math.sin(n)*o),p=new i(h-Math.cos(n)*o,u+Math.sin(n)*o);return l.sLeft=c,l.sRight=d,l.eRight=f,l.eLeft=p,l},o.prototype.adustNodePos=function(t){var e={srcNode:{x:0,y:0},endNode:{x:0,y:0}},r=this.getDistance(this.start,t.lineDistance),i=this.getDistance(this.end,t.lineDistance),n=this.getNodePosition(this.start),o=this.getNodePosition(this.end);return e.srcNode=this.getAdjustedLocation(n,-1,r),e.endNode=this.getAdjustedLocation(o,1,i),e},o.prototype.getCenterPoint=function(t,e){var r={x:0,y:0};return r.x=(t.x+e.x)/2,r.y=(t.y+e.y)/2,r},o.prototype.edgeLength=function(t,e,r,i){return Math.pow(Math.pow(t-r,2)+Math.pow(e-i,2),.5)},o.prototype.getControlPoint=function(t,e){var r=t.x,i=t.y,n=e.x,o=e.y,s=Math.atan2(r-n,i-o),a=.3*this.edgeLength(r,i,n,o);return[r-a*Math.sin(s),i-a*Math.cos(s),n+a*Math.sin(s),o+a*Math.cos(s)]},o);function o(t,e){this.start=t,this.end=e}e.LineCommonFunction=n},function(t,e,r){t.exports=function t(e,r,i){function n(s,a){if(!r[s]){if(!e[s]){if(o)return o(s,!0);var h=new Error("Cannot find module '"+s+"'");throw h.code="MODULE_NOT_FOUND",h}var u=r[s]={exports:{}};e[s][0].call(u.exports,function(t){return n(e[s][1][t]||t)},u,u.exports,t,e,r,i)}return r[s].exports}for(var o=!1,s=0;s<i.length;s++)n(i[s]);return n}({1:[function(t,e,r){e.exports={RBTree:t("./lib/rbtree"),BinTree:t("./lib/bintree")}},{"./lib/bintree":2,"./lib/rbtree":3}],2:[function(t,e,r){var i=t("./treebase");function n(t){this.data=t,this.left=null,this.right=null}function o(t){this._root=null,this._comparator=t,this.size=0}n.prototype.get_child=function(t){return t?this.right:this.left},n.prototype.set_child=function(t,e){t?this.right=e:this.left=e},(o.prototype=new i).insert=function(t){if(null===this._root)return this._root=new n(t),this.size++,!0;for(var e=0,r=null,i=this._root;;){if(null===i)return i=new n(t),r.set_child(e,i),ret=!0,this.size++,!0;if(0===this._comparator(i.data,t))return!1;e=this._comparator(i.data,t)<0,i=(r=i).get_child(e)}},o.prototype.remove=function(t){if(null===this._root)return!1;var e=new n(void 0),r=e;r.right=this._root;for(var i=null,o=null,s=1;null!==r.get_child(s);){r=(i=r).get_child(s);var a=this._comparator(t,r.data);s=0<a,0===a&&(o=r)}return null!==o&&(o.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this._root=e.right,this.size--,!0)},e.exports=o},{"./treebase":4}],3:[function(t,e,r){var i=t("./treebase");function n(t){this.data=t,this.left=null,this.right=null,this.red=!0}function o(t){this._root=null,this._comparator=t,this.size=0}function s(t){return null!==t&&t.red}function a(t,e){var r=t.get_child(!e);return t.set_child(!e,r.get_child(e)),r.set_child(e,t),t.red=!0,r.red=!1,r}function h(t,e){return t.set_child(!e,a(t.get_child(!e),!e)),a(t,e)}n.prototype.get_child=function(t){return t?this.right:this.left},n.prototype.set_child=function(t,e){t?this.right=e:this.left=e},(o.prototype=new i).insert=function(t){var e=!1;if(null===this._root)this._root=new n(t),e=!0,this.size++;else{var r=new n(void 0),i=0,o=0,u=null,l=r,c=null,d=this._root;for(l.right=this._root;;){if(null===d?(d=new n(t),c.set_child(i,d),e=!0,this.size++):s(d.left)&&s(d.right)&&(d.red=!0,d.left.red=!1,d.right.red=!1),s(d)&&s(c)){var f=l.right===u;d===c.get_child(o)?l.set_child(f,a(u,!o)):l.set_child(f,h(u,!o))}var p=this._comparator(d.data,t);if(0===p)break;o=i,i=p<0,null!==u&&(l=u),u=c,d=(c=d).get_child(i)}this._root=r.right}return this._root.red=!1,e},o.prototype.remove=function(t){if(null===this._root)return!1;var e=new n(void 0),r=e;r.right=this._root;for(var i=null,o=null,u=null,l=1;null!==r.get_child(l);){var c=l;o=i,r=(i=r).get_child(l);var d=this._comparator(t,r.data);if(l=0<d,0===d&&(u=r),!s(r)&&!s(r.get_child(l)))if(s(r.get_child(!l))){var f=a(r,l);i.set_child(c,f),i=f}else if(!s(r.get_child(!l))){var p=i.get_child(!c);if(null!==p)if(s(p.get_child(!c))||s(p.get_child(c))){var y=o.right===i;s(p.get_child(c))?o.set_child(y,h(i,c)):s(p.get_child(!c))&&o.set_child(y,a(i,c));var g=o.get_child(y);g.red=!0,r.red=!0,g.left.red=!1,g.right.red=!1}else i.red=!1,p.red=!0,r.red=!0}}return null!==u&&(u.data=r.data,i.set_child(i.right===r,r.get_child(null===r.left)),this.size--),this._root=e.right,null!==this._root&&(this._root.red=!1),null!==u},e.exports=o},{"./treebase":4}],4:[function(t,e,r){function i(){}function n(t){this._tree=t,this._ancestors=[],this._cursor=null}i.prototype.clear=function(){this._root=null,this.size=0},i.prototype.find=function(t){for(var e=this._root;null!==e;){var r=this._comparator(t,e.data);if(0===r)return e.data;e=e.get_child(0<r)}return null},i.prototype.findIter=function(t){for(var e=this._root,r=this.iterator();null!==e;){var i=this._comparator(t,e.data);if(0===i)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(0<i)}return null},i.prototype.lowerBound=function(t){for(var e=this._root,r=this.iterator(),i=this._comparator;null!==e;){var n=i(t,e.data);if(0===n)return r._cursor=e,r;r._ancestors.push(e),e=e.get_child(0<n)}for(var o=r._ancestors.length-1;0<=o;--o)if(i(t,(e=r._ancestors[o]).data)<0)return r._cursor=e,r._ancestors.length=o,r;return r._ancestors.length=0,r},i.prototype.upperBound=function(t){for(var e=this.lowerBound(t),r=this._comparator;null!==e.data()&&0===r(e.data(),t);)e.next();return e},i.prototype.min=function(){var t=this._root;if(null===t)return null;for(;null!==t.left;)t=t.left;return t.data},i.prototype.max=function(){var t=this._root;if(null===t)return null;for(;null!==t.right;)t=t.right;return t.data},i.prototype.iterator=function(){return new n(this)},i.prototype.each=function(t){for(var e,r=this.iterator();null!==(e=r.next());)t(e)},i.prototype.reach=function(t){for(var e,r=this.iterator();null!==(e=r.prev());)t(e)},n.prototype.data=function(){return null!==this._cursor?this._cursor.data:null},n.prototype.next=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._minNode(t)}else{var e;if(null===this._cursor.right)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.right===e);else this._ancestors.push(this._cursor),this._minNode(this._cursor.right)}return null!==this._cursor?this._cursor.data:null},n.prototype.prev=function(){if(null===this._cursor){var t=this._tree._root;null!==t&&this._maxNode(t)}else{var e;if(null===this._cursor.left)do{if(e=this._cursor,!this._ancestors.length){this._cursor=null;break}this._cursor=this._ancestors.pop()}while(this._cursor.left===e);else this._ancestors.push(this._cursor),this._maxNode(this._cursor.left)}return null!==this._cursor?this._cursor.data:null},n.prototype._minNode=function(t){for(;null!==t.left;)this._ancestors.push(t),t=t.left;this._cursor=t},n.prototype._maxNode=function(t){for(;null!==t.right;)this._ancestors.push(t),t=t.right;this._cursor=t},e.exports=i},{}],5:[function(t,e,r){e.exports=t("./src/index")},{"./src/index":10}],6:[function(t,e,r){var i=t("./signed_area");e.exports=function(t,e){var r=t.point,n=e.point;return r[0]>n[0]?1:r[0]<n[0]?-1:r[1]!==n[1]?r[1]>n[1]?1:-1:function(t,e,r){return t.left!==e.left?t.left?1:-1:0===i(r,t.otherEvent.point,e.otherEvent.point)?!t.isSubject&&e.isSubject?1:-1:t.isBelow(e.otherEvent.point)?-1:1}(t,e,r)}},{"./signed_area":12}],7:[function(t,e,r){var i=t("./signed_area"),n=t("./compare_events"),o=t("./equals");e.exports=function(t,e){return t===e?0:0!==i(t.point,t.otherEvent.point,e.point)||0!==i(t.point,t.otherEvent.point,e.otherEvent.point)?o(t.point,e.point)?t.isBelow(e.otherEvent.point)?-1:1:t.point[0]===e.point[0]?t.point[1]<e.point[1]?-1:1:1===n(t,e)?e.isAbove(t.point)?-1:1:t.isBelow(e.point)?-1:1:t.isSubject!==e.isSubject?t.isSubject?-1:1:o(t.point,e.point)?o(t.otherEvent.point,e.otherEvent.point)?0:t.contourId>e.contourId?1:-1:1===n(t,e)?1:-1}},{"./compare_events":6,"./equals":9,"./signed_area":12}],8:[function(t,e,r){e.exports={NORMAL:0,NON_CONTRIBUTING:1,SAME_TRANSITION:2,DIFFERENT_TRANSITION:3}},{}],9:[function(t,e,r){e.exports=function(t,e){return t[0]===e[0]&&t[1]===e[1]}},{}],10:[function(t,e,r){var i=0,n=1,o=2,s=3,a=[],h=t("./edge_type"),u=t("tinyqueue"),l=t("bintrees").RBTree,c=t("./sweep_event"),d=t("./compare_events"),f=t("./compare_segments"),p=t("./segment_intersection"),y=t("./equals"),g=Math.max,v=Math.min;function m(t,e,r,i,n,o){var s=new c(t,!1,void 0,r),a=new c(e,!1,s,r);s.otherEvent=a,s.contourId=a.contourId=i,0<d(s,a)?a.left=!0:s.left=!0,o[0]=v(o[0],t[0]),o[1]=v(o[1],t[1]),o[2]=g(o[2],t[0]),o[3]=g(o[3],t[1]),n.push(s),n.push(a)}var _=0;function x(t,e,r,i,n){var o,s;if("number"==typeof t[0][0])for(o=0,s=t.length-1;o<s;o++)m(t[o],t[o+1],e,r+1,i,n);else for(o=0,s=t.length;o<s;o++)_++,x(t[o],e,_,i,n)}function b(t,e,r,i){var n=new u(null,d);return x(t,!(_=0),0,n,r),x(e,!1,0,n,i),n}function w(t,e,r,i){null===e?(t.inOut=!1,t.otherInOut=!0):t.isSubject===e.isSubject?(t.inOut=!e.inOut,t.otherInOut=e.otherInOut):(t.inOut=!e.otherInOut,t.otherInOut=e.isVertical()?!e.inOut:e.inOut),e&&(t.prevInResult=!T(e,i)||e.isVertical()?e.prevInResult:e),t.inResult=T(t,i)}function T(t,e){switch(t.type){case h.NORMAL:switch(e){case i:return!t.otherInOut;case n:return t.otherInOut;case o:return t.isSubject&&t.otherInOut||!t.isSubject&&!t.otherInOut;case s:return!0}case h.SAME_TRANSITION:return e===i||e===n;case h.DIFFERENT_TRANSITION:return e===o;case h.NON_CONTRIBUTING:return!1}return!1}function E(t,e,r){var i=p(t.point,t.otherEvent.point,e.point,e.otherEvent.point),n=i?i.length:0;if(0===n)return 0;if(1===n&&(y(t.point,e.point)||y(t.otherEvent.point,e.otherEvent.point)))return 0;if(2===n&&t.isSubject===e.isSubject)return 0;if(1===n)return y(t.point,i[0])||y(t.otherEvent.point,i[0])||S(t,i[0],r),y(e.point,i[0])||y(e.otherEvent.point,i[0])||S(e,i[0],r),1;var o=[],s=!1,a=!1;return y(t.point,e.point)?s=!0:1===d(t,e)?o.push(e,t):o.push(t,e),y(t.otherEvent.point,e.otherEvent.point)?a=!0:1===d(t.otherEvent,e.otherEvent)?o.push(e.otherEvent,t.otherEvent):o.push(t.otherEvent,e.otherEvent),s&&a||s?(t.type=h.NON_CONTRIBUTING,e.type=t.inOut===e.inOut?h.SAME_TRANSITION:h.DIFFERENT_TRANSITION,s&&!a&&S(o[0].otherEvent,o[1].point,r),2):(a?S(o[0],o[1].point,r):o[0]!==o[3].otherEvent?(S(o[0],o[1].point,r),S(o[1],o[2].point,r)):(S(o[0],o[1].point,r),S(o[3].otherEvent,o[2].point,r)),3)}function S(t,e,r){var i=new c(e,!1,t,t.isSubject),n=new c(e,!0,t.otherEvent,t.isSubject);return y(t.point,t.otherEvent.point)&&console.warn("what is that?",t),i.contourId=n.contourId=t.contourId,0<d(n,t.otherEvent)&&(t.otherEvent.left=!0,n.left=!1),t.otherEvent.otherEvent=n,t.otherEvent=i,r.push(n),r.push(i),r}function M(t,e,r,n,s,a){for(var h,u,c=[],d=new l(f),p=(c=[],v(n[2],s[2]));t.length;){var y=t.pop();if(c.push(y),a===i&&y.point[0]>p||a===o&&y.point[0]>n[2])break;if(y.left){if(d.insert(y),u=d.findIter(y),h=d.findIter(y),y.iterator=d.findIter(y),!h||!u){var g=O(d);h=g[0],u=g[1]}if(h.data()!==d.min()?h.prev():((h=d.iterator()).prev(),h.next()),u.next(),w(y,h.data(),0,a),u.data()&&2===E(y,u.data(),t)&&(w(y,h.data(),0,a),w(y,u.data(),0,a)),h.data()&&2===E(h.data(),y,t)){var m=d.findIter(h.data());m.data()&&m.data()!==d.min()?m.prev():(m=d.findIter(d.max())).next(),w(h.data(),m.data(),0,a),w(y,h.data(),0,a)}}else{if(y=y.otherEvent,u=d.findIter(y),!(h=d.findIter(y))||!u)continue;h.data()!==d.min()?h.prev():((h=d.iterator()).prev(),h.next()),u.next(),d.remove(y),u.data()&&h.data()&&E(h.data(),u.data(),t)}}return c}function O(t,e){for(var r,i=t.iterator(),n=t.iterator(),o=t.iterator();null!==(r=o.next())&&(i.next(),n.next(),r!==event););return[i,n]}function P(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}function C(t){return"[object Array]"===Object.prototype.toString.call(t)}function A(t,e){return C(t[0])&&!C(t[0][0])&&(t=[t]),t[e]=[],t}function I(t,e,r){for(var i=t+1,n=e.length;i<n&&y(e[i].point,e[t].point);){if(!r[i])return i;i+=1}for(i=t-1;r[i];)i-=1;return i}function R(t,e,r){var h=function(t,e,r){var h=null;return t.length*e.length==0&&(r===i?h=a:r===o?h=t:r!==n&&r!==s||(h=0===t.length?e:t)),h}(t,e,r);if(h)return h===a?null:h;var u=[1/0,1/0,-1/0,-1/0],l=[1/0,1/0,-1/0,-1/0],c=b(t,e,u,l);return(h=function(t,e,r,h,u){var l=null;return(r[0]>h[2]||h[0]>r[2]||r[1]>h[3]||h[1]>r[3])&&(u===i?l=a:u===o?l=t:u!==n&&u!==s||(l=t.concat(e))),l}(t,e,u,l,r))?h===a?null:h:function(t){var e,r,i=function(t){var e,r,i,n=[];for(r=0,i=t.length;r<i;r++)((e=t[r]).left&&e.inResult||!e.left&&e.otherEvent.inResult)&&n.push(e);for(var o=!1;!o;)for(o=!0,r=0,i=n.length;r<i;r++)r+1<i&&1===d(n[r],n[r+1])&&(P(n,r,r+1),o=!1);for(r=0,i=n.length;r<i;r++)n[r].pos=r;for(r=0,i=n.length;r<i;r++)if(!n[r].left){var s=n[r].pos;n[r].pos=n[r].otherEvent.pos,n[r].otherEvent.pos=s}return n}(t),n=Array(i.length),o=[],s=[],a=[],h={};for(e=0,r=i.length;e<r;e++)if(!n[e]){var u=[];o.push(u);var l=o.length-1;if(s.push(0),a.push(-1),i[e].prevInResult){var c=i[e].prevInResult.contourId;i[e].prevInResult.resultInOut?h[c]&&(A(o[a[c]],l),a[l]=a[c],s[l]=s[c],h[l]=!0):(A(o[c],l),a[l]=c,s[l]=s[c]+1,h[l]=!0)}var f=e,p=i[e].point;for(u.push(p);e<=f;)n[f]=!0,i[f].left?(i[f].resultInOut=!1,i[f].contourId=l):(i[f].otherEvent.resultInOut=!0,i[f].otherEvent.contourId=l),n[f=i[f].pos]=!0,u.push(i[f].point),f=I(f,i,n);n[f=-1===f?e:f]=n[i[f].pos]=!0,i[f].otherEvent.resultInOut=!0,i[f].otherEvent.contourId=l,1&s[l]&&u.reverse()}return o}(M(c,0,0,u,l,r))}e.exports=R,e.exports.union=function(t,e){return R(t,e,n)},e.exports.diff=function(t,e){return R(t,e,o)},e.exports.xor=function(t,e){return R(t,e,s)},e.exports.intersection=function(t,e){return R(t,e,i)},e.exports.operations={INTERSECTION:i,DIFFERENCE:o,UNION:n,XOR:s},e.exports.fillQueue=b,e.exports.computeFields=w,e.exports.subdivideSegments=M,e.exports.divideSegment=S,e.exports.possibleIntersection=E},{"./compare_events":6,"./compare_segments":7,"./edge_type":8,"./equals":9,"./segment_intersection":11,"./sweep_event":13,bintrees:1,tinyqueue:14}],11:[function(t,e,r){function i(t,e){return t[0]*e[1]-t[1]*e[0]}function n(t,e){return t[0]*e[0]+t[1]*e[1]}e.exports=function(t,e,r,o,s){var a=[e[0]-t[0],e[1]-t[1]],h=[o[0]-r[0],o[1]-r[1]];function u(t,e,r){return[t[0]+e*r[0],t[1]+e*r[1]]}var l=[r[0]-t[0],r[1]-t[1]],c=i(a,h),d=c*c,f=n(a,a);if(1e-9*f*n(h,h)<d){var p=i(l,h)/c;if(p<0||1<p)return null;var y=i(l,a)/c;return y<0||1<y?null:s?null:[u(t,p,a)]}if(1e-9*f*n(l,l)<(d=(c=i(l,a))*c))return null;var g=n(a,l)/f,v=g+n(a,h)/f,m=Math.min(g,v),_=Math.max(g,v);return m<=1&&0<=_?1===m?s?null:[u(t,0<m?m:0,a)]:0===_?s?null:[u(t,_<1?_:1,a)]:s&&0===m&&1===_?null:[u(t,0<m?m:0,a),u(t,_<1?_:1,a)]:null}},{}],12:[function(t,e,r){e.exports=function(t,e,r){return(t[0]-r[0])*(e[1]-r[1])-(e[0]-r[0])*(t[1]-r[1])}},{}],13:[function(t,e,r){var i=t("./signed_area"),n=t("./edge_type");function o(t,e,r,i,o){this.left=e,this.point=t,this.otherEvent=r,this.isSubject=i,this.type=o||n.NORMAL,this.inOut=!1,this.otherInOut=!1,this.prevInResult=null,this.inResult=!1,this.resultInOut=!1}o.prototype={isBelow:function(t){return this.left?0<i(this.point,this.otherEvent.point,t):0<i(this.otherEvent.point,this.point,t)},isAbove:function(t){return!this.isBelow(t)},isVertical:function(){return this.point[0]===this.otherEvent.point[0]}},e.exports=o},{"./edge_type":8,"./signed_area":12}],14:[function(t,e,r){"use strict";function i(t,e){return t<e?-1:e<t?1:0}function n(t,e,r){var i=t[e];t[e]=t[r],t[r]=i}(e.exports=function t(e,r){if(!(this instanceof t))return new t(e,r);if(this.data=e||[],this.length=this.data.length,this.compare=r||i,e)for(var n=Math.floor(this.length/2);0<=n;n--)this._down(n)}).prototype={push:function(t){this.data.push(t),this.length++,this._up(this.length-1)},pop:function(){var t=this.data[0];return this.data[0]=this.data[this.length-1],this.length--,this.data.pop(),this._down(0),t},peek:function(){return this.data[0]},_up:function(t){for(var e=this.data,r=this.compare;0<t;){var i=Math.floor((t-1)/2);if(!(r(e[t],e[i])<0))break;n(e,i,t),t=i}},_down:function(t){for(var e=this.data,r=this.compare,i=this.length;;){var o=2*t+1,s=1+o,a=t;if(o<i&&r(e[o],e[a])<0&&(a=o),s<i&&r(e[s],e[a])<0&&(a=s),a===t)return;n(e,a,t),t=a}}}},{}],15:[function(t,e,r){function i(t,e){this.current=t,this.next=e,this._inNormal=this.inwardsNormal(),this._outNormal=this.outwardsNormal()}i.prototype.outwardsNormal=function(){var t=this.inwardsNormal();return[-t[0],-t[1]]},i.prototype.inwardsNormal=function(){var t=this.next[0]-this.current[0],e=this.next[1]-this.current[1],r=Math.sqrt(t*t+e*e);if(0===r)throw new Error("Vertices overlap");return[-e/r,t/r]},i.prototype.offset=function(t,e){return i.offsetEdge(this.current,this.next,t,e)},i.prototype.inverseOffset=function(t,e){return i.offsetEdge(this.next,this.current,t,e)},i.offsetEdge=function(t,e,r,n){return new i([t[0]+r,t[1]+n],[e[0]+r,e[1]+n])},i.prototype.inverse=function(){return new i(this.next,this.current)},e.exports=i},{}],16:[function(t,e,r){var i=t("./edge"),n=t("martinez-polygon-clipping"),o=t("./utils"),s=o.isArray,a=o.equals,h=o.orientRings;function u(t,e){this.vertices=null,this.edges=null,this._closed=!1,this._distance=0,t&&this.data(t),this._arcSegments=void 0!==e?e:5}u.prototype.data=function(t){if(this._edges=[],!s(t))throw new Error("Offset requires at least one coodinate to work with");return s(t)&&"number"==typeof t[0]?this.vertices=t:(this.vertices=h(t),this._processContour(this.vertices,this._edges)),this},u.prototype._processContour=function(t,e){var r,n;if(s(t[0])&&"number"==typeof t[0][0])for(n=t.length,a(t[0],t[n-1])&&(n-=1),r=0;r<n;r++)e.push(new i(t[r],t[(r+1)%n]));else for(r=0,n=t.length;r<n;r++)e.push([]),this._processContour(t[r],e[e.length-1])},u.prototype.arcSegments=function(t){return this._arcSegments=t,this},u.prototype.validate=function(t){var e=t.length;return"number"==typeof t[0]?[t]:(t[0][0]===t[e-1][0]&&t[0][1]===t[e-1][1]&&1<e&&(t=t.slice(0,e-1),this._closed=!0),t)},u.prototype.createArc=function(t,e,r,i,n,o,s){var a=2*Math.PI,h=Math.atan2(i[1]-e[1],i[0]-e[0]),u=Math.atan2(n[1]-e[1],n[0]-e[0]);o%2==0&&(o-=1),h<0&&(h+=a),u<0&&(u+=a);var l=u<h?h-u:h+a-u,c=(s?-l:a-l)/o;t.push(i);for(var d=1;d<o;++d)l=h+c*d,t.push([e[0]+Math.cos(l)*r,e[1]+Math.sin(l)*r]);return t.push(n),t},u.prototype.distance=function(t,e){return this._distance=t||0,this},u.degreesToUnits=function(t,e){switch(e){case"miles":t/=69.047;break;case"feet":t/=364568;break;case"kilometers":t/=111.12;break;case"meters":case"metres":t/=111120}return t},u.prototype.ensureLastPoint=function(t){return a(t[0],t[t.length-1])||t.push([t[0][0],t[0][1]]),t},u.prototype.offset=function(t){return this.distance(t),0===this._distance?this.vertices:0<this._distance?this.margin(this._distance):this.padding(-this._distance)},u.prototype._offsetSegment=function(t,e,r,i){for(var n=[],o=[r.offset(r._inNormal[0]*i,r._inNormal[1]*i),r.inverseOffset(r._outNormal[0]*i,r._outNormal[1]*i)],s=0;s<2;s++){var a=o[s],h=o[(s+2-1)%2];this.createArc(n,0===s?t:e,i,h.next,a.current,this._arcSegments,!0)}return n},u.prototype.margin=function(t){if(this.distance(t),"number"==typeof this.vertices[0])return this.offsetPoint(this._distance);if(0===t)return this.vertices;var e=this.offsetLines(this._distance);return e=n.union(this.vertices,e),h(e)},u.prototype.padding=function(t){if(this.distance(t),0===this._distance)return this.ensureLastPoint(this.vertices);if(2===this.vertices.length&&"number"==typeof this.vertices[0])return this.vertices;var e=this.offsetLines(this._distance),r=n.diff(this.vertices,e);return h(r)},u.prototype.offsetLine=function(t){return 0===t?this.vertices:h(this.offsetLines(t))},u.prototype.offsetLines=function(t){if(t<0)throw new Error("Cannot apply negative margin to the line");var e;if(this.distance(t),s(this.vertices[0])&&"number"!=typeof this.vertices[0][0])for(var r=0,i=this._edges.length;r<i;r++)e=0===r?this.offsetContour(this.vertices[r],this._edges[r]):n.union(e,this.offsetContour(this.vertices[r],this._edges[r]));else e=1===this.vertices.length?this.offsetPoint():this.offsetContour(this.vertices,this._edges);return e},u.prototype.offsetContour=function(t,e){var r,i,o;if(s(t[0])&&"number"==typeof t[0][0])for(i=0,o=t.length-1;i<o;i++){var a=this.ensureLastPoint(this._offsetSegment(t[i],t[i+1],e[i],this._distance));r=0===i?[this.ensureLastPoint(a)]:n.union(r,this.ensureLastPoint(a))}else for(i=0,o=e.length;i<o;i++)r=0===i?this.offsetContour(t[i],e[i]):n.union(r,this.offsetContour(t[i],e[i]));return r},u.prototype.offsetPoint=function(t){this.distance(t);var e=2*this._arcSegments,r=[],i=this.vertices,n=this._distance,o=0;e%2==0&&e++;for(var s=0;s<e;s++)o+=2*Math.PI/e,r.push([i[0]+n*Math.cos(o),i[1]+n*Math.sin(o)]);return h([this.ensureLastPoint(r)])},u.orientRings=h,e.exports=u},{"./edge":15,"./utils":17,"martinez-polygon-clipping":5}],17:[function(t,e,r){var i=e.exports.isArray=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports.equals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.exports.orientRings=function t(e,r,n){var o,s;if(r=r||0,i(e)&&"number"==typeof e[0][0]){var a=0,h=e;for(o=0,s=h.length;o<s;o++){var u=h[o],l=h[(o+1)%s];a+=u[0]*l[1],a-=l[0]*u[1]}(!n&&0<a||n&&a<0)&&h.reverse()}else for(o=0,s=e.length;o<s;o++)t(e[o],r+1,0<o);return e}},{}]},{},[16])(16)},function(t,e,r){"use strict";var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var n=i(r(234)),o=(s.prototype.findPolarAngle=function(t,e){if(!t||!e)return 0;var r=e.x-t.x,i=e.y-t.y;if(0==r&&0==i)return 0;var n=57.295779513082*Math.atan2(i,r);return this.reverse?n<=0&&(n+=360):0<=n&&(n+=360),n},s.prototype.addPoints=function(t){var e=this;t.forEach(function(t){e.addPoint(t[0],t[1])})},s.prototype.addPoint=function(t,e){if(void 0===this.anchorPoint||this.anchorPoint.y>e||this.anchorPoint.y===e&&this.anchorPoint.x>t){if(void 0!==this.anchorPoint){var r=new n.default(this.anchorPoint.x,this.anchorPoint.y);this.points.push(r)}this.anchorPoint=new n.default(t,e)}else this.points.push(new n.default(t,e))},s.prototype.sortPoints=function(){var t=this;return this.points.sort(function(e,r){var i=t.findPolarAngle(t.anchorPoint,e),n=t.findPolarAngle(t.anchorPoint,r);return i<n?-1:n<i?1:0}.bind(this))},s.prototype.checkPoints=function(t,e,r){var i=this.findPolarAngle(t,e),n=this.findPolarAngle(t,r);return n<i?!(180<i-n):!(i<n)||180<n-i},s.prototype.getHull=function(){var t,e,r=[];if(this.reverse=this.points.every(function(t){return t.x<0&&t.y<0}),t=this.sortPoints(),(e=t.length)<3)return t.unshift(this.anchorPoint),t;r.push(t.shift(),t.shift());for(var i=function(){var i,o,s;if(r.push(t.shift()),i=r[r.length-3],o=r[r.length-2],s=r[r.length-1],n.checkPoints(i,o,s)&&r.splice(r.length-2,1),0===t.length){if(e===r.length){var a=n.anchorPoint;return(r=r.filter(function(t){return!!t})).some(function(t){return!!a&&t.x===a.x&&t.y===a.y})||r.unshift(n.anchorPoint),{value:r}}e=(t=r).length,(r=[]).push(t.shift(),t.shift())}},n=this;;){var o=i();if("object"==typeof o)return o.value}},s);function s(){this.reverse=!1,this.points=[]}e.default=o},function(t,e,r){!function(){"use strict";function e(t){var e=t&&t.forEach?t:[].slice.call(arguments),r=!1;if("object"==typeof e[0]){r=e.length;var n=[];e.forEach(function(t){["x","y","z"].forEach(function(e){void 0!==t[e]&&n.push(t[e])})}),e=n}var o=!1,s=e.length;if(r){if(4<r){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");o=!0}}else if(6!==s&&8!==s&&9!==s&&12!==s&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var a=!o&&(9===s||12===s)||t&&t[0]&&void 0!==t[0].z,h=[],u=0,l=(this._3d=a)?3:2;u<s;u+=l){var c={x:e[u],y:e[u+1]};a&&(c.z=e[u+2]),h.push(c)}this.order=h.length-1,this.points=h;var f=["x","y"];a&&f.push("z"),this.dims=f,this.dimlen=f.length,function(t){for(var e=t.order,r=t.points,n=d.align(r,{p1:r[0],p2:r[e]}),o=0;o<n.length;o++)if(1e-4<i(n[o].y))return t._linear=!1;t._linear=!0}(this),this._t1=0,this._t2=1,this.update()}var i=Math.abs,n=Math.min,o=Math.max,s=Math.cos,a=Math.sin,h=Math.acos,u=Math.sqrt,l=Math.PI,c={x:0,y:0,z:0},d=r(109),f=r(235),p=r(236);function y(t,e,r,i,n){void 0===n&&(n=.5);var o=d.projectionratio(n,t),s=1-o,a={x:o*e.x+s*i.x,y:o*e.y+s*i.y},h=d.abcratio(n,t);return{A:{x:r.x+(r.x-a.x)/h,y:r.y+(r.y-a.y)/h},B:r,C:a}}function g(){return d}e.SVGtoBeziers=function(t){return p(e,t)},e.quadraticFromPoints=function(t,r,i,n){return void 0===n&&(n=.5),0===n?new e(r,r,i):1===n?new e(t,r,r):new e(t,y(2,t,r,i,n).A,i)},e.cubicFromPoints=function(t,r,i,n,o){void 0===n&&(n=.5);var s=y(3,t,r,i,n);void 0===o&&(o=d.dist(r,s.C));var a=o*(1-n)/n,h=d.dist(t,i),u=(i.x-t.x)/h,l=(i.y-t.y)/h,c=o*u,f=o*l,p=a*u,g=a*l,v=r.x-c,m=r.y-f,_=r.x+p,x=r.y+g,b=s.A,w=b.x+(v-b.x)/(1-n),T=b.y+(m-b.y)/(1-n),E=b.x+(_-b.x)/n,S=b.y+(x-b.y)/n;return new e(t,{x:t.x+(w-t.x)/n,y:t.y+(T-t.y)/n},{x:i.x+(E-i.x)/(1-n),y:i.y+(S-i.y)/(1-n)},i)},e.getUtils=g,e.PolyBezier=f,e.prototype={getUtils:g,valueOf:function(){return this.toString()},toString:function(){return d.pointsToString(this.points)},toSVG:function(t){if(this._3d)return!1;for(var e=this.points,r=["M",e[0].x,e[0].y,2===this.order?"Q":"C"],i=1,n=e.length;i<n;i++)r.push(e[i].x),r.push(e[i].y);return r.join(" ")},update:function(){this.dpoints=[];for(var t=this.points,e=t.length,r=e-1;1<e;e--,r--){for(var i,n=[],o=0;o<r;o++)i={x:r*(t[o+1].x-t[o].x),y:r*(t[o+1].y-t[o].y)},this._3d&&(i.z=r*(t[o+1].z-t[o].z)),n.push(i);this.dpoints.push(n),t=n}this.computedirection()},computedirection:function(){var t=this.points,e=d.angle(t[0],t[this.order],t[1]);this.clockwise=0<e},length:function(){return d.length(this.derivative.bind(this))},_lut:[],getLUT:function(t){if(t=t||100,this._lut.length===t)return this._lut;this._lut=[],t--;for(var e=0;e<=t;e++)this._lut.push(this.compute(e/t));return this._lut},on:function(t,e){e=e||5;for(var r,i=this.getLUT(),n=[],o=0,s=0;s<i.length;s++)r=i[s],d.dist(r,t)<e&&(n.push(r),o+=s/i.length);return!!n.length&&o/n.length},project:function(t){var e=this.getLUT(),r=e.length-1,i=d.closest(e,t),n=i.mdist,o=i.mpos;if(0===o||o===r){var s=o/r,a=this.compute(s);return a.t=s,a.d=n,a}var h,u,l,c=(o+1)/r,f=.1/r;for(n+=1,h=s=(o-1)/r;s<c+f;s+=f)u=this.compute(s),(l=d.dist(t,u))<n&&(n=l,h=s);return(u=this.compute(h)).t=h,u.d=n,u},get:function(t){return this.compute(t)},point:function(t){return this.points[t]},compute:function(t){if(0===t)return this.points[0];if(1===t)return this.points[this.order];var e=this.points,r=1-t;if(1===this.order)return u={x:r*e[0].x+t*e[1].x,y:r*e[0].y+t*e[1].y},this._3d&&(u.z=r*e[0].z+t*e[1].z),u;if(this.order<4){var i,n,o,s=r*r,a=t*t,h=0;2===this.order?(e=[e[0],e[1],e[2],c],i=s,n=r*t*2,o=a):3===this.order&&(i=s*r,n=s*t*3,o=r*a*3,h=t*a);var u={x:i*e[0].x+n*e[1].x+o*e[2].x+h*e[3].x,y:i*e[0].y+n*e[1].y+o*e[2].y+h*e[3].y};return this._3d&&(u.z=i*e[0].z+n*e[1].z+o*e[2].z+h*e[3].z),u}for(var l=JSON.parse(JSON.stringify(this.points));1<l.length;){for(var d=0;d<l.length-1;d++)l[d]={x:l[d].x+(l[d+1].x-l[d].x)*t,y:l[d].y+(l[d+1].y-l[d].y)*t},void 0!==l[d].z&&(l[d]=l[d].z+(l[d+1].z-l[d].z)*t);l.splice(l.length-1,1)}return l[0]},raise:function(){for(var t,r,i=this.points,n=[i[0]],o=i.length,s=1;s<o;s++)t=i[s],r=i[s-1],n[s]={x:(o-s)/o*t.x+s/o*r.x,y:(o-s)/o*t.y+s/o*r.y};return n[o]=i[o-1],new e(n)},derivative:function(t){var e,r,i=1-t,n=0,o=this.dpoints[0];2===this.order&&(o=[o[0],o[1],c],e=i,r=t),3===this.order&&(e=i*i,r=i*t*2,n=t*t);var s={x:e*o[0].x+r*o[1].x+n*o[2].x,y:e*o[0].y+r*o[1].y+n*o[2].y};return this._3d&&(s.z=e*o[0].z+r*o[1].z+n*o[2].z),s},inflections:function(){return d.inflections(this.points)},normal:function(t){return this._3d?this.__normal3(t):this.__normal2(t)},__normal2:function(t){var e=this.derivative(t),r=u(e.x*e.x+e.y*e.y);return{x:-e.y/r,y:e.x/r}},__normal3:function(t){var e=this.derivative(t),r=this.derivative(t+.01),i=u(e.x*e.x+e.y*e.y+e.z*e.z),n=u(r.x*r.x+r.y*r.y+r.z*r.z);e.x/=i,e.y/=i,e.z/=i,r.x/=n,r.y/=n,r.z/=n;var o={x:r.y*e.z-r.z*e.y,y:r.z*e.x-r.x*e.z,z:r.x*e.y-r.y*e.x},s=u(o.x*o.x+o.y*o.y+o.z*o.z);o.x/=s,o.y/=s,o.z/=s;var a=[o.x*o.x,o.x*o.y-o.z,o.x*o.z+o.y,o.x*o.y+o.z,o.y*o.y,o.y*o.z-o.x,o.x*o.z-o.y,o.y*o.z+o.x,o.z*o.z];return{x:a[0]*e.x+a[1]*e.y+a[2]*e.z,y:a[3]*e.x+a[4]*e.y+a[5]*e.z,z:a[6]*e.x+a[7]*e.y+a[8]*e.z}},hull:function(t){var e,r=this.points,i=[],n=[],o=0,s=0,a=0;for(n[o++]=r[0],n[o++]=r[1],n[o++]=r[2],3===this.order&&(n[o++]=r[3]);1<r.length;){for(i=[],s=0,a=r.length-1;s<a;s++)e=d.lerp(t,r[s],r[s+1]),n[o++]=e,i.push(e);r=i}return n},split:function(t,r){if(0===t&&r)return this.split(r).left;if(1===r)return this.split(t).right;var i=this.hull(t),n={left:2===this.order?new e([i[0],i[3],i[5]]):new e([i[0],i[4],i[7],i[9]]),right:2===this.order?new e([i[5],i[4],i[2]]):new e([i[9],i[8],i[6],i[3]]),span:i};return n.left._t1=d.map(0,0,1,this._t1,this._t2),n.left._t2=d.map(t,0,1,this._t1,this._t2),n.right._t1=d.map(t,0,1,this._t1,this._t2),n.right._t2=d.map(1,0,1,this._t1,this._t2),r?(r=d.map(r,t,1,0,1),n.right.split(r).left):n},extrema:function(){var t,e,r={},i=[];return this.dims.forEach(function(n){e=function(t){return t[n]},t=this.dpoints[0].map(e),r[n]=d.droots(t),3===this.order&&(t=this.dpoints[1].map(e),r[n]=r[n].concat(d.droots(t))),r[n]=r[n].filter(function(t){return 0<=t&&t<=1}),i=i.concat(r[n].sort(d.numberSort))}.bind(this)),i=i.sort(d.numberSort).filter(function(t,e){return i.indexOf(t)===e}),r.values=i,r},bbox:function(){var t=this.extrema(),e={};return this.dims.forEach(function(r){e[r]=d.getminmax(this,r,t[r])}.bind(this)),e},overlaps:function(t){var e=this.bbox(),r=t.bbox();return d.bboxoverlap(e,r)},offset:function(t,r){if(void 0!==r){var i=this.get(t),n=this.normal(t),o={c:i,n:n,x:i.x+n.x*r,y:i.y+n.y*r};return this._3d&&(o.z=i.z+n.z*r),o}if(this._linear){var s=this.normal(0);return[new e(this.points.map(function(e){var r={x:e.x+t*s.x,y:e.y+t*s.y};return e.z&&n.z&&(r.z=e.z+t*s.z),r}))]}return this.reduce().map(function(e){return e.scale(t)})},simple:function(){if(3===this.order){var t=d.angle(this.points[0],this.points[3],this.points[1]),e=d.angle(this.points[0],this.points[3],this.points[2]);if(0<t&&e<0||t<0&&0<e)return!1}var r=this.normal(0),n=this.normal(1),o=r.x*n.x+r.y*n.y;return this._3d&&(o+=r.z*n.z),i(h(o))<l/3},reduce:function(){var t,e,r=0,n=0,o=[],s=[],a=this.extrema().values;for(-1===a.indexOf(0)&&(a=[0].concat(a)),-1===a.indexOf(1)&&a.push(1),r=a[0],t=1;t<a.length;t++)n=a[t],(e=this.split(r,n))._t1=r,e._t2=n,o.push(e),r=n;return o.forEach(function(t){for(n=r=0;n<=1;)for(n=r+.01;n<=1.01;n+=.01)if(!(e=t.split(r,n)).simple()){if(i(r-(n-=.01))<.01)return[];(e=t.split(r,n))._t1=d.map(r,0,1,t._t1,t._t2),e._t2=d.map(n,0,1,t._t1,t._t2),s.push(e),r=n;break}r<1&&((e=t.split(r,1))._t1=d.map(r,0,1,t._t1,t._t2),e._t2=t._t2,s.push(e))}),s},scale:function(t){var r=this.order,i=!1;if("function"==typeof t&&(i=t),i&&2===r)return this.raise().scale(i);var n=this.clockwise,o=i?i(0):t,s=i?i(1):t,a=[this.offset(0,10),this.offset(1,10)],h=d.lli4(a[0],a[0].c,a[1],a[1].c);if(!h)throw new Error("cannot scale this curve. Try reducing it first.");var l=this.points,c=[];return[0,1].forEach(function(t){var e=c[t*r]=d.copy(l[t*r]);e.x+=(t?s:o)*a[t].n.x,e.y+=(t?s:o)*a[t].n.y}.bind(this)),[0,1].forEach(i?function(e){if(2!==this.order||!e){var o=l[e+1],s={x:o.x-h.x,y:o.y-h.y},a=i?i((e+1)/r):t;i&&!n&&(a=-a);var d=u(s.x*s.x+s.y*s.y);s.x/=d,s.y/=d,c[e+1]={x:o.x+a*s.x,y:o.y+a*s.y}}}.bind(this):function(t){if(2!==this.order||!t){var e=c[t*r],i=this.derivative(t),n={x:e.x+i.x,y:e.y+i.y};c[t+1]=d.lli4(e,n,h,l[t+1])}}.bind(this)),new e(c)},outline:function(t,e,r,i){e=void 0===e?t:e;var n,o=this.reduce(),s=o.length,a=[],h=[],u=0,l=this.length(),c=void 0!==r&&void 0!==i;function p(t,e,r,i,n){return function(o){var s=i/r,a=(i+n)/r,h=e-t;return d.map(o,0,1,t+s*h,t+a*h)}}o.forEach(function(n){w=n.length(),c?(a.push(n.scale(p(t,r,l,u,w))),h.push(n.scale(p(-e,-i,l,u,w)))):(a.push(n.scale(t)),h.push(n.scale(-e))),u+=w}),h=h.map(function(t){return(n=t.points)[3]?t.points=[n[3],n[2],n[1],n[0]]:t.points=[n[2],n[1],n[0]],t}).reverse();var y=a[0].points[0],g=a[s-1].points[a[s-1].points.length-1],v=h[s-1].points[h[s-1].points.length-1],m=h[0].points[0],_=d.makeline(v,y),x=d.makeline(g,m),b=[_].concat(a).concat([x]).concat(h),w=b.length;return new f(b)},outlineshapes:function(t,e,r){e=e||t;for(var i=this.outline(t,e).curves,n=[],o=1,s=i.length;o<s/2;o++){var a=d.makeshape(i[o],i[s-o],r);a.startcap.virtual=1<o,a.endcap.virtual=o<s/2-1,n.push(a)}return n},intersects:function(t,r){return t?t.p1&&t.p2?this.lineIntersects(t):(t instanceof e&&(t=t.reduce()),this.curveintersects(this.reduce(),t,r)):this.selfintersects(r)},lineIntersects:function(t){var e=n(t.p1.x,t.p2.x),r=n(t.p1.y,t.p2.y),i=o(t.p1.x,t.p2.x),s=o(t.p1.y,t.p2.y),a=this;return d.roots(this.points,t).filter(function(t){var n=a.get(t);return d.between(n.x,e,i)&&d.between(n.y,r,s)})},selfintersects:function(t){var e,r,i,n,o=this.reduce(),s=o.length-2,a=[];for(e=0;e<s;e++)i=o.slice(e,e+1),n=o.slice(e+2),r=this.curveintersects(i,n,t),a=a.concat(r);return a},curveintersects:function(t,e,r){var i=[];t.forEach(function(t){e.forEach(function(e){t.overlaps(e)&&i.push({left:t,right:e})})});var n=[];return i.forEach(function(t){var e=d.pairiteration(t.left,t.right,r);0<e.length&&(n=n.concat(e))}),n},arcs:function(t){return t=t||.5,this._iterate(t,[])},_error:function(t,e,r,n){var o=(n-r)/4,s=this.get(r+o),a=this.get(n-o),h=d.dist(t,e),u=d.dist(t,s),l=d.dist(t,a);return i(u-h)+i(l-h)},_iterate:function(t,e){var r,i=0,n=1;do{r=0,n=1;var o,h,u,l,c,f=this.get(i),p=!1,y=!1,g=n,v=1;do{if(y=p,l=u,g=(i+n)/2,o=this.get(g),h=this.get(n),(u=d.getccenter(f,o,h)).interval={start:i,end:n},p=this._error(u,f,i,n)<=t,(c=y&&!p)||(v=n),p){if(1<=n){if(u.interval.end=v=1,l=u,1<n){var m={x:u.x+u.r*s(u.e),y:u.y+u.r*a(u.e)};u.e+=d.angle({x:u.x,y:u.y},m,this.get(1))}break}n+=(n-i)/2}else n=g}while(!c&&r++<100);if(100<=r)break;l=l||u,e.push(l),i=v}while(n<1);return e}},t.exports=e}()},function(t,e,r){!function(){"use strict";function e(t){return t<0?-u(-t,1/3):u(t,1/3)}var i=Math.abs,n=Math.cos,o=Math.sin,s=Math.acos,a=Math.atan2,h=Math.sqrt,u=Math.pow,l=Math.PI,c=2*l,d=l/2,f=Number.MAX_SAFE_INTEGER||9007199254740991,p=Number.MIN_SAFE_INTEGER||-9007199254740991,y={Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(t,e){var r=e(t),i=r.x*r.x+r.y*r.y;return void 0!==r.z&&(i+=r.z*r.z),h(i)},between:function(t,e,r){return e<=t&&t<=r||y.approximately(t,e)||y.approximately(t,r)},approximately:function(t,e,r){return i(t-e)<=(r||1e-6)},length:function(t){var e,r,i=0,n=y.Tvalues.length;for(e=0;e<n;e++)r=.5*y.Tvalues[e]+.5,i+=y.Cvalues[e]*y.arcfn(r,t);return.5*i},map:function(t,e,r,i,n){return i+(t-e)/(r-e)*(n-i)},lerp:function(t,e,r){var i={x:e.x+t*(r.x-e.x),y:e.y+t*(r.y-e.y)};return e.z&&r.z&&(i.z=e.z+t*(r.z-e.z)),i},pointToString:function(t){var e=t.x+"/"+t.y;return void 0!==t.z&&(e+="/"+t.z),e},pointsToString:function(t){return"["+t.map(y.pointToString).join(", ")+"]"},copy:function(t){return JSON.parse(JSON.stringify(t))},angle:function(t,e,r){var i=e.x-t.x,n=e.y-t.y,o=r.x-t.x,s=r.y-t.y;return a(i*s-n*o,i*o+n*s)},round:function(t,e){var r=""+t,i=r.indexOf(".");return parseFloat(r.substring(0,i+1+e))},dist:function(t,e){var r=t.x-e.x,i=t.y-e.y;return h(r*r+i*i)},closest:function(t,e){var r,i,n=u(2,63);return t.forEach(function(t,o){(i=y.dist(e,t))<n&&(n=i,r=o)}),{mdist:n,mpos:r}},abcratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var r=u(t,e)+u(1-t,e);return i((r-1)/r)},projectionratio:function(t,e){if(2!==e&&3!==e)return!1;if(void 0===t)t=.5;else if(0===t||1===t)return t;var r=u(1-t,e);return r/(u(t,e)+r)},lli8:function(t,e,r,i,n,o,s,a){var h=(t-r)*(o-a)-(e-i)*(n-s);return 0!=h&&{x:((t*i-e*r)*(n-s)-(t-r)*(n*a-o*s))/h,y:((t*i-e*r)*(o-a)-(e-i)*(n*a-o*s))/h}},lli4:function(t,e,r,i){var n=t.x,o=t.y,s=e.x,a=e.y,h=r.x,u=r.y,l=i.x,c=i.y;return y.lli8(n,o,s,a,h,u,l,c)},lli:function(t,e){return y.lli4(t,t.c,e,e.c)},makeline:function(t,e){var i=r(108),n=t.x,o=t.y,s=e.x,a=e.y,h=(s-n)/3,u=(a-o)/3;return new i(n,o,n+h,o+u,n+2*h,o+2*u,s,a)},findbbox:function(t){var e=f,r=f,i=p,n=p;return t.forEach(function(t){var o=t.bbox();e>o.x.min&&(e=o.x.min),r>o.y.min&&(r=o.y.min),i<o.x.max&&(i=o.x.max),n<o.y.max&&(n=o.y.max)}),{x:{min:e,mid:(e+i)/2,max:i,size:i-e},y:{min:r,mid:(r+n)/2,max:n,size:n-r}}},shapeintersections:function(t,e,r,i,n){if(!y.bboxoverlap(e,i))return[];var o=[],s=[t.startcap,t.forward,t.back,t.endcap],a=[r.startcap,r.forward,r.back,r.endcap];return s.forEach(function(e){e.virtual||a.forEach(function(i){if(!i.virtual){var s=e.intersects(i,n);0<s.length&&(s.c1=e,s.c2=i,s.s1=t,s.s2=r,o.push(s))}})}),o},makeshape:function(t,e,r){var i=e.points.length,n=t.points.length,o=y.makeline(e.points[i-1],t.points[0]),s=y.makeline(t.points[n-1],e.points[0]),a={startcap:o,forward:t,back:e,endcap:s,bbox:y.findbbox([o,t,e,s])},h=y;return a.intersections=function(t){return h.shapeintersections(a,a.bbox,t,t.bbox,r)},a},getminmax:function(t,e,r){if(!r)return{min:0,max:0};var i,n,o=f,s=p;-1===r.indexOf(0)&&(r=[0].concat(r)),-1===r.indexOf(1)&&r.push(1);for(var a=0,h=r.length;a<h;a++)i=r[a],(n=t.get(i))[e]<o&&(o=n[e]),n[e]>s&&(s=n[e]);return{min:o,mid:(o+s)/2,max:s,size:s-o}},align:function(t,e){var r=e.p1.x,i=e.p1.y,s=-a(e.p2.y-i,e.p2.x-r);return t.map(function(t){return{x:(t.x-r)*n(s)-(t.y-i)*o(s),y:(t.x-r)*o(s)+(t.y-i)*n(s)}})},roots:function(t,r){function i(t){return 0<=t&&t<=1}r=r||{p1:{x:0,y:0},p2:{x:1,y:0}};var o=t.length-1,a=y.align(t,r);if(2==o){if(0===(g=(v=a[0].y)-2*(m=a[1].y)+(_=a[2].y)))return m!==_&&0===g?[(2*m-_)/2*(m-_)].filter(i):[];var u=-h(m*m-v*_),l=-v+m;return[-(u+l)/g,-(-u+l)/g].filter(i)}var d=a[0].y,f=a[1].y,p=a[2].y,g=3*f-d-3*p+a[3].y,v=3*d-6*f+3*p,m=-3*d+3*f,_=d;if(y.approximately(g,0)){if(y.approximately(v,0))return y.approximately(m,0)?[]:[-_/m].filter(i);var x=2*v;return[((b=h(m*m-4*v*_))-m)/x,(-m-b)/x].filter(i)}var b,w,T=(a=(3*(m/=g)-(v/=g)*v)/3)/3,E=(b=(2*v*v*v-9*v*m+27*(_/=g))/27)/2,S=E*E+T*T*T;if(S<0){var M=-a/3,O=h(M*M*M),P=-b/(2*O),C=s(P<-1?-1:1<P?1:P),A=2*e(O);return[A*n(C/3)-v/3,A*n((C+c)/3)-v/3,A*n((C+2*c)/3)-v/3].filter(i)}if(0==S)return[2*(w=E<0?e(-E):-e(E))-v/3,-w-v/3].filter(i);var I=h(S);return[(w=e(-E+I))-e(E+I)-v/3].filter(i)},droots:function(t){if(3===t.length){var e=t[0],r=t[1],i=t[2],n=e-2*r+i;if(0===n)return r!==i&&0===n?[(2*r-i)/(2*(r-i))]:[];var o=-h(r*r-e*i),s=-e+r;return[-(o+s)/n,-(-o+s)/n]}if(2===t.length)return(e=t[0])!==(r=t[1])?[e/(e-r)]:[]},inflections:function(t){if(t.length<4)return[];var e=y.align(t,{p1:t[0],p2:t.slice(-1)[0]}),r=e[2].x*e[1].y,i=e[3].x*e[1].y,n=e[1].x*e[2].y,o=18*(-3*r+2*i+3*n-e[3].x*e[2].y),s=18*(3*r-i-3*n),a=18*(n-r);if(y.approximately(o,0)){if(!y.approximately(s,0)){var h=-a/s;if(0<=h&&h<=1)return[h]}return[]}var u=s*s-4*o*a,l=Math.sqrt(u),c=2*o;return y.approximately(c,0)?[]:[(l-s)/c,-(s+l)/c].filter(function(t){return 0<=t&&t<=1})},bboxoverlap:function(t,e){var r,n,o,s,a,h=["x","y"],u=h.length;for(r=0;r<u;r++)if(o=t[n=h[r]].mid,s=e[n].mid,a=(t[n].size+e[n].size)/2,i(o-s)>=a)return!1;return!0},expandbox:function(t,e){e.x.min<t.x.min&&(t.x.min=e.x.min),e.y.min<t.y.min&&(t.y.min=e.y.min),e.z&&e.z.min<t.z.min&&(t.z.min=e.z.min),e.x.max>t.x.max&&(t.x.max=e.x.max),e.y.max>t.y.max&&(t.y.max=e.y.max),e.z&&e.z.max>t.z.max&&(t.z.max=e.z.max),t.x.mid=(t.x.min+t.x.max)/2,t.y.mid=(t.y.min+t.y.max)/2,t.z&&(t.z.mid=(t.z.min+t.z.max)/2),t.x.size=t.x.max-t.x.min,t.y.size=t.y.max-t.y.min,t.z&&(t.z.size=t.z.max-t.z.min)},pairiteration:function(t,e,r){var i=t.bbox(),n=e.bbox(),o=r||.5;if(i.x.size+i.y.size<o&&n.x.size+n.y.size<o)return[(1e5*(t._t1+t._t2)/2|0)/1e5+"/"+(1e5*(e._t1+e._t2)/2|0)/1e5];var s=t.split(.5),a=e.split(.5),h=[{left:s.left,right:a.left},{left:s.left,right:a.right},{left:s.right,right:a.right},{left:s.right,right:a.left}],u=[];return 0===(h=h.filter(function(t){return y.bboxoverlap(t.left.bbox(),t.right.bbox())})).length?u:(h.forEach(function(t){u=u.concat(y.pairiteration(t.left,t.right,o))}),u=u.filter(function(t,e){return u.indexOf(t)===e}))},getccenter:function(t,e,r){var i,s=e.x-t.x,h=e.y-t.y,u=r.x-e.x,l=r.y-e.y,f=s*n(d)-h*o(d),p=s*o(d)+h*n(d),g=u*n(d)-l*o(d),v=u*o(d)+l*n(d),m=(t.x+e.x)/2,_=(t.y+e.y)/2,x=(e.x+r.x)/2,b=(e.y+r.y)/2,w=m+f,T=_+p,E=x+g,S=b+v,M=y.lli8(m,_,w,T,x,b,E,S),O=y.dist(M,t),P=a(t.y-M.y,t.x-M.x),C=a(e.y-M.y,e.x-M.x),A=a(r.y-M.y,r.x-M.x);return P<A?((C<P||A<C)&&(P+=c),A<P&&(i=A,A=P,P=i)):A<C&&C<P?(i=A,A=P,P=i):A+=c,M.s=P,M.e=A,M.r=O,M},numberSort:function(t,e){return t-e}};t.exports=y}()},function(t,e,r){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});var o=i(r(5)),s=n(r(111)),a=n(r(31)),h=r(130),u=r(25),l=r(238),c=r(9),d=r(16),f=r(17),p=r(13),y=r(51),g=r(10),v=r(240),m=r(241),_=(x.prototype.initIconResource=function(t){var e=this;PIXI.loader.reset(),PIXI.utils.clearTextureCache(),o.each(t,function(t){PIXI.loader.add(t.name,t.url)}),PIXI.loader.load(function(){e.callback(),e.callback=Function()})},x.prototype.createNode=function(t){return this.topo.createNode(this.domRegex,t)},x.prototype.createGroup=function(t){return this.topo.createGroup(t)},x.prototype.createEdge=function(t,e){return this.topo.createEdge(t,e,this.domRegex)},x.prototype.createDataFlow=function(t,e){return this.topo.createDataFlow(t,e)},x.prototype.createEdgeGroup=function(){return this.topo.createEdgeGroup()},x.prototype.createMultipleLine=function(t,e){return this.topo.createMultipleColor(t,e,this.domRegex)},x.prototype.getContainer=function(){return this.app.getContainer()},x.prototype.addElement=function(t){this.topo.addElement(t)},x.prototype.addElements=function(t){this.topo.addElements(t)},x.prototype.syncView=function(){this.drawer.syncView()},x.prototype.setDrag=function(){this.isSelect=!1,this.action.dragContainer()},x.prototype.setSelect=function(t){this.isSelect=!0,this.action.setSelect(t)},x.prototype.setZoom=function(t){var e=this,r=document.getElementById(this.domRegex);r&&r.addEventListener("wheel",function(r){var i=e.zoom;r.deltaY<0?i<=1&&.1<i?e.zoomElements(s.default.plus(i,.1)):i<=2&&1<i?e.zoomElements(s.default.plus(i,.2)):2<i?e.zoomElements(s.default.plus(i,1)):i<=.1&&.01<i?e.zoomElements(s.default.plus(i,.01)):i<=.01&&.001<i?e.zoomElements(s.default.plus(i,.001)):i<=.001&&1e-4<=i&&e.zoomElements(s.default.plus(i,1e-4)):2<i?e.zoomElements(s.default.minus(i,1)):i<=2&&1<i?e.zoomElements(s.default.minus(i,.2)):i<=1&&.11<i?e.zoomElements(s.default.minus(i,.1)):i<=.11&&.011<i?e.zoomElements(s.default.minus(i,.01)):i<=.011&&.0011<i?e.zoomElements(s.default.minus(i,.001)):i<=.0011&&2e-4<i?e.zoomElements(s.default.minus(i,1e-4)):i<=2e-4&&0<i&&e.zoomElements(1e-4);var n=s.default.divide(e.zoom,i);t?e.moveTopology(n,r.offsetX,r.offsetY,t):e.moveTopology(n,r.offsetX,r.offsetY,!0)})},x.prototype.setClick=function(){this.action.setClick()},x.prototype.zoomNetworkElements=function(t){var e=this.getNodeObj(),r=s.default.divide(t,this.zoom),i=this.getNetworkSize(),n=o.cloneDeep(this.zoom);o.each(e,function(t){t.position.set(s.default.times(t.x,r),s.default.times(t.y,r))}),this.zoom=t,i&&(this.moveTopology(this.zoom/n,i[0]/2,i[1]/2,!0),this.toggleLabel(this.nodeLabel,this.edgeLabel))},x.prototype.clear=function(){var t=this.topo.getElements();o.each(t,function(t){t.destroy()}),o.remove(t,void 0)},x.prototype.getElements=function(){return this.topo.getElements()},x.prototype.getNodes=function(){var t=this.topo.getElements();return o.filter(t,function(t){return t instanceof g.Node})},x.prototype.getNodeObj=function(){var t={},e=this.topo.getElements();return o.each(e,function(e){var r;if(e instanceof g.Node&&e.name){var i=e.name;o.extend(t,((r={})[i]=e,r))}}),t},x.prototype.getEdgeObj=function(){var t={},e=this.topo.getElements();return o.each(e,function(e){var r;if(e instanceof d.EdgeBundle&&o.each(e.children,function(e,r){var i,n=e.startNode.name+"=>"+e.endNode.name+"-"+(r+1)+"ofBundle";o.extend(t,((i={})[n]=e,i))}),e instanceof c.Edge){var i=e.startNode.name+"=>"+e.endNode.name;o.extend(t,((r={})[i]=e,r))}}),t},x.prototype.getAllEdges=function(){var t={},e=this.topo.getElements();return o.each(e,function(e){var r;if(e instanceof d.EdgeBundle){var i=e.isExpanded?e.children:e.bundleData;o.each(i,function(e,r){var i,n=e.startNode.name+"=>"+e.endNode.name+"-"+(r+1)+"ofBundle";o.extend(t,((i={})[n]=e,i))})}if(e instanceof c.Edge){var n=e.startNode.name+"=>"+e.endNode.name;o.extend(t,((r={})[n]=e,r))}}),t},x.prototype.getGroupObj=function(){var t={},e=this.topo.getElements();return o.each(e,function(e,r){var i;if(e instanceof p.Group&&e.name){var n=e.name;o.extend(t,((i={})[""+n+r]=e,i))}}),t},x.prototype.getAllGroups=function(){var t=[],e=this.topo.getElements();return o.each(e,function(e){(e instanceof p.Group||e instanceof f.EdgeGroup)&&t.push(e)}),t},x.prototype.getEdgeGroup=function(){var t=this.topo.getElements();return o.filter(t,function(t){return t instanceof f.EdgeGroup})},x.prototype.getDataFlow=function(){var t=this.topo.getElements();return o.filter(t,function(t){return t instanceof u.DataFlow})},x.prototype.getMultipleLines=function(){var t=this.topo.getElements();return o.filter(t,function(t){return t instanceof y.MultipleColorLine})},x.prototype.removeElements=function(t){var e=this,r=this.getElements();if(t instanceof c.Edge){if(o.remove(t.startNode.linksArray,function(e){return e.id===t.id}),o.remove(t.endNode.linksArray,function(e){return e.id===t.id}),t.bundleParent instanceof d.EdgeBundle){var i=t.bundleParent.isExpanded?t.bundleParent.children:t.bundleParent.bundleData;if(o.remove(i,function(e){return e===t}),1===i.length&&i[0]){var n=i[0];o.remove(r,function(e){return t.bundleParent===e}),t.bundleParent.removeBundleEdge(),r.push(n),n.startNode.linksArray.push(n),n.endNode.linksArray.push(n),n.setStyle({lineType:0})}else 1<i.length&&t.bundleParent.updateNum()}t.setStyle({lineColor:t.defaultColor}),0<t.includeGroup.length&&o.each(t.includeGroup,function(e){e.removeChildEdge(t)})}else if(t instanceof g.Node){0<t.includedGroups.length&&o.each(t.includedGroups,function(e){e.removeChildNode(t)});var s=this.getNodeLinks(t);o.each(s,function(t){e.removeElements(t)})}o.remove(r,function(e){if(t)return t.id===e.id}),this.syncView()},x.prototype.zoomOver=function(){var t={x:0,y:0},e=this.analyzeZoom();this.zoom=this.zoom*e;var r=this.getNodeObj();o.each(r,function(t){t.x=t.x*e,t.y=t.y*e}),this.reDraw();var i=this.getIsOutsideGroup();if(i)t=i.centerPoint;else{var n=this.vertexPoints();t=new a.default(n).center()}this.moveToCenter(t),this.toggleLabel(this.nodeLabel,this.edgeLabel)},x.prototype.getCenter=function(){return this.action.getCenter()},x.prototype.getSelectedNodes=function(){return this.topo.getSelectedNodes()},x.prototype.setSelectNodes=function(t){this.topo.setSelectedNodes(t)},x.prototype.setSelectEdge=function(t){this.topo.setSelectedEdge(t)},x.prototype.setSelectGroups=function(t){this.topo.setSelectedGroups(t)},x.prototype.getSelectEdge=function(){return this.topo.getSelectedEdge()},x.prototype.getSelectGroups=function(){return this.topo.getSelectedGroups()},x.prototype.clearHighlight=function(){this.action.removeHighLight()},x.prototype.moveCenter=function(t){var e=this.vertexPoints(),r=new a.default(e).center();this.moveToCenter(r),!0!==t&&void 0!==t||this.reDraw()},x.prototype.setTooltipDisplay=function(t){var e=this.getNodeObj(),r=this.getEdgeObj();o.each(e,function(e){e.tooltip.setTooltipDisplay(t)}),o.each(r,function(e){e.tooltip.setTooltipDisplay(t)})},x.prototype.groupLabelToggle=function(t){var e=this.getGroupObj();o.each(e,function(e){var r=e.getChildByName("group_label");r&&(r.visible=t)})},x.prototype.edgeGroupLabelToggle=function(t){var e=this.getEdgeGroup();o.each(e,function(e){var r=e.getChildByName("group_label");r&&(r.visible=t)})},x.prototype.changeBackgroundColor=function(t){this.app.renderer.backgroundColor=t},x.prototype.edgeLabelToggle=function(t){var e=this.getEdgeObj();o.each(e,function(e){var r=e.getChildByName("edge_srclabel"),i=e.getChildByName("edge_endlabel");r&&i&&(r.visible=t,i.visible=t)})},x.prototype.bundleLabelToggle=function(t){o.each(this.getElements(),function(e){if(e instanceof d.EdgeBundle&&!e.isExpanded){var r=e.children[0];if(r){var i=r.getChildByName("label_background"),n=r.getChildByName("bundle_label");i&&n&&(i.visible=t,n.visible=t)}}})},x.prototype.changeBundleLabelColor=function(t){o.each(this.getElements(),function(e){e instanceof d.EdgeBundle&&e.setStyle({fillColor:t})})},x.prototype.setBundleExpanded=function(t){o.each(this.getElements(),function(e){e instanceof d.EdgeBundle&&e.isExpanded!==t&&e.setExpaned(t)})},x.prototype.nodeLabelToggle=function(t){var e=this.getNodeObj();o.each(e,function(e){var r=e.getChildByName("node_label");r&&(r.visible=t)})},x.prototype.hideElement=function(t){if(t instanceof c.Edge&&(t.visible=!1),t instanceof g.Node&&(t.visible=!1,o.each(t.linksArray,function(t){t.visible=!1}),o.each(t.includedGroups,function(t){t.draw()})),t instanceof p.Group){t.visible=!1;var e=t.intersection()[1];o.each(e,function(t){t.visible=!1})}},x.prototype.showElement=function(t){if(t instanceof c.Edge&&(t.visible=!0),t instanceof g.Node&&(t.visible=!0,o.each(t.linksArray,function(t){t.startNode.visible&&t.endNode.visible&&(t.visible=!0)}),o.each(t.includedGroups,function(t){t.draw()})),t instanceof p.Group){t.visible=!0;var e=t.intersection()[1];o.each(e,function(t){t.visible=!0})}},x.prototype.getEdgeBundles=function(){var t=this.getElements(),e=[];return o.each(t,function(t){t instanceof d.EdgeBundle&&e.push(t)}),e},x.prototype.reDraw=function(){var t=this.getElements();t=o.filter(t,function(t){return!(t instanceof g.Node)});var e=[g.Node,c.Edge,d.EdgeBundle,p.Group,f.EdgeGroup,u.DataFlow,y.MultipleColorLine];t.sort(function(t,r){return o.indexOf(e,t.constructor)-o.indexOf(e,r.constructor)}),o.each(t,function(t){t.draw()})},x.prototype.toggleLabel=function(t,e){this.nodeLabel=t,this.edgeLabel=e,this.zoom<t?this.nodeLabelToggle(!1):this.nodeLabelToggle(!0),this.zoom<e?this.edgeLabelToggle(!1):this.edgeLabelToggle(!0)},x.prototype.moveTopology=function(t,e,r,i){var n=s.default.times(e,s.default.minus(1,t)),a=s.default.times(r,s.default.minus(1,t)),h=this.getNodeObj();o.each(h,function(t){t.position.set(t.x+n,t.y+a)}),i&&this.reDraw()},x.prototype.analyzeInWrapperNodes=function(){var t=document.getElementById(this.domRegex),e=this.getNodeObj(),r=[];if(t){var i=t.offsetTop,n=t.offsetLeft,s=t.offsetTop+t.offsetHeight,a=t.offsetLeft+t.offsetWidth;o.each(e,function(t){var e=t.x+n,o=t.y+i;e<a&&n<e&&o<s&&i<o&&r.push(t)})}return r},x.prototype.moveToCenter=function(t){var e=this.getCenter(),r=this.getNodeObj(),i=e.x-t.x,n=e.y-t.y;o.each(r,function(t){t.x=t.x+i,t.y=t.y+n})},x.prototype.getNodeLinks=function(t){var e=this.getAllEdges();return o.filter(e,function(e){return e.startNode.id===t.id||e.endNode.id===t.id})},x.prototype.getNetworkSize=function(){var t=document.getElementById(this.domRegex);if(t)return[t.offsetWidth,t.offsetHeight]},x.prototype.zoomElements=function(t){var e=this.getNodeObj(),r=s.default.divide(t,this.zoom);o.each(e,function(t){t.position.set(s.default.times(t.x,r),s.default.times(t.y,r))}),this.zoom=t},x.prototype.drawNode=function(t){t.getChildByName("node_border")&&t.selectOn()},x.prototype.analyzeZoom=function(){var t,e,r,i=this.app.getWrapperBoundings(),n=this.getNodeObj(),s=this.getIsOutsideGroup(),a=this.getCenter();if(s)t=Math.abs(s.width/i[0]),r=(e=Math.abs(s.height/i[1]))<t?t:e;else{var h=a.x,u=a.x,l=a.y,c=a.y,d=0,f=0;0!==o.size(n)&&(h=u=this.getNodes()[0].x,l=c=this.getNodes()[0].y),o.each(n,function(t){if(t.visible){var e=t.x,r=t.y,i=t.getWidth(),n=t.getHeight();h=e<h?h:e,u=u<e?u:e,l=r<l?l:r,c=c<r?c:r,d=i<d?d:i,f=n<f?f:n}});var p=f<d?d:f;t=Math.abs((h-u+p)/i[0]),r=(e=Math.abs((l-c+p)/i[1]))<t?t:e}return 1/r},x.prototype.getIsOutsideGroup=function(){var t=this.getNodeObj(),e=this.getGroupObj();return o.find(e,function(e){return e.getChildNodes().length===o.size(t)})},x.prototype.disableContextMenu=function(t){var e=document.getElementById(t);e&&e.addEventListener("contextmenu",function(t){t.preventDefault()})},x.prototype.vertexPoints=function(){var t=this.getNodeObj(),e=[];return o.each(t,function(t){e.push({x:t.x,y:t.y})}),o.map(e,function(t){return o.values(t)})},x);function x(t){this.pointNum=300,this.nodeLabel=0,this.edgeLabel=0,PIXI.utils.skipHello(),s.default.enableBoundaryChecking(!1),this.domRegex=t,this.topo=new m.Topo(t),this.drawer=new l.Drawer(t,this.topo),this.app=this.drawer.getWhiteBoard(),this.action=new h.CommonAction(this.app,this.topo,t),this.menu=new v.PopMenu(t,this.app,this.action),this.zoom=1,this.isSelect=!1,this.disableContextMenu(t)}e.Network=_},function(t,e,r){"use strict";function i(t,e){return void 0===e&&(e=12),+parseFloat(t.toPrecision(e))}function n(t){var e=t.toString().split(/[eE]/),r=(e[0].split(".")[1]||"").length-+(e[1]||0);return 0<r?r:0}function o(t){if(-1===t.toString().indexOf("e"))return Number(t.toString().replace(".",""));var e=n(t);return 0<e?i(t*Math.pow(10,e)):t}function s(t){d&&(t>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)&&console.warn(t+" is beyond boundary when transfer to integer, the results may not be accurate")}function a(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(0<r.length)return a.apply(void 0,[a(t,e),r[0]].concat(r.slice(1)));var h=o(t),u=o(e),l=n(t)+n(e),c=h*u;return s(c),c/Math.pow(10,l)}function h(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(0<r.length)return h.apply(void 0,[h(t,e),r[0]].concat(r.slice(1)));var o=Math.pow(10,Math.max(n(t),n(e)));return(a(t,o)+a(e,o))/o}function u(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(0<r.length)return u.apply(void 0,[u(t,e),r[0]].concat(r.slice(1)));var o=Math.pow(10,Math.max(n(t),n(e)));return(a(t,o)-a(e,o))/o}function l(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(0<r.length)return l.apply(void 0,[l(t,e),r[0]].concat(r.slice(1)));var h=o(t),u=o(e);return s(h),s(u),a(h/u,Math.pow(10,n(e)-n(t)))}function c(t,e){var r=Math.pow(10,e);return l(Math.round(a(t,r)),r)}Object.defineProperty(e,"__esModule",{value:!0});var d=!0;function f(t){void 0===t&&(t=!0),d=t}var p={strip:i,plus:h,minus:u,times:a,divide:l,round:c,digitLength:n,float2Fixed:o,enableBoundaryChecking:f};e.strip=i,e.plus=h,e.minus=u,e.times=a,e.divide=l,e.round=c,e.digitLength=n,e.float2Fixed=o,e.enableBoundaryChecking=f,e.default=p},function(t,e){!function e(r,i,n){var o=function(t){return"[object Array]"===Object.prototype.toString.call(t)};function s(t,e){if(!(this instanceof s))return new s(t,e);o(t)?(e=t[1],t=t[0]):"object"==typeof t&&t&&(e=t.y,t=t.x),this.x=s.clean(t||0),this.y=s.clean(e||0)}s.prototype={change:function(t){if("function"==typeof t)this.observers?this.observers.push(t):this.observers=[t];else if(this.observers&&this.observers.length)for(var e=this.observers.length-1;0<=e;e--)this.observers[e](this,t);return this},ignore:function(t){if(this.observers)if(t)for(var e=this.observers,r=e.length;r--;)e[r]===t&&e.splice(r,1);else this.observers=[];return this},set:function(t,e,r){if("number"!=typeof t&&(r=e,e=t.y,t=t.x),this.x===t&&this.y===e)return this;var i=null;return!1!==r&&this.observers&&this.observers.length&&(i=this.clone()),this.x=s.clean(t),this.y=s.clean(e),!1!==r?this.change(i):void 0},zero:function(){return this.set(0,0)},clone:function(){return new this.constructor(this.x,this.y)},negate:function(t){return t?new this.constructor(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(t,e,r){return"number"!=typeof t&&(r=e,t=o(t)?(e=t[1],t[0]):(e=t.y,t.x)),t+=this.x,e+=this.y,r?new this.constructor(t,e):this.set(t,e)},subtract:function(t,e,r){return"number"!=typeof t&&(r=e,t=o(t)?(e=t[1],t[0]):(e=t.y,t.x)),t=this.x-t,e=this.y-e,r?new this.constructor(t,e):this.set(t,e)},multiply:function(t,e,r){return"number"!=typeof t?(r=e,t=o(t)?(e=t[1],t[0]):(e=t.y,t.x)):"number"!=typeof e&&(r=e,e=t),t*=this.x,e*=this.y,r?new this.constructor(t,e):this.set(t,e)},rotate:function(t,e,r){var i,n,o=this.x,s=this.y,a=Math.cos(t),h=Math.sin(t);return i=a*o-(e=e?-1:1)*h*s,n=e*h*o+a*s,r?new this.constructor(i,n):this.set(i,n)},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},lengthSquared:function(){var t=this.x,e=this.y;return t*t+e*e},distance:function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},nearest:function(t){for(var e,r=Number.MAX_VALUE,i=null,n=t.length-1;0<=n;n--)(e=this.distance(t[n]))<=r&&(r=e,i=t[n]);return i},normalize:function(t){var e=this.length(),r=e<Number.MIN_VALUE?0:1/e;return t?new this.constructor(this.x*r,this.y*r):this.set(this.x*r,this.y*r)},equal:function(t,e){return"number"!=typeof t&&(t=o(t)?(e=t[1],t[0]):(e=t.y,t.x)),s.clean(t)===this.x&&s.clean(e)===this.y},abs:function(t){var e=Math.abs(this.x),r=Math.abs(this.y);return t?new this.constructor(e,r):this.set(e,r)},min:function(t,e){var r=this.x,i=this.y,n=t.x,o=t.y,s=r<n?r:n,a=i<o?i:o;return e?new this.constructor(s,a):this.set(s,a)},max:function(t,e){var r=this.x,i=this.y,n=t.x,o=t.y,s=n<r?r:n,a=o<i?i:o;return e?new this.constructor(s,a):this.set(s,a)},clamp:function(t,e,r){var i=this.min(e,!0).max(t);return r?i:this.set(i.x,i.y)},lerp:function(t,e,r){return this.add(t.subtract(this,!0).multiply(e),r)},skew:function(t){return t?new this.constructor(-this.y,this.x):this.set(-this.y,this.x)},dot:function(t){return s.clean(this.x*t.x+t.y*this.y)},perpDot:function(t){return s.clean(this.x*t.y-this.y*t.x)},angleTo:function(t){return Math.atan2(this.perpDot(t),this.dot(t))},divide:function(t,e,r){if("number"!=typeof t?(r=e,t=o(t)?(e=t[1],t[0]):(e=t.y,t.x)):"number"!=typeof e&&(r=e,e=t),0===t||0===e)throw new Error("division by zero");if(isNaN(t)||isNaN(e))throw new Error("NaN detected");return r?new this.constructor(this.x/t,this.y/e):this.set(this.x/t,this.y/e)},isPointOnLine:function(t,e){return(t.y-this.y)*(t.x-e.x)==(t.y-e.y)*(t.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(t){return this.set(t[0],t[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"},constructor:s},s.fromArray=function(t,e){return new(e||s)(t[0],t[1])},s.precision=i||8;var a=Math.pow(10,s.precision);return s.clean=r||function(t){if(isNaN(t))throw new Error("NaN detected");if(!isFinite(t))throw new Error("Infinity detected");return Math.round(t)===t?t:Math.round(t*a)/a},s.inject=e,r||(s.fast=e(function(t){return t}),void 0!==t&&"object"==typeof t.exports?t.exports=s:window.Vec2=window.Vec2||s),s}()},function(t,e,r){function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function n(t,e){return u(t)?t:e}function o(t){return t!==1/0&&t!==-1/0}function s(t,e,r,i){return t*i-e*r}var a=r(114),h=r(32),u=function(t){return void 0!==t};function l(t,e,r,i){return this._listeners=[],this instanceof l?u(r)&&u(i)?l.fromPoints(t,e,r,i):(u(t)&&this.slope(t),void(u(e)&&this.yintercept(e))):new l(t,e,r,i)}l.prototype._yintercept=null,l.prototype._xintercept=null,l.prototype._slope=null,l.prototype.change=function(t){if("function"==typeof t)return this._listeners.push(t),t},l.prototype.ignore=function(t){this._listeners=t?this._listeners.filter(function(e){return e!==t}):[]},l.prototype.notify=function(t){for(var e=this._listeners,r=e.length,i=0;i<r;i++)e[i](this)},l.prototype.yintercept=function(t){return u(t)&&(o(t)&&(t=a.clean(t)),this._yintercept!==t&&(this._yintercept=t,this.isHorizontal()||(this._xintercept=this.solveForX(0)),this.notify())),n(this._yintercept,null)},l.prototype.xintercept=function(t){if(u(t)&&(o(t)&&(t=a.clean(t)),this._xintercept!==t)){if(!this.isVertical()){var e=this._xintercept-t;this._yintercept-=e*-this._slope}this._xintercept=t,this.notify()}return n(this._xintercept,null)},l.prototype.slope=function(t){if(u(t)&&(o(t)&&(t=a.clean(t)),this._slope!==t)){var e=this._slope;if(this._slope=t,null!==e){var r=this.solveForX(0);o(r)||(r=null),this._xintercept=r}this.notify()}return n(this._slope,null)},l.prototype.intersectSegment=function(t,e,r,i){var n,o,s,u,l,c=r-t,d=i-e,f=this.isHorizontal(),p=this.isVertical();if(0==c){if(p)return t===this.xintercept()}else if(0==d){if(f)return e===this.yintercept()}else if(d/c===this.slope())return e===this.solveForY(t);if(s=r<t?(n=r-10,t+10):(n=t-10,r+10),this.isHorizontal())y=this.yintercept(),l=h(n,y,s,y,t,e,r,i);else if(this.isVertical()){u=i<e?(o=i-10,e+10):(o=e-10,i+10);var g=this.xintercept();l=h(g,o,g,u,t,e,r,i)}else o=this.solveForY(n),u=this.solveForY(s),l=h(n,o,s,u,t,e,r,i);return l&&!0!==l?a.fromArray(l):l},l.prototype.createPerpendicular=function(t){if(this.isVertical())return new l(0,t.y);if(this.isHorizontal()){var e=new l;return e.xintercept(t.x),e.slope(1/0),e}var r=-1/this.slope();return new l(r,t.y-r*t.x)},l.prototype.intersectCircle=function(t,e){var r,i,n,o,s=e*e,h=this.slope(),u=this.yintercept();i=this.isHorizontal()?(r=1,0):this.isVertical()?(u=s,r=0,h=e):(r=1/h,1);var l=this.isVertical()?this.xintercept():1,c=u+h,d=r*r,f=i*i,p=r*(t.y-c)-i*(t.x-l);p*=p;var y=d+f,g=Math.sqrt(s*(d+f)-p);if(isNaN(g))return[];g/=y;var v=r*(t.x-l)+i*(t.y-c),m=v/y+g,_=v/y-g;n=new a(l+m*r,c+m*i),o=new a(l+_*r,c+_*i);var x=[n];return n.equal(o)||x.push(o),x},l.prototype.solveForX=function(t){return this.isVertical()?this.xintercept():(t-this.yintercept())/this.slope()},l.prototype.solveForY=function(t){return this.isHorizontal()?this.yintercept():this.slope()*t+this.yintercept()},l.prototype.intersect=function(t,e,r,i){if(u(e)&&u(i)||u(t.end))return this.intersectSegment(t,e,r,i);var n=this.slope(),h=t.slope();if(n===h)return this.yintercept()===t.yintercept()&&this.xintercept()===t.xintercept();if(o(n)&&o(h)){if(this.isHorizontal())return new a(t.solveForX(this.yintercept()),this.yintercept());if(t.isHorizontal())return new a(this.solveForX(t.yintercept()),t.yintercept());var l=t.solveForX(-1);e=t.solveForY(l),r=t.solveForX(1),i=t.solveForY(r);var c=this.solveForX(-1),d=this.solveForY(c),f=this.solveForX(1),p=this.solveForY(f),y=s(l,e,r,i),g=s(c,d,f,p),v=s(y,l-r,g,c-f),m=s(y,e-i,g,d-p),_=s(l-r,e-i,c-f,d-p);return a(v/_,m/_)}var x,b,w=this.xintercept()||t.xintercept();return b=o(n)?(x=n,this.yintercept()):(x=h,t.yintercept()),a(w,0!==x?w*x+b:b)},l.fromPoints=function(t,e,r,n){i(e)?(n=e[1],r=e[0]):u(e)&&u(e.x)&&u(e.y)&&(n=e.y,r=e.x),i(t)?(e=t[1],t=t[0]):u(t)&&u(t.x)&&u(t.y)&&(e=t.y,t=t.x);var o=new l,s=(n-e)/(r-t);return o.slope(s),o.isHorizontal()?o.yintercept(e):o.isVertical()?o.xintercept(r):o.yintercept(e-s*t),o},l.prototype.isHorizontal=function(){return!this.slope()},l.prototype.isVertical=function(){return!o(this.slope())},l.prototype.closestPointTo=function(t){var e=this.yintercept(),r=this.xintercept();return this.slope(),this.isHorizontal()?a(t.x,e):this.isVertical()?a(r,t.y):this.intersect(this.createPerpendicular(t))},l.prototype.containsPoint=function(t,e){var r=t;return u(e)||(e=t.y,r=t.x),this.isHorizontal()?e===this.yintercept():this.isVertical()?r===this.xintercept():e===this.solveForY(r)},void 0!==t&&"object"==typeof t.exports&&(t.exports=l),"undefined"!=typeof window&&(window.Line2=window.Line2||l)},function(t,e){!function e(r,i,n){function o(t,e){return this instanceof o?"object"==typeof t&&t?(this.y=t.y||0,void(this.x=t.x||0)):(this.x=o.clean(t||0),void(this.y=o.clean(e||0))):new o(t,e)}o.prototype={change:function(t){if(t)this.observers?this.observers.push(t):this.observers=[t];else if(this.observers)for(var e=this.observers.length-1;0<=e;e--)this.observers[e](this);return this},ignore:function(t){if(this.observers)for(var e=this.observers,r=e.length;r--;)e[r]===t&&e.splice(r,1);return this},set:function(t,e,r){return"number"!=typeof t&&(r=e,e=t.y,t=t.x),this.x===t&&this.y===e?this:(this.x=o.clean(t),this.y=o.clean(e),!1!==r?this.change():void 0)},zero:function(){return this.set(0,0)},clone:function(){return new o(this.x,this.y)},negate:function(t){return t?new o(-this.x,-this.y):this.set(-this.x,-this.y)},add:function(t,e){return e?new o(this.x+t.x,this.y+t.y):(this.x+=t.x,this.y+=t.y,this.change())},subtract:function(t,e){return e?new o(this.x-t.x,this.y-t.y):(this.x-=t.x,this.y-=t.y,this.change())},multiply:function(t,e){var r,i;return"number"!=typeof t?(r=t.x,i=t.y):r=i=t,e?new o(this.x*r,this.y*i):this.set(this.x*r,this.y*i)},rotate:function(t,e,r){var i,n,s=this.x,a=this.y,h=Math.cos(t),u=Math.sin(t);return i=h*s-(e=e?-1:1)*u*a,n=e*u*s+h*a,r?new o(i,n):this.set(i,n)},length:function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},lengthSquared:function(){var t=this.x,e=this.y;return t*t+e*e},distance:function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},normalize:function(t){var e=this.length(),r=e<Number.MIN_VALUE?0:1/e;return t?new o(this.x*r,this.y*r):this.set(this.x*r,this.y*r)},equal:function(t,e){return e===n&&(e=t.y,t=t.x),o.clean(t)===this.x&&o.clean(e)===this.y},abs:function(t){var e=Math.abs(this.x),r=Math.abs(this.y);return t?new o(e,r):this.set(e,r)},min:function(t,e){var r=this.x,i=this.y,n=t.x,s=t.y,a=r<n?r:n,h=i<s?i:s;return e?new o(a,h):this.set(a,h)},max:function(t,e){var r=this.x,i=this.y,n=t.x,s=t.y,a=n<r?r:n,h=s<i?i:s;return e?new o(a,h):this.set(a,h)},clamp:function(t,e,r){var i=this.min(e,!0).max(t);return r?i:this.set(i.x,i.y)},lerp:function(t,e){return this.add(t.subtract(this,!0).multiply(e),!0)},skew:function(){return new o(-this.y,this.x)},dot:function(t){return o.clean(this.x*t.x+t.y*this.y)},perpDot:function(t){return o.clean(this.x*t.y-this.y*t.x)},angleTo:function(t){return Math.atan2(this.perpDot(t),this.dot(t))},divide:function(t,e){var r,i;if("number"!=typeof t?(r=t.x,i=t.y):r=i=t,0===r||0===i)throw new Error("division by zero");if(isNaN(r)||isNaN(i))throw new Error("NaN detected");return e?new o(this.x/r,this.y/i):this.set(this.x/r,this.y/i)},isPointOnLine:function(t,e){return(t.y-this.y)*(t.x-e.x)==(t.y-e.y)*(t.x-this.x)},toArray:function(){return[this.x,this.y]},fromArray:function(t){return this.set(t[0],t[1])},toJSON:function(){return{x:this.x,y:this.y}},toString:function(){return"("+this.x+", "+this.y+")"}},o.fromArray=function(t){return new o(t[0],t[1])},o.precision=i||8;var s=Math.pow(10,o.precision);return o.clean=r||function(t){if(isNaN(t))throw new Error("NaN detected");if(!isFinite(t))throw new Error("Infinity detected");return Math.round(t)===t?t:Math.round(t*s)/s},o.inject=e,r||(o.fast=e(function(t){return t}),void 0!==t&&"object"==typeof t.exports?t.exports=o:window.Vec2=window.Vec2||o),o}()},function(t,e,r){var i=r(32),n=r(116),o=r(123),s=r(124),a=Math.abs;function h(t){for(var e=t.length,r=new Array(e),i=0;i<e;i++)r[i]=t[i].slice();return r}function u(t,e,r){this.vec=t,this.alpha=e||0,this.intersect=!!r}function l(t){for(var e,r,i=t.length,n=0;n<i;n++){var o=t[n];r=e?(r.next=new u(o),(r.next.prev=r).next):e=new u(o)}return e}function c(t,e){var r=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(r*r+i*i)}function d(t){for(var e=t.length-1;e--;){var r=t[e],i=t[e+1];r[0]===i[0]&&r[1]===i[1]&&t.splice(e,1)}return t}u.prototype={vec:null,next:null,next:null,prev:null,nextPoly:null,neighbor:null,intersect:null,entry:null,visited:!1,alpha:0,nextNonIntersection:function(){for(var t=this;t&&t.intersect;)t=t.next;return t},last:function(){for(var t=this;t.next&&t.next!==this;)t=t.next;return t},createLoop:function(){var t=this.last();(t.prev.next=this).prev=t.prev},firstNodeOfInterest:function(){var t=this;if(t)for(;(t=t.next)!==this&&(!t.intersect||t.intersect&&t.visited););return t},insertBetween:function(t,e){for(var r=t;r!==e&&r.alpha<this.alpha;)r=r.next;this.next=r,this.prev=r.prev,this.prev&&(this.prev.next=this),this.next.prev=this}},t.exports=function(t,e,r){var f,p=l(t),y=l(e),g=n([e]),v=n([t]);if(function(t,e){var r,n,o=t.last();o.next=new u(t.vec,o),o.next.prev=o;var s=e.last();s.next=new u(e.vec,s),s.next.prev=s;var a=!1;for(r=t;r.next;r=r.next)if(!r.intersect)for(n=e;n.next;n=n.next)if(!n.intersect){var h=r.vec,l=r.next.nextNonIntersection().vec,d=n.vec,f=n.next.nextNonIntersection().vec,p=i(h,l,d,f);if(p&&!0!==p){a=!0;var y=new u(p,c(h,p)/c(h,l),!0),g=new u(p,c(d,p)/c(d,f),!0);((y.neighbor=g).neighbor=y).insertBetween(r,r.next.nextNonIntersection()),g.insertBetween(n,n.next.nextNonIntersection())}}return a}(p,y))!function(t,e,r,i,n){var o,s,a=r(t.vec)<0;for("and"===n&&(a=!a),o=t;o.next;o=o.next)o.intersect&&(a=!(o.entry=a));var h=0<i(e.vec);for("or"===n&&(h=!h),s=e;s.next;s=s.next)s.intersect&&(h=!(s.entry=h))}(p,y,g,v,r),f=function(t,e){t.createLoop(),e.createLoop();for(var r,i,n=[];(r=t.firstNodeOfInterest())!==t;){for(i=[];!r.visited;r=r.neighbor){i.push(r.vec);for(var o=r.entry;;){if(r.visited=!0,(r=o?r.next:r.prev).intersect){r.visited=!0;break}i.push(r.vec)}}n.push(d(i))}return n}(p,y);else{var m=g(t[0])<0,_=v(e[0])<0;switch(f=[],r){case"or":m||_?m?f.push(h(e)):_&&f.push(h(t)):(f.push(h(t)),f.push(h(e)));break;case"and":if(m)f.push(h(t));else{if(!_)throw new Error("woops");f.push(h(e))}break;case"not":var x=h(t),b=h(e),w=o(x),T=o(b);s(w)===s(T)&&(_?b.reverse():m&&x.reverse()),f.push(x),a(w)>a(T)?f.push(b):f.unshift(b)}}return f}},function(t,e,r){"use strict";t.exports=function(t,e){e=!!e;for(var r=t.length,s=0,a=0;a<r;++a)s+=t[a].length;if(0===s)return o;var h=new Array(s),u=0;for(a=0;a<r;++a)for(var l=t[a],c=l.length,d=c-1,f=0;f<c;d=f++)h[u++]=[l[d],l[f]];var p,y=n(h),g=y.slabs[0];if(g){for(;g.left;)g=g.left;var v=g.key;p=v[0][0]<v[1][0]?-1:1}else p=(v=h[y.horizontal[0][0].index])[0][1]<v[1][1]?1:-1;return e&&(p=-p),function(t,e,r,n){return function(o){var s=e.castUp(o);if(s<0)return r;var a=t[s];return n?i(o,a[1],a[0]):i(o,a[0],a[1])}}(h,y,p,e)};var i=r(24),n=r(119);function o(t){return-1}},function(t,e,r){"use strict";t.exports=function(t,e,r){var i=t+e,n=i-t,o=e-n,s=t-(i-n);return r?(r[0]=s+o,r[1]=i,r):[s+o,i]}},function(t,e,r){"use strict";t.exports=function(t,e){var r=0|t.length,i=0|e.length;if(1==r&&1==i)return function(t,e){var r=t+e,i=r-t,n=t-(r-i)+(e-i);return n?[n,r]:[r]}(t[0],-e[0]);var n,o,s=new Array(r+i),a=0,h=0,u=0,l=Math.abs,c=t[h],d=l(c),f=-e[u],p=l(f);d<p?(o=c,(h+=1)<r&&(d=l(c=t[h]))):(o=f,(u+=1)<i&&(p=l(f=-e[u]))),h<r&&d<p||i<=u?(n=c,(h+=1)<r&&(d=l(c=t[h]))):(n=f,(u+=1)<i&&(p=l(f=-e[u])));for(var y,g,v=n+o,m=v-n,_=o-m,x=_,b=v;h<r&&u<i;)d<p?(n=c,(h+=1)<r&&(d=l(c=t[h]))):(n=f,(u+=1)<i&&(p=l(f=-e[u]))),(_=(o=x)-(m=(v=n+o)-n))&&(s[a++]=_),x=b-((y=b+v)-(g=y-b))+(v-g),b=y;for(;h<r;)(_=(o=x)-(m=(v=(n=c)+o)-n))&&(s[a++]=_),x=b-((y=b+v)-(g=y-b))+(v-g),b=y,(h+=1)<r&&(c=t[h]);for(;u<i;)(_=(o=x)-(m=(v=(n=f)+o)-n))&&(s[a++]=_),x=b-((y=b+v)-(g=y-b))+(v-g),b=y,(u+=1)<i&&(f=-e[u]);return x&&(s[a++]=x),b&&(s[a++]=b),a||(s[a++]=0),s.length=a,s}},function(t,e,r){"use strict";t.exports=function(t){for(var e=t.length,r=2*e,i=new Array(r),o=0;o<e;++o){var h=t[o],u=h[0][0]<h[1][0];i[2*o]=new c(h[0][0],h,u,o),i[2*o+1]=new c(h[1][0],h,!u,o)}i.sort(function(t,e){var r=t.x-e.x;return r||(r=t.create-e.create)||Math.min(t.segment[0][1],t.segment[1][1])-Math.min(e.segment[0][1],e.segment[1][1])});var d=n(s),f=[],p=[],y=[];for(o=0;o<r;){for(var g=i[o].x,v=[];o<r;){var m=i[o];if(m.x!==g)break;o+=1,m.segment[0][0]===m.x&&m.segment[1][0]===m.x?m.create&&(m.segment[0][1]<m.segment[1][1]?(v.push(new l(m.segment[0][1],m.index,!0,!0)),v.push(new l(m.segment[1][1],m.index,!1,!1))):(v.push(new l(m.segment[1][1],m.index,!0,!1)),v.push(new l(m.segment[0][1],m.index,!1,!0)))):d=m.create?d.insert(m.segment,m.index):d.remove(m.segment)}f.push(d.root),p.push(g),y.push(v)}return new a(f,p,y)};var i=r(120),n=r(121),o=r(24),s=r(122);function a(t,e,r){this.slabs=t,this.coordinates=e,this.horizontal=r}function h(t,e){return t.y-e}function u(t,e){for(var r=null;t;){var i,n,s=t.key;n=s[0][0]<s[1][0]?(i=s[0],s[1]):(i=s[1],s[0]);var a=o(i,n,e);if(a<0)t=t.left;else if(0<a)if(e[0]!==s[1][0])t=(r=t).right;else{if(h=u(t.right,e))return h;t=t.left}else{if(e[0]!==s[1][0])return t;var h;if(h=u(t.right,e))return h;t=t.left}}return r}function l(t,e,r,i){this.y=t,this.index=e,this.start=r,this.closed=i}function c(t,e,r,i){this.x=t,this.segment=e,this.create=r,this.index=i}a.prototype.castUp=function(t){var e=i.le(this.coordinates,t[0]);if(e<0)return-1;this.slabs[e];var r=u(this.slabs[e],t),n=-1;if(r&&(n=r.value),this.coordinates[e]===t[0]){var a=null;if(r&&(a=r.key),0<e){var l=u(this.slabs[e-1],t);l&&(a?0<s(l.key,a)&&(a=l.key,n=l.value):(n=l.value,a=l.key))}var c=this.horizontal[e];if(0<c.length){var d=i.ge(c,t[1],h);if(d<c.length){var f=c[d];if(t[1]===f.y){if(f.closed)return f.index;for(;d<c.length-1&&c[d+1].y===t[1];)if((f=c[d+=1]).closed)return f.index;if(f.y===t[1]&&!f.start){if((d+=1)>=c.length)return n;f=c[d]}}if(f.start)if(a){var p=o(a[0],a[1],[t[0],f.y]);a[0][0]>a[1][0]&&(p=-p),0<p&&(n=f.index)}else n=f.index;else f.y!==t[1]&&(n=f.index)}}}return n}},function(t,e,r){"use strict";function i(t,e,r,i,n,o){var s=["function ",t,"(a,l,h,",i.join(","),"){",o?"":"var i=",r?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a",n?".get(m)":"[m]"];return o?e.indexOf("c")<0?s.push(";if(x===y){return m}else if(x<=y){"):s.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){"):s.push(";if(",e,"){i=m;"),r?s.push("l=m+1}else{h=m-1}"):s.push("h=m-1}else{l=m+1}"),s.push("}"),o?s.push("return -1};"):s.push("return i};"),s.join("")}function n(t,e,r,n){return new Function([i("A","x"+t+"y",e,["y"],!1,n),i("B","x"+t+"y",e,["y"],!0,n),i("P","c(x,y)"+t+"0",e,["y","c"],!1,n),i("Q","c(x,y)"+t+"0",e,["y","c"],!0,n),"function dispatchBsearch",r,"(a,y,c,l,h){if(a.shape){if(typeof(c)==='function'){return Q(a,(l===undefined)?0:l|0,(h===undefined)?a.shape[0]-1:h|0,y,c)}else{return B(a,(c===undefined)?0:c|0,(l===undefined)?a.shape[0]-1:l|0,y)}}else{if(typeof(c)==='function'){return P(a,(l===undefined)?0:l|0,(h===undefined)?a.length-1:h|0,y,c)}else{return A(a,(c===undefined)?0:c|0,(l===undefined)?a.length-1:l|0,y)}}}return dispatchBsearch",r].join(""))()}t.exports={ge:n(">=",!1,"GE"),gt:n(">",!1,"GT"),lt:n("<",!0,"LT"),le:n("<=",!0,"LE"),eq:n("-",!0,"EQ",!0)}},function(t,e,r){"use strict";function i(t,e,r,i,n,o){this._color=t,this.key=e,this.value=r,this.left=i,this.right=n,this._count=o}function n(t){return new i(t._color,t.key,t.value,t.left,t.right,t._count)}function o(t,e){return new i(t,e.key,e.value,e.left,e.right,e._count)}function s(t){t._count=1+(t.left?t.left._count:0)+(t.right?t.right._count:0)}function a(t,e){this._compare=t,this.root=e}t.exports=function(t){return new a(t||d,null)};var h=a.prototype;function u(t,e){this.tree=t,this._stack=e}Object.defineProperty(h,"keys",{get:function(){var t=[];return this.forEach(function(e,r){t.push(e)}),t}}),Object.defineProperty(h,"values",{get:function(){var t=[];return this.forEach(function(e,r){t.push(r)}),t}}),Object.defineProperty(h,"length",{get:function(){return this.root?this.root._count:0}}),h.insert=function(t,e){for(var r=this._compare,n=this.root,h=[],u=[];n;){var l=r(t,n.key);h.push(n),u.push(l),n=l<=0?n.left:n.right}h.push(new i(0,t,e,null,null,1));for(var c=h.length-2;0<=c;--c)n=h[c],u[c]<=0?h[c]=new i(n._color,n.key,n.value,h[c+1],n.right,n._count+1):h[c]=new i(n._color,n.key,n.value,n.left,h[c+1],n._count+1);for(c=h.length-1;1<c;--c){var d=h[c-1];if(n=h[c],1===d._color||1===n._color)break;var f=h[c-2];if(f.left===d)if(d.left===n){if(!(p=f.right)||0!==p._color){f._color=0,f.left=d.right,d._color=1,d.right=f,h[c-2]=d,h[c-1]=n,s(f),s(d),3<=c&&((y=h[c-3]).left===f?y.left=d:y.right=d);break}d._color=1,f.right=o(1,p),f._color=0,c-=1}else{if(!(p=f.right)||0!==p._color){d.right=n.left,f._color=0,f.left=n.right,n._color=1,n.left=d,n.right=f,h[c-2]=n,h[c-1]=d,s(f),s(d),s(n),3<=c&&((y=h[c-3]).left===f?y.left=n:y.right=n);break}d._color=1,f.right=o(1,p),f._color=0,c-=1}else if(d.right===n){if(!(p=f.left)||0!==p._color){f._color=0,f.right=d.left,d._color=1,d.left=f,h[c-2]=d,h[c-1]=n,s(f),s(d),3<=c&&((y=h[c-3]).right===f?y.right=d:y.left=d);break}d._color=1,f.left=o(1,p),f._color=0,c-=1}else{var p;if(!(p=f.left)||0!==p._color){var y;d.left=n.right,f._color=0,f.right=n.left,n._color=1,n.right=d,n.left=f,h[c-2]=n,h[c-1]=d,s(f),s(d),s(n),3<=c&&((y=h[c-3]).right===f?y.right=n:y.left=n);break}d._color=1,f.left=o(1,p),f._color=0,c-=1}}return h[0]._color=1,new a(r,h[0])},h.forEach=function(t,e,r){if(this.root)switch(arguments.length){case 1:return function t(e,r){var i;return r.left&&(i=t(e,r.left))?i:(i=e(r.key,r.value))||(r.right?t(e,r.right):void 0)}(t,this.root);case 2:return function t(e,r,i,n){if(r(e,n.key)<=0){var o;if(n.left&&(o=t(e,r,i,n.left)))return o;if(o=i(n.key,n.value))return o}if(n.right)return t(e,r,i,n.right)}(e,this._compare,t,this.root);case 3:if(0<=this._compare(e,r))return;return function t(e,r,i,n,o){var s,a=i(e,o.key),h=i(r,o.key);if(a<=0){if(o.left&&(s=t(e,r,i,n,o.left)))return s;if(0<h&&(s=n(o.key,o.value)))return s}if(0<h&&o.right)return t(e,r,i,n,o.right)}(e,r,this._compare,t,this.root)}},Object.defineProperty(h,"begin",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.left;return new u(this,t)}}),Object.defineProperty(h,"end",{get:function(){for(var t=[],e=this.root;e;)t.push(e),e=e.right;return new u(this,t)}}),h.at=function(t){if(t<0)return new u(this,[]);for(var e=this.root,r=[];;){if(r.push(e),e.left){if(t<e.left._count){e=e.left;continue}t-=e.left._count}if(!t)return new u(this,r);if(t-=1,!e.right)break;if(t>=e.right._count)break;e=e.right}return new u(this,[])},h.ge=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),o<=0&&(n=i.length),r=o<=0?r.left:r.right}return i.length=n,new u(this,i)},h.gt=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),o<0&&(n=i.length),r=o<0?r.left:r.right}return i.length=n,new u(this,i)},h.lt=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),0<o&&(n=i.length),r=o<=0?r.left:r.right}return i.length=n,new u(this,i)},h.le=function(t){for(var e=this._compare,r=this.root,i=[],n=0;r;){var o=e(t,r.key);i.push(r),0<=o&&(n=i.length),r=o<0?r.left:r.right}return i.length=n,new u(this,i)},h.find=function(t){for(var e=this._compare,r=this.root,i=[];r;){var n=e(t,r.key);if(i.push(r),0===n)return new u(this,i);r=n<=0?r.left:r.right}return new u(this,[])},h.remove=function(t){var e=this.find(t);return e?e.remove():this},h.get=function(t){for(var e=this._compare,r=this.root;r;){var i=e(t,r.key);if(0===i)return r.value;r=i<=0?r.left:r.right}};var l=u.prototype;function c(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t._color=e._color,t._count=e._count}function d(t,e){return t<e?-1:e<t?1:0}Object.defineProperty(l,"valid",{get:function(){return 0<this._stack.length}}),Object.defineProperty(l,"node",{get:function(){return 0<this._stack.length?this._stack[this._stack.length-1]:null},enumerable:!0}),l.clone=function(){return new u(this.tree,this._stack.slice())},l.remove=function(){var t=this._stack;if(0===t.length)return this.tree;var e=new Array(t.length),r=t[t.length-1];e[e.length-1]=new i(r._color,r.key,r.value,r.left,r.right,r._count);for(var h=t.length-2;0<=h;--h)(r=t[h]).left===t[h+1]?e[h]=new i(r._color,r.key,r.value,e[h+1],r.right,r._count):e[h]=new i(r._color,r.key,r.value,r.left,e[h+1],r._count);if((r=e[e.length-1]).left&&r.right){var u=e.length;for(r=r.left;r.right;)e.push(r),r=r.right;var l=e[u-1];for(e.push(new i(r._color,l.key,l.value,r.left,r.right,r._count)),e[u-1].key=r.key,e[u-1].value=r.value,h=e.length-2;u<=h;--h)r=e[h],e[h]=new i(r._color,r.key,r.value,r.left,e[h+1],r._count);e[u-1].left=e[u]}if(0===(r=e[e.length-1])._color){var d=e[e.length-2];for(d.left===r?d.left=null:d.right===r&&(d.right=null),e.pop(),h=0;h<e.length;++h)e[h]._count--;return new a(this.tree._compare,e[0])}if(r.left||r.right){for(r.left?c(r,r.left):r.right&&c(r,r.right),r._color=1,h=0;h<e.length-1;++h)e[h]._count--;return new a(this.tree._compare,e[0])}if(1===e.length)return new a(this.tree._compare,null);for(h=0;h<e.length;++h)e[h]._count--;var f=e[e.length-2];return function(t){for(var e,r,i,a,h=t.length-1;0<=h;--h){if(e=t[h],0===h)return e._color=1;if((r=t[h-1]).left===e){if((i=r.right).right&&0===i.right._color)return a=(i=r.right=n(i)).right=n(i.right),r.right=i.left,i.left=r,i.right=a,i._color=r._color,e._color=1,r._color=1,a._color=1,s(r),s(i),1<h&&((u=t[h-2]).left===r?u.left=i:u.right=i),t[h-1]=i;if(i.left&&0===i.left._color)return a=(i=r.right=n(i)).left=n(i.left),r.right=a.left,i.left=a.right,a.left=r,a.right=i,a._color=r._color,r._color=1,i._color=1,e._color=1,s(r),s(i),s(a),1<h&&((u=t[h-2]).left===r?u.left=a:u.right=a),t[h-1]=a;if(1===i._color){if(0===r._color)return r._color=1,r.right=o(0,i);r.right=o(0,i);continue}i=n(i),r.right=i.left,i.left=r,i._color=r._color,r._color=0,s(r),s(i),1<h&&((u=t[h-2]).left===r?u.left=i:u.right=i),t[h-1]=i,t[h]=r,h+1<t.length?t[h+1]=e:t.push(e),h+=2}else{if((i=r.left).left&&0===i.left._color)return a=(i=r.left=n(i)).left=n(i.left),r.left=i.right,i.right=r,i.left=a,i._color=r._color,e._color=1,r._color=1,a._color=1,s(r),s(i),1<h&&((u=t[h-2]).right===r?u.right=i:u.left=i),t[h-1]=i;if(i.right&&0===i.right._color)return a=(i=r.left=n(i)).right=n(i.right),r.left=a.right,i.right=a.left,a.right=r,a.left=i,a._color=r._color,r._color=1,i._color=1,e._color=1,s(r),s(i),s(a),1<h&&((u=t[h-2]).right===r?u.right=a:u.left=a),t[h-1]=a;if(1===i._color){if(0===r._color)return r._color=1,r.left=o(0,i);r.left=o(0,i);continue}var u;i=n(i),r.left=i.right,i.right=r,i._color=r._color,r._color=0,s(r),s(i),1<h&&((u=t[h-2]).right===r?u.right=i:u.left=i),t[h-1]=i,t[h]=r,h+1<t.length?t[h+1]=e:t.push(e),h+=2}}}(e),f.left===r?f.left=null:f.right=null,new a(this.tree._compare,e[0])},Object.defineProperty(l,"key",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].key},enumerable:!0}),Object.defineProperty(l,"value",{get:function(){if(0<this._stack.length)return this._stack[this._stack.length-1].value},enumerable:!0}),Object.defineProperty(l,"index",{get:function(){var t=0,e=this._stack;if(0===e.length){var r=this.tree.root;return r?r._count:0}e[e.length-1].left&&(t=e[e.length-1].left._count);for(var i=e.length-2;0<=i;--i)e[i+1]===e[i].right&&(++t,e[i].left&&(t+=e[i].left._count));return t},enumerable:!0}),l.next=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.right)for(e=e.right;e;)t.push(e),e=e.left;else for(t.pop();0<t.length&&t[t.length-1].right===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(l,"hasNext",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].right)return!0;for(var e=t.length-1;0<e;--e)if(t[e-1].left===t[e])return!0;return!1}}),l.update=function(t){var e=this._stack;if(0===e.length)throw new Error("Can't update empty node!");var r=new Array(e.length),n=e[e.length-1];r[r.length-1]=new i(n._color,n.key,t,n.left,n.right,n._count);for(var o=e.length-2;0<=o;--o)(n=e[o]).left===e[o+1]?r[o]=new i(n._color,n.key,n.value,r[o+1],n.right,n._count):r[o]=new i(n._color,n.key,n.value,n.left,r[o+1],n._count);return new a(this.tree._compare,r[0])},l.prev=function(){var t=this._stack;if(0!==t.length){var e=t[t.length-1];if(e.left)for(e=e.left;e;)t.push(e),e=e.right;else for(t.pop();0<t.length&&t[t.length-1].left===e;)e=t[t.length-1],t.pop()}},Object.defineProperty(l,"hasPrev",{get:function(){var t=this._stack;if(0===t.length)return!1;if(t[t.length-1].left)return!0;for(var e=t.length-1;0<e;--e)if(t[e-1].right===t[e])return!0;return!1}})},function(t,e,r){"use strict";t.exports=function(t,e){var r,o,s,a;if(e[0][0]<e[1][0])r=e[0],o=e[1];else{if(!(e[0][0]>e[1][0]))return n(e,t);r=e[1],o=e[0]}if(t[0][0]<t[1][0])s=t[0],a=t[1];else{if(!(t[0][0]>t[1][0]))return-n(t,e);s=t[1],a=t[0]}var h=i(r,o,a),u=i(r,o,s);if(h<0){if(u<=0)return h}else if(0<h){if(0<=u)return h}else if(u)return u;if(h=i(a,s,o),u=i(a,s,r),h<0){if(u<=0)return h}else if(0<h){if(0<=u)return h}else if(u)return u;return o[0]-a[0]};var i=r(24);function n(t,e){var r,n,o,s;if(e[0][0]<e[1][0])r=e[0],n=e[1];else{if(!(e[0][0]>e[1][0])){var a=Math.min(t[0][1],t[1][1]),h=Math.max(t[0][1],t[1][1]),u=Math.min(e[0][1],e[1][1]),l=Math.max(e[0][1],e[1][1]);return h<u?h-u:l<a?a-l:h-l}r=e[1],n=e[0]}s=t[0][1]<t[1][1]?(o=t[0],t[1]):(o=t[1],t[0]);var c=i(n,r,o);return c||(c=i(n,r,s))||s-n}},function(t,e){t.exports=function(t){for(var e=0,n=t[0],o=t.length,s=2;s<o;s++){var a=t[s-1],h=t[s];r[0]=n[0]-h[0],r[1]=n[1]-h[1],i[0]=n[0]-a[0],i[1]=n[1]-a[1],e+=r[0]*i[1]-r[1]*i[0]}return e/2};var r=[0,0],i=[0,0]},function(t,e,r){"use strict";t.exports=function(t){return t<0?-1:0<t?1:0}},function(t,e,r){var i=r(126),n=r(129);function o(t,e){return t[0]===e[0]&&t[1]===e[1]}t.exports=function(t,e){for(var r={},c=t.length,d=[],f=0;f<c;f++){var p=t[f],y=t[(f+1)%c];l(p,h),l(y,u);for(var g=0;g<c;g++)if(f!==g){var v=t[g],m=t[(g+1)%c];if(l(v,s),l(m,a),!(o(s,h)||o(s,u)||o(a,h)||o(a,u))){var _=i(h,u,s,a),x=_[2];if(1!==x.length||x[0]){var b=n(_[2]);if(_[0]=n(_[0])/b,_[1]=n(_[1])/b,_.pop(),!(o(_,h)||o(_,u)||o(_,s)||o(_,a))){var w=_+"",T=!r[w];T&&(r[w]=!0);var E=T;e&&(E=e(_,f,p,y,g,v,m,T)),E&&d.push(_)}}}}}return d};var s=[0,0],a=[0,0],h=[0,0],u=[0,0];function l(t,e){Array.isArray(t)?(e[0]=t[0],e[1]=t[1]):(e[0]=t.x,e[1]=t.y)}},function(t,e,r){"use strict";t.exports=function(t,e,r,h){if(!a(t,e,r,h))return[[0],[0],[0]];var u=n([r[1]],[-h[1]]),l=n([-r[0]],[h[0]]),c=n(n(o(l,t[1]),o(l,-e[1])),n(o(u,t[0]),o(u,-e[0]))),d=n(i(-t[0],e[1]),i(t[1],e[0])),f=n(i(-r[0],h[1]),i(r[1],h[0])),p=n(n(o(f,t[0]),o(f,-e[0])),n(o(d,-r[0]),o(d,h[0]))),y=n(n(o(f,t[1]),o(f,-e[1])),n(o(d,-r[1]),o(d,h[1])));return[s(p),s(y),s(c)]};var i=r(33),n=r(52),o=r(53),s=r(127),a=r(128)},function(t,e,r){"use strict";t.exports=function(t){for(var e=t.length,r=t[t.length-1],i=e,n=e-2;0<=n;--n){var o=r,s=t[n];(h=s-((r=o+s)-o))&&(t[--i]=r,r=h)}var a=0;for(n=i;n<e;++n){var h;(h=(s=r)-((r=(o=t[n])+s)-o))&&(t[a++]=h)}return t[a++]=r,t.length=a,t}},function(t,e,r){"use strict";t.exports=function(t,e,r,n){var o=i(t,r,n),s=i(e,r,n);if(0<o&&0<s||o<0&&s<0)return!1;var a=i(r,t,e),h=i(n,t,e);return!(0<a&&0<h||a<0&&h<0)&&(0!==o||0!==s||0!==a||0!==h||function(t,e,r,i){for(var n=0;n<2;++n){var o=t[n],s=e[n],a=Math.min(o,s),h=Math.max(o,s),u=r[n],l=i[n],c=Math.min(u,l);if(Math.max(u,l)<a||h<c)return!1}return!0}(t,e,r,n))};var i=r(24)[3]},function(t,e){t.exports=function(t){var e=0,r=t.length;switch(r){case 1:e=t[0];break;case 2:e=t[0]+t[1];break;case 3:e=t[0]+t[1]+t[2];break;case 4:e=t[0]+t[1]+t[2]+t[3];break;default:for(var i=0;i<r;i++)e+=t[i]}return e}},function(t,e,r){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var n=i(r(5)),o=r(25),s=r(9),a=r(16),h=r(17),u=r(13),l=r(51),c=r(10),d=(f.prototype.getCenter=function(){return this.app.getContainerCenter()},f.prototype.dragContainer=function(){this.container&&(this.container.removeListener("mousedown"),this.container.removeListener("mousemove"),this.container.removeListener("mouseup"),this.container.cursor="default"),this.drag()},f.prototype.setSelect=function(t){this.container&&(this.container.removeListener("mousedown"),this.container.removeListener("mousemove"),this.container.removeListener("mouseup"),this.container.cursor="crosshair"),this.moveSelect(t)},f.prototype.getSelectNodes=function(){return this.topo.getSelectedNodes()},f.prototype.setSelectNodes=function(t){this.topo.setSelectedNodes(t)},f.prototype.setSelectGroups=function(t){this.topo.setSelectedGroups(t)},f.prototype.getSelectEdge=function(){return this.topo.getSelectedEdge()},f.prototype.getSelectGroups=function(){return this.topo.getSelectedGroups()},f.prototype.setSelectEdge=function(t){this.topo.setSelectedEdge(t)},f.prototype.moveCenter=function(t,e){this.app.moveCenter(t,e)},f.prototype.removeHighLight=function(){this.cleanEdge(),this.cleanNode(),this.cleanGroup()},f.prototype.drag=function(){var t=this;this.container.on("mousedown",function(e){t.onDragStart(e)}),this.container.on("mousemove",function(e){t.onDragMove(e)}),this.container.on("mouseup",this.onDragEnd.bind(this))},f.prototype.onDragStart=function(t){var e=this.container.parent.toLocal(t.data.global);this.removeHighLight(),this.container.cursor="move",this.dragging=!0,this.data=t.data,this.last={parents:e}},f.prototype.onDragMove=function(t){var e=this;if(this.dragging&&!this.isSelect){var r=this.data.getLocalPosition(this.container.parent),i=t.data.global.x,d=t.data.global.y,f=this.topo.getElements(),p=[c.Node,s.Edge,a.EdgeBundle,u.Group,h.EdgeGroup,o.DataFlow,l.MultipleColorLine];f.sort(function(t,e){return n.indexOf(p,t.constructor)-n.indexOf(p,e.constructor)}),n.each(f,function(t){t instanceof c.Node?(t.position.x+=r.x-e.last.parents.x,t.position.y+=r.y-e.last.parents.y):t.draw()}),this.last={parents:r,x:i,y:d}}else this.dragging=!1},f.prototype.onDragEnd=function(){this.container.cursor="default"},f.prototype.moveSelect=function(t){var e=this;t&&(this.isLock=t.isLock,this.isSelectGroup=t.isSelectGroup),this.container.on("mousedown",function(t){e.onSelectStart(t)}),this.container.on("mousemove",this.onSelectMove.bind(this)),this.container.on("mouseup",this.onSelectEnd.bind(this))},f.prototype.setClick=function(){var t=this,e=this.topo.getElements();n.each(e,function(e){if(e instanceof a.EdgeBundle){var r=e.isExpanded?e.children:e.bundleData;n.each(r,function(e){e.off("mousedown"),e.on("mousedown",function(r){r.stopPropagation(),t.removeHighLight(),t.topo.setSelectedEdge(e),e.selectOn()})})}else e.off("mousedown",function(){t.clickEvent(e)}),e.on("mousedown",function(r){r.stopPropagation(),t.clickEvent(e)})})},f.prototype.cleanEdge=function(){var t=this.topo.getSelectedEdge();t&&t.selectOff(),this.topo.removeSelectedEdge()},f.prototype.cleanNode=function(){var t=this.topo.getSelectedNodes();n.each(t,function(t){t.selectOff()}),this.topo.removeSelectedNodes()},f.prototype.cleanGroup=function(){var t=this.topo.getSelectedGroups();n.each(t,function(t){t.selectOff()}),this.topo.removeSelectedGroups()},f.prototype.toggleLabel=function(){this.nodeLabelFlag=!this.nodeLabelFlag},f.prototype.clickEvent=function(t){t instanceof c.Node?this.getSelectNodes().length<1&&(this.removeHighLight(),t.selectOne(),this.setSelectNodes(t)):t instanceof s.Edge?(this.removeHighLight(),this.topo.setSelectedEdge(t),t.selectOn()):t instanceof u.Group||t instanceof h.EdgeGroup?(this.removeHighLight(),this.topo.setSelectedGroups(t),t.selectOn()):t instanceof o.DataFlow&&this.removeHighLight()},f.prototype.onSelectStart=function(t){if(this.container.hitArea instanceof PIXI.Rectangle){this.removeHighLight();var e=this.container.parent.toLocal(t.data.global);this.dragging=!0,this.isSelect=!0,this.data=t.data,this.last={parents:e},this.containerUp=!1}},f.prototype.onSelectMove=function(){if(this.dragging&&this.isSelect){this.rectangle.clear();var t=this.data.getLocalPosition(this.container.parent),e=document.getElementById(this.domRegex),r=t.x,i=t.y;if(e){var n=e.clientWidth-1,o=e.clientHeight-1;t.x<=1?r=1:t.x>=n&&(r=n),t.y<=1?i=1:t.y>=o&&(i=o)}var s=this.last.parents.x,a=this.last.parents.y,h=r-s,u=i-a;this.rectangle.lineStyle(1,149911,1),this.rectangle.alpha=.8,this.rectangle.drawRect(s,a,h,u)}else this.dragging=!1},f.prototype.ondocumentEnd=function(){event&&0===event.button&&(this.dragging=!1,this.isSelect=!1,this.data=null,this.last=null,this.containerUp||this.onSelectEnd(),this.rectangle.clear(),this.container.addChild(this.rectangle))},f.prototype.onSelectEnd=function(){var t=this,e=this.rectangle.getLocalBounds(),r=this.topo.getElements(),i=this.topo.getGroups(),o=[];if(this.containerUp=!0,n.each(r,function(t){if(t instanceof c.Node){var r=t.getSprite();if(r){var i=t.y-r.height/2,n=t.x-r.width/2,s=t.x+r.width/2,a=t.y+r.height/2;i>=e.top&&s<=e.right&&a<=e.bottom&&n>=e.left&&o.push(t)}}}),n.each(o,function(e){t.isLock===e.isLock&&t.topo.setSelectedNodes(e)}),this.isSelectGroup){var s=n.filter(i,function(t){var e=t.getVisibleNodes();return n.every(e,function(t){return n.includes(o,t)})});this.removeHighLight(),n.each(s,function(e){t.topo.setSelectedGroups(e)})}},f);function f(t,e,r){this.defaultLineColor=0,this.nodeLabelFlag=!0,this.dragging=!1,this.rectangle=new PIXI.Graphics,this.isSelect=!1,this.isLock=!1,this.isSelectGroup=!1,this.containerUp=!1,this.app=t,this.topo=e,this.container=t.container,this.domRegex=r,document.addEventListener("mouseup",this.ondocumentEnd.bind(this),!0)}e.CommonAction=d},function(t,e,r){"use strict";(function(t){e.__esModule=!0,e.loader=e.prepare=e.particles=e.mesh=e.loaders=e.interaction=e.filters=e.extras=e.extract=e.accessibility=void 0;var i=r(132);Object.keys(i).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return i[t]}})});var n=r(1);Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})});var o,s=(o=r(194))&&o.__esModule?o:{default:o},a=g(r(195)),h=g(r(197)),u=g(r(86)),l=g(r(207)),c=g(r(214)),d=g(r(216)),f=g(r(220)),p=g(r(225)),y=g(r(230));function g(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}n.utils.mixins.performMixins();var v=d.shared||null;e.accessibility=a,e.extract=h,e.extras=u,e.filters=l,e.interaction=c,e.loaders=d,e.mesh=f,e.particles=p,e.prepare=y,e.loader=v,"function"==typeof s.default&&(0,s.default)(e),t.PIXI=e}).call(this,r(34))},function(t,e,r){"use strict";r(133),r(135),r(136),r(137),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},function(t,e,r){"use strict";var i,n=(i=r(134))&&i.__esModule?i:{default:i};Object.assign||(Object.assign=n.default)},function(t,e,r){"use strict";var i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;t.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},r=0;r<10;r++)e["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(t){i[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var r,s,a=function(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(t),h=1;h<arguments.length;h++){for(var u in r=Object(arguments[h]))n.call(r,u)&&(a[u]=r[u]);if(i){s=i(r);for(var l=0;l<s.length;l++)o.call(r,s[l])&&(a[s[l]]=r[s[l]])}}return a}},function(t,e,r){"use strict";(function(t){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var r=Date.now(),i=["ms","moz","webkit","o"],n=0;n<i.length&&!t.requestAnimationFrame;++n){var o=i[n];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),i=16+r-e;return i<0&&(i=0),r=e,setTimeout(function(){r=Date.now(),t(performance.now())},i)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,r(34))},function(t,e,r){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:0<t?1:-1})},function(t,e,r){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(37))&&i.__esModule?i:{default:i},o=r(0),s=(a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(t,e){if(this.radius<=0)return!1;var r=this.radius*this.radius,i=this.x-t,n=this.y-e;return(i*=i)+(n*=n)<=r},a.prototype.getBounds=function(){return new n.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.radius=r,this.type=o.SHAPES.CIRC}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(37))&&i.__esModule?i:{default:i},o=r(0),s=(a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var r=(t-this.x)/this.width,i=(e-this.y)/this.height;return(r*=r)+(i*=i)<=1},a.prototype.getBounds=function(){return new n.default(this.x-this.width,this.y-this.height,this.width,this.height)},a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.width=r,this.height=i,this.type=o.SHAPES.ELIP}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(35))&&i.__esModule?i:{default:i},o=r(0),s=(a.prototype.clone=function(){return new a(this.points.slice())},a.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},a.prototype.contains=function(t,e){for(var r=!1,i=this.points.length/2,n=0,o=i-1;n<i;o=n++){var s=this.points[2*n],a=this.points[2*n+1],h=this.points[2*o],u=this.points[2*o+1];e<a!=e<u&&t<(e-a)/(u-a)*(h-s)+s&&(r=!r)}return r},a);function a(){for(var t=arguments.length,e=Array(t),r=0;r<t;r++)e[r]=arguments[r];if(function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),Array.isArray(e[0])&&(e=e[0]),e[0]instanceof n.default){for(var i=[],s=0,h=e.length;s<h;s++)i.push(e[s].x,e[s].y);e=i}this.closed=!0,this.points=e,this.type=o.SHAPES.POLY}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=r(0),n=(o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.radius)},o.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var r=t-(this.x+this.radius),i=e-(this.y+this.radius),n=this.radius*this.radius;if(r*r+i*i<=n)return!0;if((r=t-(this.x+this.width-this.radius))*r+i*i<=n)return!0;if(r*r+(i=e-(this.y+this.height-this.radius))*i<=n)return!0;if((r=t-(this.x+this.radius))*r+i*i<=n)return!0}return!1},o);function o(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,s=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.x=t,this.y=e,this.width=r,this.height=n,this.radius=s,this.type=i.SHAPES.RREC}e.default=n},function(t,e){t.exports=function(t,e){var r=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!r)throw new Error("This browser does not support webGL. Try using the canvas renderer");return r}},function(t,e){function r(t,e,r,n){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=n||t.STATIC_DRAW,this.data=i,r&&this.upload(r),this._updateID=0}var i=new ArrayBuffer(0);r.prototype.upload=function(t,e,r){r||this.bind();var i=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?i.bufferSubData(this.type,e,t):i.bufferData(this.type,t,this.drawType),this.data=t},r.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},r.createVertexBuffer=function(t,e,i){return new r(t,t.ARRAY_BUFFER,e,i)},r.createIndexBuffer=function(t,e,i){return new r(t,t.ELEMENT_ARRAY_BUFFER,e,i)},r.create=function(t,e,i,n){return new r(t,e,i,n)},r.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},t.exports=r},function(t,e,r){function i(t,e,r){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=r||100}var n=r(57);i.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new n(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},i.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},i.prototype.clear=function(t,e,r,i){this.bind();var n=this.gl;n.clearColor(t,e,r,i),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},i.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},i.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},i.prototype.resize=function(t,e){var r=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,this.stencil),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,t,e))},i.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},i.createRGBA=function(t,e,r,o){var s=n.fromData(t,null,e,r);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,r);return a.enableTexture(s),a.unbind(),a},i.createFloat32=function(t,e,r,o){var s=new n.fromData(t,o,e,r);s.enableNearestScaling(),s.enableWrapClamp();var a=new i(t,e,r);return a.enableTexture(s),a.unbind(),a},t.exports=i},function(t,e,r){function i(t,e,r,i,u){this.gl=t,i&&(e=a(e,i),r=a(r,i)),this.program=n(t,e,r,u),this.attributes=o(t,this.program),this.uniformData=s(t,this.program),this.uniforms=h(t,this.uniformData)}var n=r(58),o=r(59),s=r(61),a=r(63),h=r(64);i.prototype.bind=function(){return this.gl.useProgram(this.program),this},i.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},t.exports=i},function(t,e,r){var i=r(56);function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var r=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(r),attribState:new Array(r)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}n.prototype.constructor=n,(t.exports=n).FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,r=0;r<this.attributes.length;r++){var n=this.attributes[r];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return i(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,r,i,n,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:r||this.gl.FLOAT,normalized:i||!1,stride:n||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,r){var i=this.gl;return this.indexBuffer?i.drawElements(t,e||this.indexBuffer.data.length,i.UNSIGNED_SHORT,2*(r||0)):i.drawArrays(t,r,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},function(t,e,r){t.exports={compileProgram:r(58),defaultValue:r(62),extractAttributes:r(59),extractUniforms:r(61),generateUniformAccessObject:r(64),setPrecision:r(63),mapSize:r(60),mapType:r(38)}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){return n.default.tablet||n.default.phone?4:t};var i,n=(i=r(40))&&i.__esModule?i:{default:i}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},function(t,e,r){"use strict";e.__esModule=!0,e.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,r){t.__plugins[e]=r},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},function(t,e,r){"use strict";function i(t,e){if(t&&e)for(var r=Object.keys(e),i=0;i<r.length;++i){var n=r[i];Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}}e.__esModule=!0,e.mixin=i,e.delayMixin=function(t,e){n.push(t,e)},e.performMixins=function(){for(var t=0;t<n.length;t+=2)i(n[t],n[t+1]);n.length=0};var n=[]},function(t,e,r){"use strict";t.exports=function(t,e,r){var i,n=t.length;if(!(n<=e||0===r)){var o=n-(r=n<e+r?n-e:r);for(i=e;i<o;++i)t[i]=t[i+r];t.length=o}}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(){for(var t=[],e=[],r=0;r<32;r++)t[r]=r,e[r]=r;t[i.BLEND_MODES.NORMAL_NPM]=i.BLEND_MODES.NORMAL,t[i.BLEND_MODES.ADD_NPM]=i.BLEND_MODES.ADD,t[i.BLEND_MODES.SCREEN_NPM]=i.BLEND_MODES.SCREEN,e[i.BLEND_MODES.NORMAL]=i.BLEND_MODES.NORMAL_NPM,e[i.BLEND_MODES.ADD]=i.BLEND_MODES.ADD_NPM,e[i.BLEND_MODES.SCREEN]=i.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n};var i=r(0)},function(t,e,r){(function(t,i){var n;!function(){"object"==typeof e&&e&&e.nodeType,"object"==typeof t&&t&&t.nodeType;var o="object"==typeof i&&i;o.global!==o&&o.window!==o&&o.self;var s,a=2147483647,h=36,u=1,l=26,c=38,d=700,f=72,p=128,y="-",g=/^xn--/,v=/[^\x20-\x7E]/,m=/[\x2E\u3002\uFF0E\uFF61]/g,_={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=h-u,b=Math.floor,w=String.fromCharCode;function T(t){throw new RangeError(_[t])}function E(t,e){for(var r=t.length,i=[];r--;)i[r]=e(t[r]);return i}function S(t,e){var r=t.split("@"),i="";return 1<r.length&&(i=r[0]+"@",t=r[1]),i+E((t=t.replace(m,".")).split("."),e).join(".")}function M(t){for(var e,r,i=[],n=0,o=t.length;n<o;)55296<=(e=t.charCodeAt(n++))&&e<=56319&&n<o?56320==(64512&(r=t.charCodeAt(n++)))?i.push(((1023&e)<<10)+(1023&r)+65536):(i.push(e),n--):i.push(e);return i}function O(t){return E(t,function(t){var e="";return 65535<t&&(e+=w((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+w(t)}).join("")}function P(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function C(t,e,r){var i=0;for(t=r?b(t/d):t>>1,t+=b(t/e);x*l>>1<t;i+=h)t=b(t/x);return b(i+(x+1)*t/(t+c))}function A(t){var e,r,i,n,o,s,c,d,g,v,m,_=[],x=t.length,w=0,E=p,S=f;for((r=t.lastIndexOf(y))<0&&(r=0),i=0;i<r;++i)128<=t.charCodeAt(i)&&T("not-basic"),_.push(t.charCodeAt(i));for(n=0<r?r+1:0;n<x;){for(o=w,s=1,c=h;x<=n&&T("invalid-input"),m=t.charCodeAt(n++),(h<=(d=m-48<10?m-22:m-65<26?m-65:m-97<26?m-97:h)||d>b((a-w)/s))&&T("overflow"),w+=d*s,!(d<(g=c<=S?u:S+l<=c?l:c-S));c+=h)s>b(a/(v=h-g))&&T("overflow"),s*=v;S=C(w-o,e=_.length+1,0==o),b(w/e)>a-E&&T("overflow"),E+=b(w/e),w%=e,_.splice(w++,0,E)}return O(_)}function I(t){var e,r,i,n,o,s,c,d,g,v,m,_,x,E,S,O=[];for(_=(t=M(t)).length,e=p,o=f,s=r=0;s<_;++s)(m=t[s])<128&&O.push(w(m));for(i=n=O.length,n&&O.push(y);i<_;){for(c=a,s=0;s<_;++s)e<=(m=t[s])&&m<c&&(c=m);for(c-e>b((a-r)/(x=i+1))&&T("overflow"),r+=(c-e)*x,e=c,s=0;s<_;++s)if((m=t[s])<e&&++r>a&&T("overflow"),m==e){for(d=r,g=h;!(d<(v=g<=o?u:o+l<=g?l:g-o));g+=h)S=d-v,E=h-v,O.push(w(P(v+S%E,0))),d=b(S/E);O.push(w(P(d,0))),o=C(r,x,i==n),r=0,++i}++r,++e}return O.join("")}s={version:"1.4.1",ucs2:{decode:M,encode:O},decode:A,encode:I,toASCII:function(t){return S(t,function(t){return v.test(t)?"xn--"+I(t):t})},toUnicode:function(t){return S(t,function(t){return g.test(t)?A(t.slice(4).toLowerCase()):t})}},void 0===(n=function(){return s}.call(e,r,e,t))||(t.exports=n)}()}).call(this,r(155)(t),r(34))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,r){"use strict";t.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},function(t,e,r){"use strict";e.decode=e.parse=r(158),e.encode=e.stringify=r(159)},function(t,e,r){"use strict";t.exports=function(t,e,r,n){e=e||"&",r=r||"=";var o={};if("string"!=typeof t||0===t.length)return o;var s=/\+/g;t=t.split(e);var a=1e3;n&&"number"==typeof n.maxKeys&&(a=n.maxKeys);var h,u,l=t.length;0<a&&a<l&&(l=a);for(var c=0;c<l;++c){var d,f,p,y,g=t[c].replace(s,"%20"),v=g.indexOf(r);f=0<=v?(d=g.substr(0,v),g.substr(v+1)):(d=g,""),p=decodeURIComponent(d),y=decodeURIComponent(f),h=o,u=p,Object.prototype.hasOwnProperty.call(h,u)?i(o[p])?o[p].push(y):o[p]=[o[p],y]:o[p]=y}return o};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},function(t,e,r){"use strict";function i(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}}t.exports=function(t,e,r,a){return e=e||"&",r=r||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),function(s){var a=encodeURIComponent(i(s))+r;return n(t[s])?o(t[s],function(t){return a+encodeURIComponent(i(t))}).join(e):a+encodeURIComponent(i(t[s]))}).join(e):a?encodeURIComponent(i(a))+r+encodeURIComponent(i(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var r=[],i=0;i<t.length;i++)r.push(e(t[i],i));return r}var s=Object.keys||function(t){var e=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.push(r);return e}},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=a(r(3)),o=r(0),s=a(r(161));function a(t){return t&&t.__esModule?t:{default:t}}var h=(u.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},u.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},u.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},u.prototype.add=function(t,e,r){var i=2<arguments.length&&void 0!==r?r:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i))},u.prototype.addOnce=function(t,e,r){var i=2<arguments.length&&void 0!==r?r:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i,!0))},u.prototype._addListener=function(t){var e=this._head.next,r=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(r);break}e=(r=e).next}t.previous||t.connect(r)}else t.connect(r);return this._startIfPossible(),this},u.prototype.remove=function(t,e){for(var r=this._head.next;r;)r=r.match(t,e)?r.destroy():r.next;return this._head.next||this._cancelIfNeeded(),this},u.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},u.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},u.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},u.prototype.update=function(t){var e=0<arguments.length&&void 0!==t?t:performance.now(),r=void 0;if(e>this.lastTime){(r=this.elapsedMS=e-this.lastTime)>this._maxElapsedMS&&(r=this._maxElapsedMS),this.deltaTime=r*n.default.TARGET_FPMS*this.speed;for(var i=this._head,o=i.next;o;)o=o.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=e},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(u,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,n.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),u);function u(){var t=this;!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this._head=new s.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/n.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(e){t._requestId=null,t.started&&(t.update(e),t.started&&null===t._requestId&&t._head.next&&(t._requestId=requestAnimationFrame(t._tick)))}}e.default=h},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},n.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},n.prototype.connect=function(t){(this.previous=t).next&&(t.next.previous=this),this.next=t.next,t.next=this},n.prototype.destroy=function(t){var e=0<arguments.length&&void 0!==t&&t;this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var r=this.next;return this.next=e?null:r,this.previous=null,r},n);function n(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.fn=t,this.context=e,this.priority=r,this.once=i,this.next=null,this.previous=null,this._destroyed=!1}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;var i=a(r(19)),n=r(0),o=r(4),s=a(r(26));function a(t){return t&&t.__esModule?t:{default:t}}var h=new o.Matrix,u=(l.prototype.render=function(t){var e=t._texture,r=this.renderer,i=e._frame.width,a=e._frame.height,u=t.transform.worldTransform,l=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(r.setBlendMode(t.blendMode),e.valid)){r.context.globalAlpha=t.worldAlpha;var d=e.baseTexture.scaleMode===n.SCALE_MODES.LINEAR;r.smoothProperty&&r.context[r.smoothProperty]!==d&&(r.context[r.smoothProperty]=d),c=e.trim?(l=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(l=(.5-t.anchor.x)*e.orig.width,(.5-t.anchor.y)*e.orig.height),e.rotate&&(u.copy(h),u=h,o.GroupD8.matrixAppendRotationInv(u,e.rotate,l,c),c=l=0),l-=i/2,c-=a/2,r.roundPixels?(r.context.setTransform(u.a,u.b,u.c,u.d,u.tx*r.resolution|0,u.ty*r.resolution|0),l|=0,c|=0):r.context.setTransform(u.a,u.b,u.c,u.d,u.tx*r.resolution,u.ty*r.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=s.default.getTintedTexture(t,t.tint)),r.context.drawImage(t.tintedTexture,0,0,i*f,a*f,l*r.resolution,c*r.resolution,i*r.resolution,a*r.resolution)):r.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,i*f,a*f,l*r.resolution,c*r.resolution,i*r.resolution,a*r.resolution)}},l.prototype.destroy=function(){this.renderer=null},l);function l(t){!function(t,e){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.renderer=t}e.default=u,i.default.registerPlugin("sprite",u)},function(t,e,r){"use strict";e.__esModule=!0;var i=r(0),n=(o.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var r=t.alpha,i=t.transform.worldTransform,n=e.resolution;e.context.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=r},o.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,r=t.graphicsData.length;if(0!==r){e.beginPath();for(var n=0;n<r;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===i.SHAPES.POLY){var a=s.points,h=o.holes,u=void 0,l=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),0<h.length){for(var d=u=0;d<a.length;d+=2)u+=a[d]*a[d+3]-a[d+1]*a[d+2];for(var f=0;f<h.length;f++){a=h[f].points;for(var p=l=0;p<a.length;p+=2)l+=a[p]*a[p+3]-a[p+1]*a[p+2];if(e.moveTo(a[0],a[1]),l*u<0)for(var y=2;y<a.length;y+=2)e.lineTo(a[y],a[y+1]);else for(var g=a.length-2;2<=g;g-=2)e.lineTo(a[g],a[g+1])}}}else if(o.type===i.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===i.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===i.SHAPES.ELIP){var v=2*s.width,m=2*s.height,_=s.x-v/2,x=s.y-m/2,b=v/2*.5522848,w=m/2*.5522848,T=_+v,E=x+m,S=_+v/2,M=x+m/2;e.moveTo(_,M),e.bezierCurveTo(_,M-w,S-b,x,S,x),e.bezierCurveTo(S+b,x,T,M-w,T,M),e.bezierCurveTo(T,M+w,S+b,E,S,E),e.bezierCurveTo(S-b,E,_,M+w,_,M),e.closePath()}else if(o.type===i.SHAPES.RREC){var O=s.x,P=s.y,C=s.width,A=s.height,I=s.radius,R=Math.min(C,A)/2|0;I=R<I?R:I,e.moveTo(O,P+I),e.lineTo(O,P+A-I),e.quadraticCurveTo(O,P+A,O+I,P+A),e.lineTo(O+C-I,P+A),e.quadraticCurveTo(O+C,P+A,O+C,P+A-I),e.lineTo(O+C,P+I),e.quadraticCurveTo(O+C,P,O+C-I,P),e.lineTo(O+I,P),e.quadraticCurveTo(O,P,O,P+I),e.closePath()}}}},o.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},o.prototype.destroy=function(){},o);function o(t){!function(t,e){if(!(t instanceof o))throw new TypeError("Cannot call a class as a function")}(this),this.renderer=t}e.default=n},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,o.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over"),t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t};var i,n=r(0),o=(i=r(75))&&i.__esModule?i:{default:i}},function(t,e,r){"use strict";e.__esModule=!0;var i=f(r(27)),n=f(r(28)),o=f(r(47)),s=f(r(178)),a=f(r(179)),h=f(r(180)),u=f(r(3)),l=r(2),c=f(r(6)),d=f(r(44));function f(t){return t&&t.__esModule?t:{default:t}}var p,y=0,g=0,v=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(m,p=i.default),m.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),u.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,a.default)(this.MAX_TEXTURES,t)),this.shader=(0,s.default)(t,this.MAX_TEXTURES),this.indexBuffer=c.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,r=0;r<this.vaoMax;r++){var i=this.vertexBuffers[r]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(i,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(i,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(i,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&n.addAttribute(i,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[r]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},m.prototype.onPrerender=function(){this.vertexCount=0},m.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},m.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,r=d.default.nextPow2(this.currentIndex),i=d.default.log2(r),n=this.buffers[i],o=this.sprites,s=this.groups,a=n.float32View,h=n.uint32View,f=this.boundTextures,p=this.renderer.boundTextures,v=this.renderer.textureGC.count,m=0,_=void 0,x=void 0,b=1,w=0,T=s[0],E=void 0,S=void 0,M=l.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];T.textureCount=0,T.start=0,T.blend=M,y++;var O=void 0;for(O=0;O<e;++O){var P=p[O];P._enabled!==y?((f[O]=P)._virtalBoundId=O,P._enabled=y):f[O]=this.renderer.emptyTextures[O]}for(y++,O=0;O<this.currentIndex;++O){var C=o[O];o[O]=null,_=C._texture.baseTexture;var A=l.premultiplyBlendMode[Number(_.premultipliedAlpha)][C.blendMode];if(M!==A&&(M=A,x=null,w=e,y++),x!==_&&(x=_)._enabled!==y){if(w===e&&(y++,T.size=O-T.start,w=0,(T=s[b++]).blend=M,T.textureCount=0,T.start=O),_.touched=v,-1===_._virtalBoundId)for(var I=0;I<e;++I){var R=(I+g)%e,D=f[R];if(D._enabled!==y){g++,D._virtalBoundId=-1,f[_._virtalBoundId=R]=_;break}}_._enabled=y,T.textureCount++,T.ids[w]=_._virtalBoundId,T.textures[w++]=_}if(E=C.vertexData,S=C._texture._uvs.uvsUint32,this.renderer.roundPixels){var N=this.renderer.resolution;a[m]=(E[0]*N|0)/N,a[m+1]=(E[1]*N|0)/N,a[m+5]=(E[2]*N|0)/N,a[m+6]=(E[3]*N|0)/N,a[m+10]=(E[4]*N|0)/N,a[m+11]=(E[5]*N|0)/N,a[m+15]=(E[6]*N|0)/N,a[m+16]=(E[7]*N|0)/N}else a[m]=E[0],a[m+1]=E[1],a[m+5]=E[2],a[m+6]=E[3],a[m+10]=E[4],a[m+11]=E[5],a[m+15]=E[6],a[m+16]=E[7];h[m+2]=S[0],h[m+7]=S[1],h[m+12]=S[2],h[m+17]=S[3];var L=Math.min(C.worldAlpha,1),k=L<1&&_.premultipliedAlpha?(0,l.premultiplyTint)(C._tintRGB,L):C._tintRGB+(255*L<<24);h[m+3]=h[m+8]=h[m+13]=h[m+18]=k,a[m+4]=a[m+9]=a[m+14]=a[m+19]=_._virtalBoundId,m+=20}if(T.size=O-T.start,u.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var B=this.shader.attributes,F=this.vertexBuffers[this.vertexCount]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),j=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(F,B.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(F,B.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(F,B.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);B.aTextureId&&j.addAttribute(F,B.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=j}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(O=0;O<e;++O)p[O]._virtalBoundId=-1;for(O=0;O<b;++O){for(var U=s[O],z=U.textureCount,G=0;G<z;G++)x=U.textures[G],p[U.ids[G]]!==x&&this.renderer.bindTexture(x,U.ids[G],!0),x._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),t.drawElements(t.TRIANGLES,6*U.size,t.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},m.prototype.start=function(){this.renderer.bindShader(this.shader),u.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},m.prototype.stop=function(){this.flush()},m.prototype.destroy=function(){for(var t=0;t<this.vaoMax;t++)this.vertexBuffers[t]&&this.vertexBuffers[t].destroy(),this.vaos[t]&&this.vaos[t].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),p.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var e=0;e<this.buffers.length;++e)this.buffers[e].destroy()},m);function m(t){!function(t,e){if(!(t instanceof m))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,p.call(this,t));e.vertSize=5,e.vertByteSize=4*e.vertSize,e.size=u.default.SPRITE_BATCH_SIZE,e.buffers=[];for(var r=1;r<=d.default.nextPow2(e.size);r*=2)e.buffers.push(new h.default(4*r*e.vertByteSize));e.indices=(0,o.default)(e.size),e.shader=null,e.currentIndex=0,e.groups=[];for(var i=0;i<e.size;i++)e.groups[i]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return e.sprites=[],e.vertexBuffers=[],e.vaos=[],e.vaoMax=2,e.vertexCount=0,e.renderer.on("prerender",e.onPrerender,e),e}e.default=v,n.default.registerPlugin("sprite",v)},function(t,e,r){"use strict";e.__esModule=!0;var i=o(r(20)),n=o(r(76));function o(t){return t&&t.__esModule?t:{default:t}}var s,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,s=i.default),h.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var r=e.worldTransform,i=Math.atan2(r.b,r.a);(i=Math.round(i*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},h.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},h.prototype.pushSpriteMask=function(t,e){var r=this.alphaMaskPool[this.alphaMaskIndex];(r=r||(this.alphaMaskPool[this.alphaMaskIndex]=[new n.default(e)]))[0].resolution=this.renderer.resolution,r[0].maskSprite=e;var i=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,r),t.filterArea=i,this.alphaMaskIndex++},h.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},h.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},h.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},h.prototype.pushScissorMask=function(t,e){e.renderable=!0;var r=this.renderer._activeRenderTarget,i=e.getBounds();i.fit(r.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(i.x*n,(r.root?r.size.height-i.y-i.height:i.y)*n,i.width*n,i.height*n),this.scissorRenderTarget=r,this.scissorData=e,this.scissor=!0},h.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},h);function h(t){!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,s.call(this,t));return e.scissor=!1,e.scissorData=null,e.scissorRenderTarget=null,e.enableScissor=!0,e.alphaMaskPool=[],e.alphaMaskIndex=0,e}e.default=a},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){var i=o(t),n=o(e);return Object.assign(i,n)};var i,n=((i=r(6))&&i.__esModule?i:{default:i}).default.shader.defaultValue;function o(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),r={},i=void 0,o=t.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<o.length;s++){var a=o[s].trim();if(-1<a.indexOf("uniform")){var h=a.split(" "),u=h[1],l=h[2],c=1;-1<l.indexOf("[")&&(l=(i=l.split(/\[|]/))[0],c*=Number(i[1])),l.match(e)||(r[l]={value:n(u,c),name:l,type:u})}}return r}},function(t,e){var r,i,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var h,u=[],l=!1,c=-1;function d(){l&&h&&(l=!1,h.length?u=h.concat(u):c=-1,u.length&&f())}function f(){if(!l){var t=a(d);l=!0;for(var e=u.length;e;){for(h=u,u=[];++c<e;)h&&h[c].run();c=-1,e=u.length}h=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function y(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=y,n.addListener=y,n.once=y,n.off=y,n.removeListener=y,n.removeAllListeners=y,n.emit=y,n.prependListener=y,n.prependOnceListener=y,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=(i=r(20))&&i.__esModule?i:{default:i},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.default),a.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},a.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,r=this.stencilMaskStack.length;0===r&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,r,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},a.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},a.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},a.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},a.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},a);function a(t){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return e.stencilMaskStack=null,e}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=l(r(20)),n=l(r(29)),o=l(r(79)),s=r(4),a=l(r(21)),h=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(171)),u=l(r(44));function l(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var d=(f.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},f);function f(){c(this,f),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new s.Rectangle,this.destinationFrame=new s.Rectangle,this.filters=[]}var p,y="screen",g=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(v,p=i.default),v.prototype.pushFilter=function(t,e){var r=this.renderer,i=this.filterData;if(!i){i=this.renderer._activeRenderTarget.filterStack;var n=new d;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=r._activeRenderTarget,this.renderer._activeRenderTarget.filterData=i={index:0,stack:[n]},this.filterData=i}var o=i.stack[++i.index],s=i.stack[0].destinationFrame;o=o||(i.stack[i.index]=new d);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===r.screen.width&&t.filterArea.height===r.screen.height,h=e[0].resolution,u=0|e[0].padding,l=a?r.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,f=o.destinationFrame;c.x=(l.x*h|0)/h,c.y=(l.y*h|0)/h,c.width=(l.width*h|0)/h,c.height=(l.height*h|0)/h,a||(i.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(s),c.pad(u)),f.width=c.width,f.height=c.height;var p=this.getPotRenderTarget(r.gl,c.width,c.height,h);o.target=t,o.filters=e,o.resolution=h,(o.renderTarget=p).setFrame(f,c),r.bindRenderTarget(p),p.clear()},v.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],r=t.stack[t.index];this.quad.map(r.renderTarget.size,r.sourceFrame).upload();var i=r.filters;if(1===i.length)i[0].apply(this,r.renderTarget,e.renderTarget,!1,r),this.freePotRenderTarget(r.renderTarget);else{var n=r.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,r.resolution);o.setFrame(r.destinationFrame,r.sourceFrame),o.clear();var s=0;for(s=0;s<i.length-1;++s){i[s].apply(this,n,o,!0,r);var a=n;n=o,o=a}i[s].apply(this,n,e.renderTarget,!1,r),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}r.clear(),t.index--,0===t.index&&(this.filterData=null)},v.prototype.applyFilter=function(t,e,r,i){var n=this.renderer,o=n.gl,s=t.glShaders[n.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[n.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[n.CONTEXT_UID]=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),n.bindVao(null),this.quad.initVao(s)),n.bindVao(this.quad.vao),n.bindRenderTarget(r),i&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),r===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(s);var h=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=h,this.syncUniforms(s,t),n.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,h._glTextures[this.renderer.CONTEXT_UID].texture)},v.prototype.syncUniforms=function(t,e){var r=e.uniformData,i=e.uniforms,n=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var h in r)if(t.uniforms.data[h]){var u=r[h].type;if("sampler2d"===u&&0!==i[h]){if(i[h].baseTexture)t.uniforms[h]=this.renderer.bindTexture(i[h].baseTexture,n);else{t.uniforms[h]=n;var l=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],l.activeTexture(l.TEXTURE0+n),i[h].texture.bind()}n++}else if("mat3"===u)void 0!==i[h].a?t.uniforms[h]=i[h].toArray(!0):t.uniforms[h]=i[h];else if("vec2"===u)if(void 0!==i[h].x){var c=t.uniforms[h]||new Float32Array(2);c[0]=i[h].x,c[1]=i[h].y,t.uniforms[h]=c}else t.uniforms[h]=i[h];else"float"===u?t.uniforms.data[h].value!==r[h]&&(t.uniforms[h]=i[h]):t.uniforms[h]=i[h]}},v.prototype.getRenderTarget=function(t,e){var r=this.filterData.stack[this.filterData.index],i=this.getPotRenderTarget(this.renderer.gl,r.sourceFrame.width,r.sourceFrame.height,e||r.resolution);return i.setFrame(r.destinationFrame,r.sourceFrame),i},v.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},v.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return h.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},v.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return h.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},v.prototype.calculateSpriteMatrix=function(t,e){var r=this.filterData.stack[this.filterData.index];return h.calculateSpriteMatrix(t,r.sourceFrame,r.renderTarget.size,e)},v.prototype.destroy=function(t){var e=0<arguments.length&&void 0!==t&&t,r=this.renderer,i=this.managedFilters;r.off("prerender",this.onPrerender,this);for(var n=0;n<i.length;n++)e||i[n].glShaders[r.CONTEXT_UID].destroy(),delete i[n].glShaders[r.CONTEXT_UID];this.shaderCache={},e?this.pool={}:this.emptyPool()},v.prototype.getPotRenderTarget=function(t,e,r,i){var o=y;r*=i,(e*=i)===this._screenWidth&&r===this._screenHeight||(o=(65535&(e=u.default.nextPow2(e)))<<16|65535&(r=u.default.nextPow2(r))),this.pool[o]||(this.pool[o]=[]);var s=this.pool[o].pop();if(!s){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new n.default(t,e,r,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=i,s.defaultFrame.width=s.size.width=e/i,s.defaultFrame.height=s.size.height=r/i,s.filterPoolKey=o,s},v.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var r=0;r<e.length;r++)e[r].destroy(!0)}this.pool={}},v.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},v.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool[y];if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool[y]=[]}},v);function v(t){c(this,v);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,p.call(this,t));return e.gl=e.renderer.gl,e.quad=new o.default(e.gl,t.state.attribState),e.shaderCache={},e.pool={},e.filterData=null,e.managedFilters=[],e.renderer.on("prerender",e.onPrerender,e),e._screenWidth=t.view.width,e._screenHeight=t.view.height,e}e.default=g},function(t,e,r){"use strict";e.__esModule=!0,e.calculateScreenSpaceMatrix=function(t,e,r){var i=t.identity();return i.translate(e.x/r.width,e.y/r.height),i.scale(r.width,r.height),i},e.calculateNormalizedScreenSpaceMatrix=function(t,e,r){var i=t.identity();i.translate(e.x/r.width,e.y/r.height);var n=r.width/e.width,o=r.height/e.height;return i.scale(n,o),i},e.calculateSpriteMatrix=function(t,e,r,n){var o=n._texture.orig,s=t.set(r.width,0,0,r.height,e.x,e.y),a=n.worldTransform.copy(i.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(n.anchor.x,n.anchor.y),s};var i=r(4)},function(t,e,r){"use strict";e.__esModule=!0;var i,n=r(6),o=r(0),s=(i=r(29))&&i.__esModule?i:{default:i},a=r(2),h=(u.prototype.bindTexture=function(){},u.prototype.getTexture=function(){},u.prototype.updateTexture=function(t,e){var r=this.gl,i=!!t._glRenderTargets;if(!t.hasLoaded)return null;var a=this.renderer.boundTextures;if(void 0===e)for(var h=e=0;h<a.length;++h)if(a[h]===t){e=h;break}a[e]=t,r.activeTexture(r.TEXTURE0+e);var u=t._glTextures[this.renderer.CONTEXT_UID];if(u)i?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):u.upload(t.source);else{if(i){var l=new s.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);l.resize(t.width,t.height),u=(t._glRenderTargets[this.renderer.CONTEXT_UID]=l).texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(u=new n.GLTexture(this.gl,null,null,null,null)).bind(e),u.premultiplyAlpha=!0,u.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=u,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&u.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?u.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?u.enableWrapRepeat():u.enableWrapMirrorRepeat()):u.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?u.enableNearestScaling():u.enableLinearScaling()}return u},u.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var r=this.renderer,i=r.CONTEXT_UID,n=t._glTextures,o=t._glRenderTargets;if(n[i]&&(r.unbindTexture(t),n[i].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete n[i],!e)){var s=this._managedTextures.indexOf(t);-1!==s&&(0,a.removeItems)(this._managedTextures,s,1)}o&&o[i]&&(r._activeRenderTarget===o[i]&&r.bindRenderTarget(r.rootRenderTarget),o[i].destroy(),delete o[i])}},u.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},u.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},u);function u(t){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this),this.renderer=t,this.gl=t.gl,this._managedTextures=[]}e.default=h},function(t,e,r){"use strict";e.__esModule=!0;var i,n=r(0),o=(i=r(3))&&i.__esModule?i:{default:i},s=(a.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},a.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,r=!1,i=0;i<e.length;i++){var n=e[i];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),r=!(e[i]=null))}if(r){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},a.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var r=t.children.length-1;0<=r;r--)this.unload(t.children[r])},a);function a(t){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=o.default.GC_MAX_IDLE,this.checkCountMax=o.default.GC_MAX_CHECK_COUNT,this.mode=o.default.GC_MODE}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(175))&&i.__esModule?i:{default:i},o=(s.prototype.push=function(){var t=this.stack[this.stackIndex];t=t||(this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},s.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},s.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},s.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},s.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},s.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},s.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},s.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},s.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var r=1;r<this.maxAttribs;r++)this.gl.disableVertexAttribArray(r)},s.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},s);function s(t){!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=t,this.maxAttribs=t.getParameter(t.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,n.default)(t),this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")}e.default=o},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return e[i.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[i.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[i.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[i.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var i=r(0)},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e[i.DRAW_MODES.POINTS]=t.POINTS,e[i.DRAW_MODES.LINES]=t.LINES,e[i.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[i.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[i.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[i.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[i.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var i=r(0)},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){var r=o;r=(r=r.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var r=0;r<t;r++)0<r&&(e+="\nelse "),r<t-1&&(e+="if(textureId == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord);",e+="\n}";return(e+="\n")+"\n"}(e));for(var i=new n.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",r),s=[],a=0;a<e;a++)s[a]=a;return i.bind(),i.uniforms.uSamplers=s,i};var i,n=(i=r(21))&&i.__esModule?i:{default:i};r(7);var o=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e){var r=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(r){var i=document.createElement("canvas");i.width=1,i.height=1,e=n.default.createContext(i)}for(var a=e.createShader(e.FRAGMENT_SHADER);;){var h=o.replace(/%forloop%/gi,s(t));if(e.shaderSource(a,h),e.compileShader(a),e.getShaderParameter(a,e.COMPILE_STATUS))break;t=t/2|0}return r&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};var i,n=(i=r(6))&&i.__esModule?i:{default:i},o=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function s(t){for(var e="",r=0;r<t;++r)0<r&&(e+="\nelse "),r<t-1&&(e+="if(test == "+r+".0){}");return e}},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},n);function n(t){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.vertices=new ArrayBuffer(t),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}e.default=i},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=f(r(43)),o=f(r(8)),s=r(4),a=r(2),h=r(0),u=f(r(3)),l=f(r(80)),c=f(r(81)),d=f(r(182));function f(t){return t&&t.__esModule?t:{default:t}}var p,y={texture:!0,children:!1,baseTexture:!0},g=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(v,p=n.default),v.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var r=this.context,i=c.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=i.width,o=i.height,s=i.lines,a=i.lineHeight,h=i.lineWidths,u=i.maxLineWidth,l=i.fontProperties;this.canvas.width=Math.ceil((Math.max(1,n)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),r.scale(this.resolution,this.resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.strokeStyle=e.stroke,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;var d=void 0,f=void 0;if(e.dropShadow){r.fillStyle=e.dropShadowColor,r.globalAlpha=e.dropShadowAlpha,r.shadowBlur=e.dropShadowBlur,0<e.dropShadowBlur&&(r.shadowColor=e.dropShadowColor);for(var p=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,y=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,g=0;g<s.length;g++)d=e.strokeThickness/2,f=e.strokeThickness/2+g*a+l.ascent,"right"===e.align?d+=u-h[g]:"center"===e.align&&(d+=(u-h[g])/2),e.fill&&(this.drawLetterSpacing(s[g],d+p+e.padding,f+y+e.padding),e.stroke&&e.strokeThickness&&(r.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[g],d+p+e.padding,f+y+e.padding,!0),r.strokeStyle=e.stroke))}r.shadowBlur=0,r.globalAlpha=1,r.fillStyle=this._generateFillStyle(e,s);for(var v=0;v<s.length;v++)d=e.strokeThickness/2,f=e.strokeThickness/2+v*a+l.ascent,"right"===e.align?d+=u-h[v]:"center"===e.align&&(d+=(u-h[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[v],d+e.padding,f+e.padding,!0),e.fill&&this.drawLetterSpacing(s[v],d+e.padding,f+e.padding);this.updateTexture()}},v.prototype.drawLetterSpacing=function(t,e,r,i){var n=3<arguments.length&&void 0!==i&&i,o=this._style.letterSpacing;if(0!==o)for(var s=String.prototype.split.call(t,""),a=e,h=0,u="";h<t.length;)u=s[h++],n?this.context.strokeText(u,a,r):this.context.fillText(u,a,r),a+=this.context.measureText(u).width+o;else n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r)},v.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,d.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var r=this._texture,i=this._style,n=i.trim?0:i.padding,o=r.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,r.trim.width=r._frame.width=t.width/this.resolution,r.trim.height=r._frame.height=t.height/this.resolution,r.trim.x=-n,r.trim.y=-n,r.orig.width=r._frame.width-2*n,r.orig.height=r._frame.height-2*n,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},v.prototype.renderWebGL=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),p.prototype.renderWebGL.call(this,t)},v.prototype._renderCanvas=function(t){this.resolution!==t.resolution&&(this.resolution=t.resolution,this.dirty=!0),this.updateText(!0),p.prototype._renderCanvas.call(this,t)},v.prototype.getLocalBounds=function(t){return this.updateText(!0),p.prototype.getLocalBounds.call(this,t)},v.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},v.prototype._onStyleChange=function(){this.dirty=!0},v.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var r=void 0,i=void 0,n=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,u=t.fill.slice(),l=t.fillGradientStops.slice();if(!l.length)for(var c=u.length+1,d=1;d<c;++d)l.push(d/c);if(u.unshift(t.fill[0]),l.unshift(0),u.push(t.fill[t.fill.length-1]),l.push(1),t.fillGradientType===h.TEXT_GRADIENT.LINEAR_VERTICAL){r=this.context.createLinearGradient(s/2,0,s/2,a),i=(u.length+1)*e.length;for(var f=n=0;f<e.length;f++){n+=1;for(var p=0;p<u.length;p++)o="number"==typeof l[p]?l[p]/e.length+f/e.length:n/i,r.addColorStop(o,u[p]),n++}}else{r=this.context.createLinearGradient(0,a/2,s,a/2),i=u.length+1,n=1;for(var y=0;y<u.length;y++)o="number"==typeof l[y]?l[y]:n/i,r.addColorStop(o,u[y]),n++}return r},v.prototype.destroy=function(t){"boolean"==typeof t&&(t={children:t}),t=Object.assign({},y,t),p.prototype.destroy.call(this,t),this.context=null,this.canvas=null,this._style=null},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(v,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof l.default?this._style=t:this._style=new l.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),v);function v(t,e,r){!function(t,e){if(!(t instanceof v))throw new TypeError("Cannot call a class as a function")}(this),(r=r||document.createElement("canvas")).width=3,r.height=3;var i=o.default.fromCanvas(r,u.default.SCALE_MODE,"text");i.orig=new s.Rectangle,i.trim=new s.Rectangle;var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,p.call(this,i));return o.default.addToCache(n._texture,n._texture.baseTexture.textureCacheIds[0]),n.canvas=r,n.context=n.canvas.getContext("2d"),n.resolution=u.default.RESOLUTION,n._text=null,n._style=null,n._styleListener=null,n._font="",n.text=t,n.style=e,n.localStyleID=-1,n}e.default=g},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){var e=t.width,r=t.height,i=t.getContext("2d"),n=i.getImageData(0,0,e,r).data,o=n.length,s={top:null,left:null,right:null,bottom:null},a=null,h=void 0,u=void 0,l=void 0;for(h=0;h<o;h+=4)0!==n[h+3]&&(u=h/4%e,l=~~(h/4/e),null===s.top&&(s.top=l),null===s.left?s.left=u:u<s.left&&(s.left=u),null===s.right?s.right=u+1:s.right<u&&(s.right=u+1),null===s.bottom?s.bottom=l:s.bottom<l&&(s.bottom=l));return null!==s.top&&(e=s.right-s.left,r=s.bottom-s.top+1,a=i.getImageData(s.left,s.top,e,r)),{height:r,width:e,data:a}}},function(t,e,r){"use strict";e.__esModule=!0;var i=p(r(18)),n=p(r(46)),o=p(r(8)),s=p(r(82)),a=p(r(43)),h=r(4),u=r(2),l=r(0),c=p(r(39)),d=p(r(184)),f=p(r(19));function p(t){return t&&t.__esModule?t:{default:t}}var y,g=void 0,v=new h.Matrix,m=new h.Point,_=new Float32Array(4),x=new Float32Array(4),b=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(w,y=i.default),w.prototype.clone=function(){var t=new w;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},w.prototype._quadraticCurveLength=function(t,e,r,i,n,o){var s=t-2*r+n,a=e-2*i+o,h=2*r-2*t,u=2*i-2*e,l=4*(s*s+a*a),c=4*(s*h+a*u),d=h*h+u*u,f=2*Math.sqrt(l+c+d),p=Math.sqrt(l),y=2*l*p,g=2*Math.sqrt(d),v=c/p;return(y*f+p*c*(f-g)+(4*d*l-c*c)*Math.log((2*p+v+f)/(v+g)))/(4*y)},w.prototype._bezierCurveLength=function(t,e,r,i,n,o,s,a){for(var h=0,u=0,l=0,c=0,d=0,f=0,p=0,y=0,g=0,v=0,m=0,_=t,x=e,b=1;b<=10;++b)v=_-(y=(p=(f=(d=1-(u=b/10))*d)*d)*t+3*f*u*r+3*d*(l=u*u)*n+(c=l*u)*s),m=x-(g=p*e+3*f*u*i+3*d*l*o+c*a),_=y,x=g,h+=Math.sqrt(v*v+m*m);return h},w.prototype._segmentsCount=function(t){var e=Math.ceil(t/w.CURVES.maxLength);return e<w.CURVES.minSegments?e=w.CURVES.minSegments:e>w.CURVES.maxSegments&&(e=w.CURVES.maxSegments),e},w.prototype.lineStyle=function(t,e,r,i){var n=0<arguments.length&&void 0!==t?t:0,o=1<arguments.length&&void 0!==e?e:0,s=2<arguments.length&&void 0!==r?r:1,a=3<arguments.length&&void 0!==i?i:.5;if(this.lineWidth=n,this.lineColor=o,this.lineAlpha=s,this.lineAlignment=a,this.currentPath)if(this.currentPath.shape.points.length){var u=new h.Polygon(this.currentPath.shape.points.slice(-2));u.closed=!1,this.drawShape(u)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},w.prototype.moveTo=function(t,e){var r=new h.Polygon([t,e]);return r.closed=!1,this.drawShape(r),this},w.prototype.lineTo=function(t,e){var r=this.currentPath.shape.points,i=r[r.length-2],n=r[r.length-1];return i===t&&n===e||(r.push(t,e),this.dirty++),this},w.prototype.quadraticCurveTo=function(t,e,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var n=this.currentPath.shape.points,o=0,s=0;0===n.length&&this.moveTo(0,0);for(var a=n[n.length-2],h=n[n.length-1],u=w.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(a,h,t,e,r,i)):20,l=1;l<=u;++l){var c=l/u;o=a+(t-a)*c,s=h+(e-h)*c,n.push(o+(t+(r-t)*c-o)*c,s+(e+(i-e)*c-s)*c)}return this.dirty++,this},w.prototype.bezierCurveTo=function(t,e,r,i,n,o){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s=this.currentPath.shape.points,a=s[s.length-2],h=s[s.length-1];s.length-=2;var u=w.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(a,h,t,e,r,i,n,o)):20;return(0,d.default)(a,h,t,e,r,i,n,o,u,s),this.dirty++,this},w.prototype.arcTo=function(t,e,r,i,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-e,h=s-t,u=i-e,l=r-t,c=Math.abs(a*l-h*u);if(c<1e-8||0===n)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var d=a*a+h*h,f=u*u+l*l,p=a*u+h*l,y=n*Math.sqrt(d)/c,g=n*Math.sqrt(f)/c,v=y*p/d,m=g*p/f,_=y*l+g*h,x=y*u+g*a,b=h*(g+v),w=a*(g+v),T=l*(y+m),E=u*(y+m),S=Math.atan2(w-x,b-_),M=Math.atan2(E-x,T-_);this.arc(_+t,x+e,n,S,M,l*a<h*u)}return this.dirty++,this},w.prototype.arc=function(t,e,r,i,n,o){var s=5<arguments.length&&void 0!==o&&o;if(i===n)return this;!s&&n<=i?n+=l.PI_2:s&&i<=n&&(i+=l.PI_2);var a=n-i,h=w.CURVES.adaptive?this._segmentsCount(Math.abs(a)*r):40*Math.ceil(Math.abs(a)/l.PI_2);if(0==a)return this;var u=t+Math.cos(i)*r,c=e+Math.sin(i)*r,d=this.currentPath?this.currentPath.shape.points:null;if(d){var f=Math.abs(d[d.length-2]-u),p=Math.abs(d[d.length-1]-c);f<.001&&p<.001||d.push(u,c)}else this.moveTo(u,c),d=this.currentPath.shape.points;for(var y=a/(2*h),g=2*y,v=Math.cos(y),m=Math.sin(y),_=h-1,x=_%1/_,b=0;b<=_;++b){var T=y+i+g*(b+x*b),E=Math.cos(T),S=-Math.sin(T);d.push((v*E+m*S)*r+t,(v*-S+m*E)*r+e)}return this.dirty++,this},w.prototype.beginFill=function(t,e){var r=0<arguments.length&&void 0!==t?t:0,i=1<arguments.length&&void 0!==e?e:1;return this.filling=!0,this.fillColor=r,this.fillAlpha=i,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},w.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},w.prototype.drawRect=function(t,e,r,i){return this.drawShape(new h.Rectangle(t,e,r,i)),this},w.prototype.drawRoundedRect=function(t,e,r,i,n){return this.drawShape(new h.RoundedRectangle(t,e,r,i,n)),this},w.prototype.drawCircle=function(t,e,r){return this.drawShape(new h.Circle(t,e,r)),this},w.prototype.drawEllipse=function(t,e,r,i){return this.drawShape(new h.Ellipse(t,e,r,i)),this},w.prototype.drawPolygon=function(t){var e=t,r=!0;if(e instanceof h.Polygon&&(r=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var i=0;i<e.length;++i)e[i]=arguments[i]}var n=new h.Polygon(e);return n.closed=r,this.drawShape(n),this},w.prototype.drawStar=function(t,e,r,i,n,o){var s=5<arguments.length&&void 0!==o?o:0;n=n||i/2;for(var a=-1*Math.PI/2+s,h=2*r,u=l.PI_2/h,c=[],d=0;d<h;d++){var f=d%2?n:i,p=d*u+a;c.push(t+f*Math.cos(p),e+f*Math.sin(p))}return this.drawPolygon(c)},w.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},w.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===l.SHAPES.RECT&&!this.graphicsData[0].lineWidth},w.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},w.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new a.default(new o.default(o.default.WHITE)));var r=this._spriteRect,i=this.graphicsData[0].fillColor;if(16777215===this.tint)r.tint=i;else if(this.tint!==this._prevRectTint||i!==this._prevRectFillColor){var n=_,s=x;(0,u.hex2rgb)(i,n),(0,u.hex2rgb)(this.tint,s),n[0]*=s[0],n[1]*=s[1],n[2]*=s[2],r.tint=(0,u.rgb2hex)(n),this._prevRectTint=this.tint,this._prevRectFillColor=i}r.alpha=this.graphicsData[0].fillAlpha,r.worldAlpha=this.worldAlpha*r.alpha,r.blendMode=this.blendMode,r._texture._frame.width=e.width,r._texture._frame.height=e.height,r.transform.worldTransform=this.transform.worldTransform,r.anchor.set(-e.x/e.width,-e.y/e.height),r._onAnchorUpdate(),r._renderWebGL(t)},w.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},w.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},w.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,m);for(var e=this.graphicsData,r=0;r<e.length;++r){var i=e[r];if(i.fill&&i.shape&&i.shape.contains(m.x,m.y)){if(i.holes)for(var n=0;n<i.holes.length;n++)if(i.holes[n].contains(m.x,m.y))return!1;return!0}}return!1},w.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,r=1/0,i=-1/0;if(this.graphicsData.length)for(var n=0,o=0,s=0,a=0,h=0,u=0;u<this.graphicsData.length;u++){var c=this.graphicsData[u],d=c.type,f=c.lineWidth*c.lineAlignment;if(n=c.shape,d===l.SHAPES.RECT||d===l.SHAPES.RREC)o=n.x-f,s=n.y-f,t=o<t?o:t,e=e<o+(a=n.width+2*f)?o+a:e,r=s<r?s:r,i=i<s+(h=n.height+2*f)?s+h:i;else if(d===l.SHAPES.CIRC)o=n.x,s=n.y,t=o-(a=n.radius+f)<t?o-a:t,e=e<o+a?o+a:e,r=s-(h=n.radius+f)<r?s-h:r,i=i<s+h?s+h:i;else if(d===l.SHAPES.ELIP)o=n.x,s=n.y,t=o-(a=n.width+f)<t?o-a:t,e=e<o+a?o+a:e,r=s-(h=n.height+f)<r?s-h:r,i=i<s+h?s+h:i;else for(var p=n.points,y=0,g=0,v=0,m=0,_=0,x=0,b=0,w=0,T=0;T+2<p.length;T+=2)o=p[T],s=p[T+1],y=p[T+2],g=p[T+3],v=Math.abs(y-o),m=Math.abs(g-s),h=2*f,(a=Math.sqrt(v*v+m*m))<1e-9||(t=(b=(y+o)/2)-(_=(h/a*m+v)/2)<t?b-_:t,e=e<b+_?b+_:e,r=(w=(g+s)/2)-(x=(h/a*v+m)/2)<r?w-x:r,i=i<w+x?w+x:i)}else i=r=e=t=0;var E=this.boundsPadding;this._localBounds.minX=t-E,this._localBounds.maxX=e+E,this._localBounds.minY=r-E,this._localBounds.maxY=i+E},w.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new s.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===l.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},w.prototype.generateCanvasTexture=function(t,e){var r=1<arguments.length&&void 0!==e?e:1,i=this.getLocalBounds(),s=n.default.create(i.width,i.height,t,r);g=g||new f.default,this.transform.updateLocalTransform(),this.transform.localTransform.copy(v),v.invert(),v.tx-=i.x,v.ty-=i.y,g.render(this,s,!0,v);var a=o.default.fromCanvas(s.baseTexture._canvasRenderTarget.canvas,t,"graphics");return a.baseTexture.resolution=r,a.baseTexture.update(),a},w.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},w.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},w.prototype.destroy=function(t){y.prototype.destroy.call(this,t);for(var e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();for(var r in this._webGL)for(var i=0;i<this._webGL[r].data.length;++i)this._webGL[r].data[i].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},w);function w(){var t=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(t,e){if(!(t instanceof w))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,y.call(this));return e.fillAlpha=1,e.lineWidth=0,e.nativeLines=t,e.lineColor=0,e.lineAlignment=.5,e.graphicsData=[],e.tint=16777215,e._prevTint=16777215,e.blendMode=l.BLEND_MODES.NORMAL,e.currentPath=null,e._webGL={},e.isMask=!1,e.boundsPadding=0,e._localBounds=new c.default,e.dirty=0,e.fastRectDirty=-1,e.clearDirty=0,e.boundsDirty=-1,e.cachedSpriteDirty=!1,e._spriteRect=null,e._fastRect=!1,e._prevRectTint=null,e._prevRectFillColor=null,e}(e.default=b)._SPRITE_TEXTURE=null,b.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r,i,n,o,s,a,h){var u=9<arguments.length&&void 0!==arguments[9]?arguments[9]:[],l=0,c=0,d=0,f=0,p=0;u.push(t,e);for(var y=1,g=0;y<=h;++y)d=(c=(l=1-(g=y/h))*l)*l,p=(f=g*g)*g,u.push(d*t+3*c*g*r+3*l*f*n+p*s,d*e+3*c*g*i+3*l*f*o+p*a);return u}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(2),n=r(0),o=f(r(27)),s=f(r(28)),a=f(r(186)),h=f(r(187)),u=f(r(188)),l=f(r(189)),c=f(r(190)),d=f(r(191));function f(t){return t&&t.__esModule?t:{default:t}}var p,y=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(g,p=o.default),g.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new h.default(this.gl)},g.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},g.prototype.render=function(t){var e=this.renderer,r=e.gl,n=void 0,o=t._webGL[this.CONTEXT_UID];o&&t.dirty===o.dirty||(this.updateGraphics(t),o=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var a=0,h=o.data.length;a<h;a++){var u=(n=o.data[a]).shader;e.bindShader(u),u.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),u.uniforms.tint=(0,i.hex2rgb)(t.tint),u.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?r.drawArrays(r.LINES,0,n.points.length/6):n.vao.draw(r.TRIANGLE_STRIP,n.indices.length)}},g.prototype.updateGraphics=function(t){var e=this.renderer.gl,r=t._webGL[this.CONTEXT_UID];if((r=r||(t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1})).dirty=t.dirty,t.clearDirty!==r.clearDirty){r.clearDirty=t.clearDirty;for(var i=0;i<r.data.length;i++)this.graphicsDataPool.push(r.data[i]);r.data.length=0,r.lastIndex=0}for(var o=void 0,s=void 0,a=r.lastIndex;a<t.graphicsData.length;a++){var h=t.graphicsData[a];o=this.getWebGLData(r,0),h.nativeLines&&h.lineWidth&&(s=this.getWebGLData(r,0,!0),r.lastIndex++),h.type===n.SHAPES.POLY&&(0,u.default)(h,o,s),h.type===n.SHAPES.RECT?(0,l.default)(h,o,s):h.type===n.SHAPES.CIRC||h.type===n.SHAPES.ELIP?(0,d.default)(h,o,s):h.type===n.SHAPES.RREC&&(0,c.default)(h,o,s),r.lastIndex++}this.renderer.bindVao(null);for(var f=0;f<r.data.length;f++)(o=r.data[f]).dirty&&o.upload()},g.prototype.getWebGLData=function(t,e,r){var i=t.data[t.data.length-1];return(!i||i.nativeLines!==r||32e4<i.points.length)&&((i=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=r,i.reset(e),t.data.push(i)),i.dirty=!0,i},g);function g(t){!function(t,e){if(!(t instanceof g))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,p.call(this,t));return e.graphicsDataPool=[],e.primitiveShader=null,e.gl=t.gl,e.CONTEXT_UID=0,e}e.default=y,s.default.registerPlugin("graphics",y)},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(6))&&i.__esModule?i:{default:i},o=(s.prototype.reset=function(){this.points.length=0,this.indices.length=0},s.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},s.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},s);function s(t,e,r){!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=n.default.GLBuffer.createVertexBuffer(t),this.indexBuffer=n.default.GLBuffer.createIndexBuffer(t),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=e,this.vao=new n.default.VertexArrayObject(t,r).addIndex(this.indexBuffer).addAttribute(this.buffer,e.attributes.aVertexPosition,t.FLOAT,!1,24,0).addAttribute(this.buffer,e.attributes.aColor,t.FLOAT,!1,24,8)}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=(i=r(21))&&i.__esModule?i:{default:i},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.default),a);function a(t){return function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}e.default=s},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){t.points=t.shape.points.slice();var s=t.points;if(t.fill&&6<=s.length){for(var a=[],h=t.holes,u=0;u<h.length;u++){var l=h[u];a.push(s.length/2),s=s.concat(l.points)}var c=e.points,d=e.indices,f=s.length/2,p=(0,n.hex2rgb)(t.fillColor),y=t.fillAlpha,g=p[0]*y,v=p[1]*y,m=p[2]*y,_=(0,o.default)(s,a,2);if(!_)return;for(var x=c.length/6,b=0;b<_.length;b+=3)d.push(_[b]+x),d.push(_[b]+x),d.push(_[b+1]+x),d.push(_[b+2]+x),d.push(_[b+2]+x);for(var w=0;w<f;w++)c.push(s[2*w],s[2*w+1],g,v,m,y)}0<t.lineWidth&&(0,i.default)(t,e,r)};var i=s(r(30)),n=r(2),o=s(r(42));function s(t){return t&&t.__esModule?t:{default:t}}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){var i=t.shape,s=i.x,a=i.y,h=i.width,u=i.height;if(t.fill){var l=(0,o.hex2rgb)(t.fillColor),c=t.fillAlpha,d=l[0]*c,f=l[1]*c,p=l[2]*c,y=e.points,g=e.indices,v=y.length/6;y.push(s,a),y.push(d,f,p,c),y.push(s+h,a),y.push(d,f,p,c),y.push(s,a+u),y.push(d,f,p,c),y.push(s+h,a+u),y.push(d,f,p,c),g.push(v,v,1+v,2+v,3+v,3+v)}if(t.lineWidth){var m=t.points;t.points=[s,a,s+h,a,s+h,a+u,s,a+u,s,a],(0,n.default)(t,e,r),t.points=m}};var i,n=(i=r(30))&&i.__esModule?i:{default:i},o=r(2)},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){var s=t.shape,a=s.x,u=s.y,l=s.width,c=s.height,d=s.radius,f=[];if(f.push(a+d,u),h(a+l-d,u,a+l,u,a+l,u+d,f),h(a+l,u+c-d,a+l,u+c,a+l-d,u+c,f),h(a+d,u+c,a,u+c,a,u+c-d,f),h(a,u+d,a,u,a+d+1e-10,u,f),t.fill){for(var p=(0,o.hex2rgb)(t.fillColor),y=t.fillAlpha,g=p[0]*y,v=p[1]*y,m=p[2]*y,_=e.points,x=e.indices,b=_.length/6,w=(0,i.default)(f,null,2),T=0,E=w.length;T<E;T+=3)x.push(w[T]+b),x.push(w[T]+b),x.push(w[T+1]+b),x.push(w[T+2]+b),x.push(w[T+2]+b);for(var S=0,M=f.length;S<M;S++)_.push(f[S],f[++S],g,v,m,y)}if(t.lineWidth){var O=t.points;t.points=f,(0,n.default)(t,e,r),t.points=O}};var i=s(r(42)),n=s(r(30)),o=r(2);function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,r){return t+(e-t)*r}function h(t,e,r,i,n,o,s){for(var h=6<arguments.length&&void 0!==s?s:[],u=0,l=0,c=0,d=0,f=0,p=0,y=0,g=0;y<=20;++y)u=a(t,r,g=y/20),l=a(e,i,g),c=a(r,n,g),d=a(i,o,g),f=a(u,c,g),p=a(l,d,g),h.push(f,p);return h}},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t,e,r){var i,a=t.shape,h=a.x,u=a.y,l=void 0;if(i=t.type===o.SHAPES.CIRC?(l=a.radius,a.radius):(l=a.width,a.height),0!==l&&0!==i){var c=Math.floor(30*Math.sqrt(a.radius))||Math.floor(15*Math.sqrt(a.width+a.height)),d=2*Math.PI/c;if(t.fill){var f=(0,s.hex2rgb)(t.fillColor),p=t.fillAlpha,y=f[0]*p,g=f[1]*p,v=f[2]*p,m=e.points,_=e.indices,x=m.length/6;_.push(x);for(var b=0;b<c+1;b++)m.push(h,u,y,g,v,p),m.push(h+Math.sin(d*b)*l,u+Math.cos(d*b)*i,y,g,v,p),_.push(x++,x++);_.push(x-1)}if(t.lineWidth){var w=t.points;t.points=[];for(var T=0;T<c;T++)t.points.push(h+Math.sin(d*-T)*l,u+Math.cos(d*-T)*i);t.points.push(t.points[0],t.points[1]),(0,n.default)(t,e,r),t.points=w}}};var i,n=(i=r(30))&&i.__esModule?i:{default:i},o=r(0),s=r(2)},function(t,e,r){"use strict";e.__esModule=!0;var i,n=(i=r(19))&&i.__esModule?i:{default:i},o=r(0),s=(a.prototype.render=function(t){var e=this.renderer,r=e.context,i=t.worldAlpha,n=t.transform.worldTransform,s=e.resolution;r.setTransform(n.a*s,n.b*s,n.c*s,n.d*s,n.tx*s,n.ty*s),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var h=t.graphicsData[a],u=h.shape,l=h._fillTint,c=h._lineTint;if(r.lineWidth=h.lineWidth,h.type===o.SHAPES.POLY){r.beginPath();var d=u.points,f=h.holes,p=void 0,y=void 0;r.moveTo(d[0],d[1]);for(var g=2;g<d.length;g+=2)r.lineTo(d[g],d[g+1]);if(u.closed&&r.closePath(),0<f.length){for(var v=p=0;v<d.length;v+=2)p+=d[v]*d[v+3]-d[v+1]*d[v+2];for(var m=0;m<f.length;m++){d=f[m].points;for(var _=y=0;_<d.length;_+=2)y+=d[_]*d[_+3]-d[_+1]*d[_+2];if(r.moveTo(d[0],d[1]),y*p<0)for(var x=2;x<d.length;x+=2)r.lineTo(d[x],d[x+1]);else for(var b=d.length-2;2<=b;b-=2)r.lineTo(d[b],d[b+1]);f[m].closed&&r.closePath()}}h.fill&&(r.globalAlpha=h.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),h.lineWidth&&(r.globalAlpha=h.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(h.type===o.SHAPES.RECT)!h.fillColor&&0!==h.fillColor||(r.globalAlpha=h.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fillRect(u.x,u.y,u.width,u.height)),h.lineWidth&&(r.globalAlpha=h.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.strokeRect(u.x,u.y,u.width,u.height));else if(h.type===o.SHAPES.CIRC)r.beginPath(),r.arc(u.x,u.y,u.radius,0,2*Math.PI),r.closePath(),h.fill&&(r.globalAlpha=h.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),h.lineWidth&&(r.globalAlpha=h.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke());else if(h.type===o.SHAPES.ELIP){var w=2*u.width,T=2*u.height,E=u.x-w/2,S=u.y-T/2;r.beginPath();var M=w/2*.5522848,O=T/2*.5522848,P=E+w,C=S+T,A=E+w/2,I=S+T/2;r.moveTo(E,I),r.bezierCurveTo(E,I-O,A-M,S,A,S),r.bezierCurveTo(A+M,S,P,I-O,P,I),r.bezierCurveTo(P,I+O,A+M,C,A,C),r.bezierCurveTo(A-M,C,E,I+O,E,I),r.closePath(),h.fill&&(r.globalAlpha=h.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),h.lineWidth&&(r.globalAlpha=h.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}else if(h.type===o.SHAPES.RREC){var R=u.x,D=u.y,N=u.width,L=u.height,k=u.radius,B=Math.min(N,L)/2|0;k=B<k?B:k,r.beginPath(),r.moveTo(R,D+k),r.lineTo(R,D+L-k),r.quadraticCurveTo(R,D+L,R+k,D+L),r.lineTo(R+N-k,D+L),r.quadraticCurveTo(R+N,D+L,R+N,D+L-k),r.lineTo(R+N,D+k),r.quadraticCurveTo(R+N,D,R+N-k,D),r.lineTo(R+k,D),r.quadraticCurveTo(R,D,R,D+k),r.closePath(),!h.fillColor&&0!==h.fillColor||(r.globalAlpha=h.fillAlpha*i,r.fillStyle="#"+("00000"+(0|l).toString(16)).substr(-6),r.fill()),h.lineWidth&&(r.globalAlpha=h.lineAlpha*i,r.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),r.stroke())}}},a.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,r=(t.tint>>8&255)/255,i=(255&t.tint)/255,n=0;n<t.graphicsData.length;++n){var o=t.graphicsData[n],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*r*255<<8)+(255&s)/255*i*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*r*255<<8)+(255&a)/255*i*255}},a.prototype.renderPolygon=function(t,e,r){r.moveTo(t[0],t[1]);for(var i=1;i<t.length/2;++i)r.lineTo(t[2*i],t[2*i+1]);e&&r.closePath()},a.prototype.destroy=function(){this.renderer=null},a);function a(t){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.renderer=t}e.default=s,n.default.registerPlugin("graphics",s)},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=r(1),o=r(2),s=(function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(a,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),a.prototype._updateResolution=function(t){var e=this.data.meta.scale,r=(0,o.getResolutionOfUrl)(t,null);return null===r&&(r=void 0!==e?parseFloat(e):1),1!==r&&(this.baseTexture.resolution=r,this.baseTexture.update()),r},a.prototype.parse=function(t){this._batchIndex=0,this._callback=t,this._frameKeys.length<=a.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},a.prototype._processFrames=function(t){for(var e=t,r=a.BATCH_SIZE,i=this.baseTexture.sourceScale;e-t<r&&e<this._frameKeys.length;){var o=this._frameKeys[e],s=this._frames[o],h=s.frame;if(h){var u,l=null,c=!1!==s.trimmed&&s.sourceSize?s.sourceSize:s.frame,d=new n.Rectangle(0,0,Math.floor(c.w*i)/this.resolution,Math.floor(c.h*i)/this.resolution);u=s.rotated?new n.Rectangle(Math.floor(h.x*i)/this.resolution,Math.floor(h.y*i)/this.resolution,Math.floor(h.h*i)/this.resolution,Math.floor(h.w*i)/this.resolution):new n.Rectangle(Math.floor(h.x*i)/this.resolution,Math.floor(h.y*i)/this.resolution,Math.floor(h.w*i)/this.resolution,Math.floor(h.h*i)/this.resolution),!1!==s.trimmed&&s.spriteSourceSize&&(l=new n.Rectangle(Math.floor(s.spriteSourceSize.x*i)/this.resolution,Math.floor(s.spriteSourceSize.y*i)/this.resolution,Math.floor(h.w*i)/this.resolution,Math.floor(h.h*i)/this.resolution)),this.textures[o]=new n.Texture(this.baseTexture,u,d,l,s.rotated?2:0,s.anchor),n.Texture.addToCache(this.textures[o],o)}e++}},a.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];var r=t[e],i=Array.isArray(r),n=0;for(r=i?r:r[Symbol.iterator]();;){var o;if(i){if(n>=r.length)break;o=r[n++]}else{if((n=r.next()).done)break;o=n.value}var s=o;this.animations[e].push(this.textures[s])}}},a.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},a.prototype._nextBatch=function(){var t=this;this._processFrames(this._batchIndex*a.BATCH_SIZE),this._batchIndex++,setTimeout(function(){t._batchIndex*a.BATCH_SIZE<t._frameKeys.length?t._nextBatch():(t._processAnimations(),t._parseComplete())},0)},a.prototype.destroy=function(t){var e=0<arguments.length&&void 0!==t&&t;for(var r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&this.baseTexture.destroy(),this.baseTexture=null},a);function a(t,e){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.baseTexture=t,this.textures={},this.animations={},this.data=e,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}e.default=s},function(t,e,r){"use strict";e.__esModule=!0,e.default=function(t){var e=t.mesh,r=t.particles,i=t.extras,o=t.filters,s=t.prepare,a=t.loaders,h=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),r.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),i.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),i.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),i.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var u=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],l=function(e){var r=u[e];Object.defineProperty(t[r.parent],"DEFAULT",{get:function(){return n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]},set:function(e){n("PIXI."+r.parent+".DEFAULT has been deprecated, please use PIXI.settings."+r.target),t.settings[r.target]=e}})},c=0;c<u.length;c++)l(c);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),i.AnimatedSprite&&Object.defineProperties(i,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),i.AnimatedSprite}}}),i&&Object.defineProperties(i,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,r){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,r)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,r,i){this.legacyRenderer.render(t,this,r,e,!i),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},i.BitmapText&&(i.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),1<t.indexOf("italic")?this._fontStyle="italic":-1<t.indexOf("oblique")?this._fontStyle="oblique":this._fontStyle="normal",-1<t.indexOf("small-caps")?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),r=-1;this._fontSize=26;for(var i=0;i<e.length;++i)if(e[i].match(/(px|pt|em|%)/)){r=i,this._fontSize=e[i];break}this._fontWeight="normal";for(var o=0;o<r;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(-1<r&&r<e.length-1){this._fontFamily="";for(var s=r+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,r){t.Texture.addToCache(e,r),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var d=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),d=t},get:function(){return d}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var f=a.Resource,p=a.Loader;Object.defineProperties(f.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===f.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===f.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===f.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===f.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===f.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}h.interactiveTarget&&Object.defineProperty(h.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),h.InteractionManager&&(Object.defineProperty(h.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(h.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var i={};function n(t){if(!i[t]){var e=(new Error).stack;void 0===e?console.warn("Deprecation Warning: ",t):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",t),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",t),console.warn(e))),i[t]=!0}}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(85);Object.defineProperty(e,"accessibleTarget",{enumerable:!0,get:function(){return o(i).default}});var n=r(196);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AccessibilityManager",{enumerable:!0,get:function(){return o(n).default}})},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),n=s(r(40)),o=s(r(85));function s(t){return t&&t.__esModule?t:{default:t}}i.utils.mixins.delayMixin(i.DisplayObject.prototype,o.default);var a=(h.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},h.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},h.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},h.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,r=0;r<e.length;r++)this.updateAccessibleObjects(e[r])}},h.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,r=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,i.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var a=s.hitArea,h=s.worldTransform;s.hitArea?(n.style.left=(h.tx+a.x*h.a)*e+"px",n.style.top=(h.ty+a.y*h.d)*r+"px",n.style.width=a.width*h.a*e+"px",n.style.height=a.height*h.d*r+"px"):(a=s.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*r+"px",n.style.width=a.width*e+"px",n.style.height=a.height*r+"px",n.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(n.title=s.accessibleTitle),n.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&n.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},h.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},h.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",-1<navigator.userAgent.toLowerCase().indexOf("chrome")?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,(t._accessibleDiv=e).displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},h.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},h.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},h.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},h.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},h.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},h.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},h);function h(t){!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this),!n.default.tablet&&!n.default.phone||navigator.isCocoonJS||this.createTouchHook();var e=document.createElement("div");e.style.width="100px",e.style.height="100px",e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.zIndex=2,this.div=e,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=t,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}e.default=a,i.WebGLRenderer.registerPlugin("accessibility",a),i.CanvasRenderer.registerPlugin("accessibility",a)},function(t,e,r){"use strict";e.__esModule=!0;var i=r(198);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return o(i).default}});var n=r(199);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return o(n).default}})},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),n=new i.Rectangle,o=(s.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},s.prototype.base64=function(t){return this.canvas(t).toDataURL()},s.prototype.canvas=function(t){var e=this.renderer,r=void 0,o=void 0,s=void 0,a=!1,h=void 0,u=!1;t&&(t instanceof i.RenderTexture?h=t:(h=this.renderer.generateTexture(t),u=!0)),h?(o=(r=h.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=h.frame,a=!1):(o=(r=this.renderer.rootRenderTarget).resolution,a=!0,(s=n).width=r.size.width,s.height=r.size.height);var l=s.width*o,c=s.height*o,d=new i.CanvasRenderTarget(l,c,1);if(r){e.bindRenderTarget(r);var f=new Uint8Array(4*l*c),p=e.gl;p.readPixels(s.x*o,s.y*o,l,c,p.RGBA,p.UNSIGNED_BYTE,f);var y=d.context.getImageData(0,0,l,c);y.data.set(f),d.context.putImageData(y,0,0),a&&(d.context.scale(1,-1),d.context.drawImage(d.canvas,0,-c))}return u&&h.destroy(!0),d.canvas},s.prototype.pixels=function(t){var e=this.renderer,r=void 0,o=void 0,s=void 0,a=void 0,h=!1;t&&(t instanceof i.RenderTexture?a=t:(a=this.renderer.generateTexture(t),h=!0)),a?(o=(r=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=a.frame):(o=(r=this.renderer.rootRenderTarget).resolution,(s=n).width=r.size.width,s.height=r.size.height);var u=s.width*o,l=s.height*o,c=new Uint8Array(4*u*l);if(r){e.bindRenderTarget(r);var d=e.gl;d.readPixels(s.x*o,s.y*o,u,l,d.RGBA,d.UNSIGNED_BYTE,c)}return h&&a.destroy(!0),c},s.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},s);function s(t){!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(this.renderer=t).extract=this}e.default=o,i.WebGLRenderer.registerPlugin("extract",o)},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),n=new i.Rectangle,o=(s.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},s.prototype.base64=function(t){return this.canvas(t).toDataURL()},s.prototype.canvas=function(t){var e=this.renderer,r=void 0,o=void 0,s=void 0,a=void 0;t&&(a=t instanceof i.RenderTexture?t:e.generateTexture(t)),a?(r=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(r=e.rootContext,o=e.resolution,(s=n).width=this.renderer.width,s.height=this.renderer.height);var h=s.width*o,u=s.height*o,l=new i.CanvasRenderTarget(h,u,1),c=r.getImageData(s.x*o,s.y*o,h,u);return l.context.putImageData(c,0,0),l.canvas},s.prototype.pixels=function(t){var e=this.renderer,r=void 0,o=void 0,s=void 0,a=void 0;return t&&(a=t instanceof i.RenderTexture?t:e.generateTexture(t)),a?(r=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(r=e.rootContext,(s=n).width=e.width,s.height=e.height),r.getImageData(0,0,s.width*o,s.height*o).data},s.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},s);function s(t){!function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),(this.renderer=t).extract=this}e.default=o,i.CanvasRenderer.registerPlugin("extract",o)},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.Sprite),a.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&o.ticker.shared.remove(this.update,this))},a.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&o.ticker.shared.add(this.update,this,o.UPDATE_PRIORITY.HIGH))},a.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},a.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},a.prototype.update=function(t){var e=this.animationSpeed*t,r=this.currentFrame;if(null!==this._durations){var i=this._currentTime%1*this._durations[this.currentFrame];for(i+=e/60*1e3;i<0;)this._currentTime--,i+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);i>=this._durations[this.currentFrame];)i-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=i/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):r!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<r?this.onLoop():this.animationSpeed<0&&this.currentFrame>r&&this.onLoop()),this.updateTexture())},a.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},a.prototype.destroy=function(t){this.stop(),n.prototype.destroy.call(this,t)},a.fromFrames=function(t){for(var e=[],r=0;r<t.length;++r)e.push(o.Texture.fromFrame(t[r]));return new a(e)},a.fromImages=function(t){for(var e=[],r=0;r<t.length;++r)e.push(o.Texture.fromImage(t[r]));return new a(e)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(a,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof o.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),a);function a(t,e){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t[0]instanceof o.Texture?t[0]:t[0].texture));return r._textures=null,r._durations=null,r.textures=t,r._autoUpdate=!1!==e,r.animationSpeed=1,r.loop=!0,r.updateAnchor=!1,r.onComplete=null,r.onFrameChange=null,r.onLoop=null,r._currentTime=0,r.playing=!1,r}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o,s=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),a=(n=r(26))&&n.__esModule?n:{default:n},h=new s.Point,u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,o=s.Sprite),l.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},l.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},l.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var r=t.context,i=this.worldTransform,n=t.resolution,o=2===e.rotate,h=e.baseTexture,u=h.resolution,l=this.tilePosition.x/this.tileScale.x%e.orig.width*u,c=this.tilePosition.y/this.tileScale.y%e.orig.height*u;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var d=new s.CanvasRenderTarget(e.orig.width,e.orig.height,u);if(16777215!==this.tint)this.tintedTexture=a.default.getTintedTexture(this,this.tint),d.context.drawImage(this.tintedTexture,0,0);else{var f=e._frame.x*u,p=e._frame.y*u,y=e._frame.width*u,g=e._frame.height*u,v=(e.trim?e.trim.width:e.orig.width)*u,m=(e.trim?e.trim.height:e.orig.height)*u,_=(e.trim?e.trim.x:0)*u,x=(e.trim?e.trim.y:0)*u;o?(d.context.rotate(-Math.PI/2),d.context.translate(-m,0),d.context.drawImage(h.source,f,p,y,g,-x,_,m,v)):d.context.drawImage(h.source,f,p,y,g,_,x,v,m)}this.cachedTint=this.tint,this._canvasPattern=d.context.createPattern(d.canvas,"repeat")}r.globalAlpha=this.worldAlpha,r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),t.setBlendMode(this.blendMode),r.fillStyle=this._canvasPattern,r.scale(this.tileScale.x/u,this.tileScale.y/u);var b=this.anchor.x*-this._width*u,w=this.anchor.y*-this._height*u;this.uvRespectAnchor?(r.translate(l,c),r.fillRect(b-l,w-c,this._width/this.tileScale.x*u,this._height/this.tileScale.y*u)):(r.translate(l+b,c+w),r.fillRect(-l,-c,this._width/this.tileScale.x*u,this._height/this.tileScale.y*u))}},l.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,r=this._width*(1-this._anchor._x),i=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,r,i)},l.prototype.getLocalBounds=function(t){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new s.Rectangle),t=this._localBoundsRect),this._bounds.getRectangle(t)):o.prototype.getLocalBounds.call(this,t)},l.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,h);var e=this._width,r=this._height,i=-e*this.anchor._x;if(h.x>=i&&h.x<i+e){var n=-r*this.anchor._y;if(h.y>=n&&h.y<n+r)return!0}return!1},l.prototype.destroy=function(t){o.prototype.destroy.call(this,t),this.tileTransform=null,this.uvTransform=null},l.from=function(t,e,r){return new l(s.Texture.from(t),e,r)},l.fromFrame=function(t,e,r){var i=s.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new l(i,e,r)},l.fromImage=function(t,e,r,i,n){return new l(s.Texture.fromImage(t,i,n),e,r)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(l,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),l);function l(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(t,e){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t));return i.tileTransform=new s.TransformStatic,i._width=e,i._height=r,i._canvasPattern=null,i.uvTransform=t.transform||new s.TextureMatrix(t),i.pluginName="tilingSprite",i.uvRespectAnchor=!1,i}e.default=u},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),n=r(0);r(7);var o,s=new i.Matrix,a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,o=i.ObjectRenderer),h.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new i.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new i.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new i.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},h.prototype.render=function(t){var e=this.renderer,r=this.quad;e.bindVao(r.vao);var o=r.vertices;o[0]=o[6]=t._width*-t.anchor.x,o[1]=o[3]=t._height*-t.anchor.y,o[2]=o[4]=t._width*(1-t.anchor.x),o[5]=o[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((o=r.uvs)[0]=o[6]=-t.anchor.x,o[1]=o[3]=-t.anchor.y,o[2]=o[4]=1-t.anchor.x,o[5]=o[7]=1-t.anchor.y),r.upload();var a=t._texture,h=a.baseTexture,u=t.tileTransform.localTransform,l=t.uvTransform,c=h.isPowerOfTwo&&a.frame.width===h.width&&a.frame.height===h.height;c&&(h._glTextures[e.CONTEXT_UID]?c=h.wrapMode!==n.WRAP_MODES.CLAMP:h.wrapMode===n.WRAP_MODES.CLAMP&&(h.wrapMode=n.WRAP_MODES.REPEAT));var d=c?this.simpleShader:this.shader;e.bindShader(d);var f=a.width,p=a.height,y=t._width,g=t._height;s.set(u.a*f/y,u.b*f/g,u.c*p/y,u.d*p/g,u.tx/y,u.ty/g),s.invert(),c?s.prepend(l.mapCoord):(d.uniforms.uMapCoord=l.mapCoord.toArray(!0),d.uniforms.uClampFrame=l.uClampFrame,d.uniforms.uClampOffset=l.uClampOffset),d.uniforms.uTransform=s.toArray(!0),d.uniforms.uColor=i.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,d.uniforms.uColor,h.premultipliedAlpha),d.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),d.uniforms.uSampler=e.bindTexture(a),e.setBlendMode(i.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha)),r.vao.draw(this.renderer.gl.TRIANGLES,6,0)},h);function h(t){!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,t));return e.shader=null,e.simpleShader=null,e.quad=null,e}e.default=a,i.WebGLRenderer.registerPlugin("tilingSprite",a)},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=h(r(54)),s=r(2),a=h(r(3));function h(t){return t&&t.__esModule?t:{default:t}}var u,l=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(c,u=n.Container),c.prototype.updateText=function(){for(var t=c.fonts[this._font.name],e=this._font.size/t.size,r=new n.Point,i=[],o=[],s=this.text.replace(/(?:\r\n|\r)/g,"\n"),a=s.length,h=this._maxWidth*t.size/this._font.size,u=null,l=0,d=0,f=0,p=-1,y=0,g=0,v=0,m=0;m<a;m++){var _=s.charCodeAt(m),x=s.charAt(m);if(/(?:\s)/.test(x)&&(p=m,y=l),"\r"!==x&&"\n"!==x){var b=t.chars[_];b&&(u&&b.kerning[u]&&(r.x+=b.kerning[u]),i.push({texture:b.texture,line:f,charCode:_,position:new n.Point(r.x+b.xOffset+this._letterSpacing/2,r.y+b.yOffset)}),r.x+=b.xAdvance+this._letterSpacing,l=r.x,v=Math.max(v,b.yOffset+b.texture.height),u=_,-1!==p&&0<h&&r.x>h&&(++g,n.utils.removeItems(i,1+p-g,1+m-p),m=p,p=-1,o.push(y),d=Math.max(d,y),f++,r.x=0,r.y+=t.lineHeight,u=null))}else o.push(l),d=Math.max(d,l),++f,++g,r.x=0,r.y+=t.lineHeight,u=null}var w=s.charAt(s.length-1);"\r"!==w&&"\n"!==w&&(/(?:\s)/.test(w)&&(l=y),o.push(l),d=Math.max(d,l));for(var T=[],E=0;E<=f;E++){var S=0;"right"===this._font.align?S=d-o[E]:"center"===this._font.align&&(S=(d-o[E])/2),T.push(S)}for(var M=i.length,O=this.tint,P=0;P<M;P++){var C=this._glyphs[P];C?C.texture=i[P].texture:(C=new n.Sprite(i[P].texture),this._glyphs.push(C)),C.position.x=(i[P].position.x+T[i[P].line])*e,C.position.y=i[P].position.y*e,C.scale.x=C.scale.y=e,C.tint=O,C.parent||this.addChild(C)}for(var A=M;A<this._glyphs.length;++A)this.removeChild(this._glyphs[A]);if(this._textWidth=d*e,this._textHeight=(r.y+t.lineHeight)*e,0!==this.anchor.x||0!==this.anchor.y)for(var I=0;I<M;I++)this._glyphs[I].x-=this._textWidth*this.anchor.x,this._glyphs[I].y-=this._textHeight*this.anchor.y;this._maxLineHeight=v*e},c.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},c.prototype.getLocalBounds=function(){return this.validate(),u.prototype.getLocalBounds.call(this)},c.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},c.registerFont=function(t,e){var r={},i=t.getElementsByTagName("info")[0],o=t.getElementsByTagName("common")[0],h=t.getElementsByTagName("page"),u=(0,s.getResolutionOfUrl)(h[0].getAttribute("file"),a.default.RESOLUTION),l={};r.font=i.getAttribute("face"),r.size=parseInt(i.getAttribute("size"),10),r.lineHeight=parseInt(o.getAttribute("lineHeight"),10)/u,r.chars={},e instanceof n.Texture&&(e=[e]);for(var d=0;d<h.length;d++){var f=h[d].getAttribute("id"),p=h[d].getAttribute("file");l[f]=e instanceof Array?e[d]:e[p]}for(var y=t.getElementsByTagName("char"),g=0;g<y.length;g++){var v=y[g],m=parseInt(v.getAttribute("id"),10),_=v.getAttribute("page")||0,x=new n.Rectangle(parseInt(v.getAttribute("x"),10)/u+l[_].frame.x/u,parseInt(v.getAttribute("y"),10)/u+l[_].frame.y/u,parseInt(v.getAttribute("width"),10)/u,parseInt(v.getAttribute("height"),10)/u);r.chars[m]={xOffset:parseInt(v.getAttribute("xoffset"),10)/u,yOffset:parseInt(v.getAttribute("yoffset"),10)/u,xAdvance:parseInt(v.getAttribute("xadvance"),10)/u,kerning:{},texture:new n.Texture(l[_].baseTexture,x),page:_}}for(var b=t.getElementsByTagName("kerning"),w=0;w<b.length;w++){var T=b[w],E=parseInt(T.getAttribute("first"),10)/u,S=parseInt(T.getAttribute("second"),10)/u,M=parseInt(T.getAttribute("amount"),10)/u;r.chars[S]&&(r.chars[S].kerning[E]=M)}return c.fonts[r.font]=r},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(c,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&0<=t?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=2<=t.length?parseInt(t[0],10):c.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),c);function c(t){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(t,e){if(!(t instanceof c))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,u.call(this));return r._textWidth=0,r._textHeight=0,r._glyphs=[],r._font={tint:void 0!==e.tint?e.tint:16777215,align:e.align||"left",name:null,size:0},r.font=e.font,r._text=t,r._maxWidth=0,r._maxLineHeight=0,r._letterSpacing=0,r._anchor=new o.default(function(){r.dirty=!0},r,0,0),r.dirty=!1,r.updateText(),r}(e.default=l).fonts={}},function(t,e,r){"use strict";var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),n=a(r(8)),o=a(r(15)),s=r(2);function a(t){return t&&t.__esModule?t:{default:t}}var h=i.DisplayObject,u=new i.Matrix;function l(){!function(t,e){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null}h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1,Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){var e=void 0;(this._cacheAsBitmap=t)?(this._cacheData||(this._cacheData=new l),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},h.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var r=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var a=this._filters[0].padding;r.pad(a)}r.ceil(i.settings.RESOLUTION);var h=t._activeRenderTarget,l=t.filterManager.filterStack,c=i.RenderTexture.create(r.width,r.height),d="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=d,o.default.addToCache(c.baseTexture,d),n.default.addToCache(c,d);var f=u;f.tx=-r.x,f.ty=-r.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,c,!0,f,!0),t.bindRenderTarget(h),t.filterManager.filterStack=l,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var p=new i.Sprite(c);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-r.x/r.width,p.anchor.y=-r.y/r.height,p.alpha=e,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},h.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},h.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),r=this.alpha;this.alpha=1;var a=t.context;e.ceil(i.settings.RESOLUTION);var h=i.RenderTexture.create(e.width,e.height),l="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=l,o.default.addToCache(h.baseTexture,l),n.default.addToCache(h,l);var c=u;this.transform.localTransform.copy(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,h,!0,c,!1),t.context=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new i.Sprite(h);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-e.x/e.width,d.anchor.y=-e.y/e.height,d.alpha=r,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},h.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),n.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},h.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},function(t,e,r){"use strict";var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));i.DisplayObject.prototype.name=null,i.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},function(t,e,r){"use strict";var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));i.DisplayObject.prototype.getGlobalPosition=function(t,e){var r=0<arguments.length&&void 0!==t?t:new i.Point,n=1<arguments.length&&void 0!==e&&e;return this.parent?this.parent.toGlobal(this.position,r,n):(r.x=this.position.x,r.y=this.position.y),r}},function(t,e,r){"use strict";e.__esModule=!0;var i=r(208);Object.defineProperty(e,"FXAAFilter",{enumerable:!0,get:function(){return c(i).default}});var n=r(209);Object.defineProperty(e,"NoiseFilter",{enumerable:!0,get:function(){return c(n).default}});var o=r(210);Object.defineProperty(e,"DisplacementFilter",{enumerable:!0,get:function(){return c(o).default}});var s=r(211);Object.defineProperty(e,"BlurFilter",{enumerable:!0,get:function(){return c(s).default}});var a=r(87);Object.defineProperty(e,"BlurXFilter",{enumerable:!0,get:function(){return c(a).default}});var h=r(91);Object.defineProperty(e,"BlurYFilter",{enumerable:!0,get:function(){return c(h).default}});var u=r(212);Object.defineProperty(e,"ColorMatrixFilter",{enumerable:!0,get:function(){return c(u).default}});var l=r(213);function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"AlphaFilter",{enumerable:!0,get:function(){return c(l).default}})},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));r(7);var n,o=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(s,n=i.Filter),s);function s(){return function(t,e){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}e.default=o},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));r(7);var o,s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,o=n.Filter),function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(a,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return r.noise=t,r.seed=e,r}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));r(7);var o,s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,o=n.Filter),a.prototype.apply=function(t,e,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,r)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(a,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),a);function a(t,e){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var r=new n.Matrix;t.renderable=!1;var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return i.maskSprite=t,i.maskMatrix=r,i.uniforms.mapSampler=t._texture,i.uniforms.filterMatrix=r,i.uniforms.scale={x:1,y:1},null==e&&(e=20),i.scale=new n.Point(e,e),i}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=a(r(87)),s=a(r(91));function a(t){return t&&t.__esModule?t:{default:t}}var h,u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,h=n.Filter),l.prototype.apply=function(t,e,r){var i=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,i,!0),this.blurYFilter.apply(t,i,r,!1),t.returnRenderTarget(i)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(l,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),l);function l(t,e,r,i){!function(t,e){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,h.call(this));return a.blurXFilter=new o.default(t,e,r,i),a.blurYFilter=new s.default(t,e,r,i),a.padding=0,a.resolution=r||n.settings.RESOLUTION,a.quality=e||4,a.blur=t||8,a}e.default=u},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));r(7);var o,s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,o=n.Filter),a.prototype._loadMatrix=function(t,e){var r=t;1<arguments.length&&void 0!==e&&e&&(this._multiply(r,this.uniforms.m,t),r=this._colorMatrix(r)),this.uniforms.m=r},a.prototype._multiply=function(t,e,r){return t[0]=e[0]*r[0]+e[1]*r[5]+e[2]*r[10]+e[3]*r[15],t[1]=e[0]*r[1]+e[1]*r[6]+e[2]*r[11]+e[3]*r[16],t[2]=e[0]*r[2]+e[1]*r[7]+e[2]*r[12]+e[3]*r[17],t[3]=e[0]*r[3]+e[1]*r[8]+e[2]*r[13]+e[3]*r[18],t[4]=e[0]*r[4]+e[1]*r[9]+e[2]*r[14]+e[3]*r[19]+e[4],t[5]=e[5]*r[0]+e[6]*r[5]+e[7]*r[10]+e[8]*r[15],t[6]=e[5]*r[1]+e[6]*r[6]+e[7]*r[11]+e[8]*r[16],t[7]=e[5]*r[2]+e[6]*r[7]+e[7]*r[12]+e[8]*r[17],t[8]=e[5]*r[3]+e[6]*r[8]+e[7]*r[13]+e[8]*r[18],t[9]=e[5]*r[4]+e[6]*r[9]+e[7]*r[14]+e[8]*r[19]+e[9],t[10]=e[10]*r[0]+e[11]*r[5]+e[12]*r[10]+e[13]*r[15],t[11]=e[10]*r[1]+e[11]*r[6]+e[12]*r[11]+e[13]*r[16],t[12]=e[10]*r[2]+e[11]*r[7]+e[12]*r[12]+e[13]*r[17],t[13]=e[10]*r[3]+e[11]*r[8]+e[12]*r[13]+e[13]*r[18],t[14]=e[10]*r[4]+e[11]*r[9]+e[12]*r[14]+e[13]*r[19]+e[14],t[15]=e[15]*r[0]+e[16]*r[5]+e[17]*r[10]+e[18]*r[15],t[16]=e[15]*r[1]+e[16]*r[6]+e[17]*r[11]+e[18]*r[16],t[17]=e[15]*r[2]+e[16]*r[7]+e[17]*r[12]+e[18]*r[17],t[18]=e[15]*r[3]+e[16]*r[8]+e[17]*r[13]+e[18]*r[18],t[19]=e[15]*r[4]+e[16]*r[9]+e[17]*r[14]+e[18]*r[19]+e[19],t},a.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},a.prototype.brightness=function(t,e){var r=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.greyscale=function(t,e){var r=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},a.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var r=Math.cos(t),i=Math.sin(t),n=(0,Math.sqrt)(1/3),o=[r+1/3*(1-r),1/3*(1-r)-n*i,1/3*(1-r)+n*i,0,0,1/3*(1-r)+n*i,r+1/3*(1-r),1/3*(1-r)-n*i,0,0,1/3*(1-r)-n*i,1/3*(1-r)+n*i,r+1/3*(1-r),0,0,0,0,0,1,0];this._loadMatrix(o,e)},a.prototype.contrast=function(t,e){var r=(t||0)+1,i=-.5*(r-1),n=[r,0,0,0,i,0,r,0,0,i,0,0,r,0,i,0,0,0,1,0];this._loadMatrix(n,e)},a.prototype.saturate=function(t,e){var r=e,i=2*(0<arguments.length&&void 0!==t?t:0)/3+1,n=-.5*(i-1),o=[i,n,n,0,0,n,i,n,0,0,n,n,i,0,0,0,0,0,1,0];this._loadMatrix(o,r)},a.prototype.desaturate=function(){this.saturate(-1)},a.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},a.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},a.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},a.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},a.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},a.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},a.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},a.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},a.prototype.colorTone=function(t,e,r,i,n){var o=((r=r||16770432)>>16&255)/255,s=(r>>8&255)/255,a=(255&r)/255,h=((i=i||3375104)>>16&255)/255,u=(i>>8&255)/255,l=(255&i)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,h,u,l,e=e||.15,0,o-h,s-u,a-l,0,0];this._loadMatrix(c,n)},a.prototype.night=function(t,e){var r=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.predator=function(t,e){var r=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(r,e)},a.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},a.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(a,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),a);function a(){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return t.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.alpha=1,t}(e.default=s).prototype.grayscale=s.prototype.greyscale},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1));r(7);var o,s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,o=n.Filter),function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(a,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),a);function a(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1;!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,o.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return e.alpha=t,e.glShaderKey="alpha",e}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=r(92);Object.defineProperty(e,"InteractionData",{enumerable:!0,get:function(){return h(i).default}});var n=r(215);Object.defineProperty(e,"InteractionManager",{enumerable:!0,get:function(){return h(n).default}});var o=r(95);Object.defineProperty(e,"interactiveTarget",{enumerable:!0,get:function(){return h(o).default}});var s=r(94);Object.defineProperty(e,"InteractionTrackingData",{enumerable:!0,get:function(){return h(s).default}});var a=r(93);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"InteractionEvent",{enumerable:!0,get:function(){return h(a).default}})},function(t,e,r){"use strict";e.__esModule=!0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=l(r(92)),s=l(r(93)),a=l(r(94)),h=l(r(12)),u=l(r(95));function l(t){return t&&t.__esModule?t:{default:t}}n.utils.mixins.delayMixin(n.DisplayObject.prototype,u.default);var c,d={target:null,data:{global:null}},f=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(p,c=h.default),p.prototype.hitTest=function(t,e){return d.target=null,d.data.global=t,e=e||this.renderer._lastObjectRendered,this.processInteractive(d,e,null,!0),d.target},p.prototype.setTargetElement=function(t,e){var r=1<arguments.length&&void 0!==e?e:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=r,this.addEvents()},p.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},p.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},p.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var r=this.activeInteractionData[e];if(r.originalEvent&&"touch"!==r.pointerType){var i=this.configureInteractionEventForDOMEvent(this.eventData,r.originalEvent,r);this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},p.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":i(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},p.prototype.dispatchEvent=function(t,e,r){r.stopped||(r.currentTarget=t,r.type=e,t.emit(e,r),t[e]&&t[e](r))},p.prototype.mapPositionToPoint=function(t,e,r){var i;i=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-i.left)*(this.interactionDOMElement.width/i.width)*n,t.y=(r-i.top)*(this.interactionDOMElement.height/i.height)*n},p.prototype.processInteractive=function(t,e,r,i,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n,h=!0;if(e.hitArea?(i&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:h=i=!1),a=!1):e._mask&&i&&(e._mask.containsPoint(o)||(h=i=!1)),h&&e.interactiveChildren&&e.children)for(var u=e.children,l=u.length-1;0<=l;l--){var c=u[l],d=this.processInteractive(t,c,r,i,a);if(d){if(!c.parent)continue;a=!1,d&&(t.target&&(i=!1),s=!0)}}return n&&(i&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),r&&r(t,e,!!s))),s},p.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},p.prototype.processPointerDown=function(t,e,r){var i=t.data,n=t.data.identifier;if(r)if(e.trackedPointers[n]||(e.trackedPointers[n]=new a.default(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===i.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===i.pointerType||"pen"===i.pointerType){var o=2===i.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},p.prototype.onPointerComplete=function(t,e,r){for(var i=this.normalizeToPointerData(t),n=i.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=i[s],h=this.getInteractionDataForPointerId(a),u=this.configureInteractionEventForDOMEvent(this.eventData,a,h);if(u.data.originalEvent=t,this.processInteractive(u,this.renderer._lastObjectRendered,r,e||!o),this.emit(e?"pointercancel":"pointerup"+o,u),"mouse"===a.pointerType||"pen"===a.pointerType){var l=2===a.button;this.emit(l?"rightup"+o:"mouseup"+o,u)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,u),this.releaseInteractionDataForPointerId(a.pointerId,h))}},p.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},p.prototype.processPointerCancel=function(t,e){var r=t.data,i=t.data.identifier;void 0!==e.trackedPointers[i]&&(delete e.trackedPointers[i],this.dispatchEvent(e,"pointercancel",t),"touch"===r.pointerType&&this.dispatchEvent(e,"touchcancel",t))},p.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},p.prototype.processPointerUp=function(t,e,r){var i=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===i.pointerType,h="mouse"===i.pointerType||"pen"===i.pointerType,u=!1;if(h){var l=2===i.button,c=a.default.FLAGS,d=l?c.RIGHT_DOWN:c.LEFT_DOWN,f=void 0!==o&&o.flags&d;r?(this.dispatchEvent(e,l?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,l?"rightclick":"click",t),u=!0)):f&&this.dispatchEvent(e,l?"rightupoutside":"mouseupoutside",t),o&&(l?o.rightDown=!1:o.leftDown=!1)}r?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(h&&!u||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},p.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var r=e.length,i=0;i<r;i++){var n=e[i],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t;var a="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},p.prototype.processPointerMove=function(t,e,r){var i=t.data,n="touch"===i.pointerType,o="mouse"===i.pointerType||"pen"===i.pointerType;o&&this.processPointerOverOut(t,e,r),this.moveWhenInside&&!r||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},p.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);i.data.originalEvent=e,this.processInteractive(i,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",i),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",i):this.releaseInteractionDataForPointerId(r.identifier)}},p.prototype.processPointerOverOut=function(t,e,r){var i=t.data,n=t.data.identifier,o="mouse"===i.pointerType||"pen"===i.pointerType,s=e.trackedPointers[n];r&&!s&&(s=e.trackedPointers[n]=new a.default(n)),void 0!==s&&(r&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},p.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],r=this.getInteractionDataForPointerId(e),i=this.configureInteractionEventForDOMEvent(this.eventData,e,r);"mouse"===(i.data.originalEvent=e).pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",i),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",i)},p.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,r=void 0;return 1===e||"mouse"===t.pointerType?r=this.mouse:this.activeInteractionData[e]?r=this.activeInteractionData[e]:((r=this.interactionDataPool.pop()||new o.default).identifier=e,this.activeInteractionData[e]=r),r.copyEvent(t),r},p.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},p.prototype.configureInteractionEventForDOMEvent=function(t,e,r){return t.data=r,this.mapPositionToPoint(r.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(r.global.x=r.global.x/this.resolution,r.global.y=r.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=r.global.x,e.globalY=r.global.y),r.originalEvent=e,t.reset(),t},p.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var r=0,i=t.changedTouches.length;r<i;r++){var n=t.changedTouches[r];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e},p.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},p);function p(t,e){!function(t,e){if(!(t instanceof p))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,c.call(this));return e=e||{},r.renderer=t,r.autoPreventDefault=void 0===e.autoPreventDefault||e.autoPreventDefault,r.interactionFrequency=e.interactionFrequency||10,r.mouse=new o.default,r.mouse.identifier=1,r.mouse.global.set(-999999),r.activeInteractionData={},r.activeInteractionData[1]=r.mouse,r.interactionDataPool=[],r.eventData=new s.default,r.interactionDOMElement=null,r.moveWhenInside=!1,r.eventsAdded=!1,r.mouseOverRenderer=!1,r.supportsTouchEvents="ontouchstart"in window,r.supportsPointerEvents=!!window.PointerEvent,r.onPointerUp=r.onPointerUp.bind(r),r.processPointerUp=r.processPointerUp.bind(r),r.onPointerCancel=r.onPointerCancel.bind(r),r.processPointerCancel=r.processPointerCancel.bind(r),r.onPointerDown=r.onPointerDown.bind(r),r.processPointerDown=r.processPointerDown.bind(r),r.onPointerMove=r.onPointerMove.bind(r),r.processPointerMove=r.processPointerMove.bind(r),r.onPointerOut=r.onPointerOut.bind(r),r.processPointerOverOut=r.processPointerOverOut.bind(r),r.onPointerOver=r.onPointerOver.bind(r),r.cursorStyles={default:"inherit",pointer:"pointer"},r.currentCursorMode=null,r.cursor=null,r._tempPoint=new n.Point,r.resolution=1,r.setTargetElement(r.renderer.view,r.renderer.resolution),r}e.default=f,n.WebGLRenderer.registerPlugin("interaction",f),n.CanvasRenderer.registerPlugin("interaction",f)},function(t,e,r){"use strict";e.__esModule=!0,e.shared=e.Resource=e.textureParser=e.getResourcePath=e.spritesheetParser=e.parseBitmapFontData=e.bitmapFontParser=e.Loader=void 0;var i=r(96);Object.defineProperty(e,"bitmapFontParser",{enumerable:!0,get:function(){return u(i).default}}),Object.defineProperty(e,"parseBitmapFontData",{enumerable:!0,get:function(){return i.parse}});var n=r(101);Object.defineProperty(e,"spritesheetParser",{enumerable:!0,get:function(){return u(n).default}}),Object.defineProperty(e,"getResourcePath",{enumerable:!0,get:function(){return n.getResourcePath}});var o=r(102);Object.defineProperty(e,"textureParser",{enumerable:!0,get:function(){return u(o).default}});var s=r(22);Object.defineProperty(e,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=u(r(83)),h=u(r(218));function u(t){return t&&t.__esModule?t:{default:t}}e.Loader=h.default;var l=new h.default;l.destroy=function(){},e.shared=l;var c=a.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?l:new h.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},function(t,e,r){"use strict";e.__esModule=!0,e.Loader=void 0;var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function n(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var o=u(r(97)),s=u(r(98)),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(99)),h=r(48);function u(t){return t&&t.__esModule?t:{default:t}}var l=/(#[\w-]+)?$/,c=e.Loader=(d.prototype.add=function(t,e,r,n){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"===(void 0===t?"undefined":i(t))&&(n=e||t.callback||t.onComplete,e=(r=t).url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=r,r=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof r&&(n=r,r=null),this.loading&&(!r||!r.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new h.Resource(t,e,r),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=r.parentResource,a=[],u=0;u<s.children.length;++u)s.children[u].isComplete||a.push(s.children[u]);var l=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=l;for(var c=0;c<a.length;++c)a[c].progressChunk=l;this.resources[t].progressChunk=l}return this._queue.push(this.resources[t]),this},d.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},d.prototype.use=function(t){return this._afterMiddleware.push(t),this},d.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},d.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,r=0;r<this._queue._tasks.length;++r)this._queue._tasks[r].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},d.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),r=void 0;if(r=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var i=l.exec(r)[0];-1!==(r=r.substr(0,r.length-i.length)).indexOf("?")?r+="&"+this.defaultQueryString:r+="?"+this.defaultQueryString,r+=i}return r},d.prototype._loadResource=function(t,e){var r=this;t._dequeue=e,a.eachSeries(this._beforeMiddleware,function(e,i){e.call(r,t,function(){i(t.isComplete?{}:null)})},function(){t.isComplete?r._onLoad(t):(t._onLoadBinding=t.onComplete.once(r._onLoad,r),t.load())},!0)},d.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},d.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},d.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),a.eachSeries(this._afterMiddleware,function(r,i){r.call(e,t,i)},function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()},!0)},function(t,e,r){e&&n(t.prototype,e),r&&n(t,r)}(d,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),d);function d(){var t=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;!function(t,e){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(e,r){return t._loadResource(e,r)},this._queue=a.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var i=0;i<d._defaultBeforeMiddleware.length;++i)this.pre(d._defaultBeforeMiddleware[i]);for(var n=0;n<d._defaultAfterMiddleware.length;++n)this.use(d._defaultAfterMiddleware[n])}c._defaultBeforeMiddleware=[],c._defaultAfterMiddleware=[],c.pre=function(t){return c._defaultBeforeMiddleware.push(t),c},c.use=function(t){return c._defaultAfterMiddleware.push(t),c}},function(t,e,r){"use strict";e.__esModule=!0;var i=u(r(22)),n=r(219),o=u(r(12)),s=u(r(102)),a=u(r(101)),h=u(r(96));function u(t){return t&&t.__esModule?t:{default:t}}var l,c=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(d,l=i.default),d.addPixiMiddleware=function(t){d._pixiMiddleware.push(t)},d.prototype.destroy=function(){this.removeAllListeners(),this.reset()},d);function d(t,e){!function(t,e){if(!(t instanceof d))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,l.call(this,t,e));o.default.call(r);for(var i=0;i<d._pixiMiddleware.length;++i)r.use(d._pixiMiddleware[i]());return r.onStart.add(function(t){return r.emit("start",t)}),r.onProgress.add(function(t,e){return r.emit("progress",t,e)}),r.onError.add(function(t,e,i){return r.emit("error",t,e,i)}),r.onLoad.add(function(t,e){return r.emit("load",t,e)}),r.onComplete.add(function(t,e){return r.emit("complete",t,e)}),r}for(var f in e.default=c,o.default.prototype)c.prototype[f]=o.default.prototype[f];c._pixiMiddleware=[n.blobMiddlewareFactory,s.default,a.default,h.default];var p=i.default.Resource;p.setExtensionXhrType("fnt",p.XHR_RESPONSE_TYPE.DOCUMENT)},function(t,e,r){"use strict";e.__esModule=!0,e.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===i.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var r=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=r,t.type=i.Resource.TYPE.IMAGE,void(t.data.onload=function(){o.revokeObjectURL(r),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+(0,n.encodeBinary)(t.xhr.responseText),t.type=i.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var i=r(48),n=r(100),o=window.URL||window.webkitURL},function(t,e,r){"use strict";e.__esModule=!0;var i=r(23);Object.defineProperty(e,"Mesh",{enumerable:!0,get:function(){return u(i).default}});var n=r(221);Object.defineProperty(e,"MeshRenderer",{enumerable:!0,get:function(){return u(n).default}});var o=r(222);Object.defineProperty(e,"CanvasMeshRenderer",{enumerable:!0,get:function(){return u(o).default}});var s=r(103);Object.defineProperty(e,"Plane",{enumerable:!0,get:function(){return u(s).default}});var a=r(223);Object.defineProperty(e,"NineSlicePlane",{enumerable:!0,get:function(){return u(a).default}});var h=r(224);function u(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"Rope",{enumerable:!0,get:function(){return u(h).default}})},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),n=s(r(6)),o=s(r(23));function s(t){return t&&t.__esModule?t:{default:t}}r(7);var a,h=i.Matrix.IDENTITY,u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,a=i.ObjectRenderer),l.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new i.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},l.prototype.render=function(t){var e=this.renderer,r=e.gl,s=t._texture;if(s.valid){var a=t._glDatas[e.CONTEXT_UID];a||(e.bindVao(null),(a={shader:this.shader,vertexBuffer:n.default.GLBuffer.createVertexBuffer(r,t.vertices,r.STREAM_DRAW),uvBuffer:n.default.GLBuffer.createVertexBuffer(r,t.uvs,r.STREAM_DRAW),indexBuffer:n.default.GLBuffer.createIndexBuffer(r,t.indices,r.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new n.default.VertexArrayObject(r).addIndex(a.indexBuffer).addAttribute(a.vertexBuffer,a.shader.attributes.aVertexPosition,r.FLOAT,!1,8,0).addAttribute(a.uvBuffer,a.shader.attributes.aTextureCoord,r.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=a),e.bindVao(a.vao),t.dirty!==a.dirty&&(a.dirty=t.dirty,a.uvBuffer.upload(t.uvs)),t.indexDirty!==a.indexDirty&&(a.indexDirty=t.indexDirty,a.indexBuffer.upload(t.indices)),t.vertexDirty!==a.vertexDirty&&(a.vertexDirty=t.vertexDirty,a.vertexBuffer.upload(t.vertices)),e.bindShader(a.shader),a.shader.uniforms.uSampler=e.bindTexture(s),e.state.setBlendMode(i.utils.correctBlendMode(t.blendMode,s.baseTexture.premultipliedAlpha)),a.shader.uniforms.uTransform&&(t.uploadUvTransform?a.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):a.shader.uniforms.uTransform=h.toArray(!0)),a.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),a.shader.uniforms.uColor=i.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,a.shader.uniforms.uColor,s.baseTexture.premultipliedAlpha);var u=t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?r.TRIANGLE_STRIP:r.TRIANGLES;a.vao.draw(u,t.indices.length,0)}},l);function l(t){!function(t,e){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t));return e.shader=null,e}e.default=u,i.WebGLRenderer.registerPlugin("mesh",u)},function(t,e,r){"use strict";e.__esModule=!0;var i,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),o=(i=r(23))&&i.__esModule?i:{default:i},s=(a.prototype.render=function(t){var e=this.renderer,r=e.context,i=t.worldTransform,n=e.resolution;e.roundPixels?r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n|0,i.ty*n|0):r.setTransform(i.a*n,i.b*n,i.c*n,i.d*n,i.tx*n,i.ty*n),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},a.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,r=0;r<e-2;r++){var i=2*r;this._renderDrawTriangle(t,i,2+i,4+i)}},a.prototype._renderTriangles=function(t){for(var e=t.indices,r=e.length,i=0;i<r;i+=3){var n=2*e[i],o=2*e[i+1],s=2*e[i+2];this._renderDrawTriangle(t,n,o,s)}},a.prototype._renderDrawTriangle=function(t,e,r,i){var n=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var h=a.baseTexture,u=h.source,l=h.width,c=h.height,d=void 0,f=void 0,p=void 0,y=void 0,g=void 0,v=void 0;if(t.uploadUvTransform){var m=t._uvTransform.mapCoord;d=(o[e]*m.a+o[e+1]*m.c+m.tx)*h.width,f=(o[r]*m.a+o[r+1]*m.c+m.tx)*h.width,p=(o[i]*m.a+o[i+1]*m.c+m.tx)*h.width,y=(o[e]*m.b+o[e+1]*m.d+m.ty)*h.height,g=(o[r]*m.b+o[r+1]*m.d+m.ty)*h.height,v=(o[i]*m.b+o[i+1]*m.d+m.ty)*h.height}else d=o[e]*h.width,f=o[r]*h.width,p=o[i]*h.width,y=o[e+1]*h.height,g=o[r+1]*h.height,v=o[i+1]*h.height;var _=s[e],x=s[r],b=s[i],w=s[e+1],T=s[r+1],E=s[i+1],S=t.canvasPadding/this.renderer.resolution;if(0<S){var M=S/Math.abs(t.worldTransform.a),O=S/Math.abs(t.worldTransform.d),P=(_+x+b)/3,C=(w+T+E)/3,A=_-P,I=w-C,R=Math.sqrt(A*A+I*I);_=P+A/R*(R+M),w=C+I/R*(R+O),I=T-C,x=P+(A=x-P)/(R=Math.sqrt(A*A+I*I))*(R+M),T=C+I/R*(R+O),I=E-C,b=P+(A=b-P)/(R=Math.sqrt(A*A+I*I))*(R+M),E=C+I/R*(R+O)}n.save(),n.beginPath(),n.moveTo(_,w),n.lineTo(x,T),n.lineTo(b,E),n.closePath(),n.clip();var D=d*g+y*p+f*v-g*p-y*f-d*v,N=_*g+y*b+x*v-g*b-y*x-_*v,L=d*x+_*p+f*b-x*p-_*f-d*b,k=d*g*b+y*x*p+_*f*v-_*g*p-y*f*b-d*x*v,B=w*g+y*E+T*v-g*E-y*T-w*v,F=d*T+w*p+f*E-T*p-w*f-d*E,j=d*g*E+y*T*p+w*f*v-w*g*p-y*f*E-d*T*v;n.transform(N/D,B/D,L/D,F/D,k/D,j/D),n.drawImage(u,0,0,l*h.resolution,c*h.resolution,0,0,l,c),n.restore(),this.renderer.invalidateBlendMode()}},a.prototype.renderMeshFlat=function(t){var e=this.renderer.context,r=t.vertices,i=r.length/2;e.beginPath();for(var n=1;n<i-2;++n){var o=2*n,s=r[o],a=r[1+o],h=r[2+o],u=r[3+o],l=r[4+o],c=r[5+o];e.moveTo(s,a),e.lineTo(h,u),e.lineTo(l,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},a.prototype.destroy=function(){this.renderer=null},a);function a(t){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.renderer=t}e.default=s,n.CanvasRenderer.registerPlugin("mesh",s)},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n=s(r(103)),o=s(r(26));function s(t){return t&&t.__esModule?t:{default:t}}var a,h=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(u,a=n.default),u.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,r=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*r,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*r,t[25]=t[27]=t[29]=t[31]=this._height},u.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,r=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*r,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*r,t[6]=t[14]=t[22]=t[30]=this._width},u.prototype._renderCanvas=function(t){var e=t.context,r=this.worldTransform,i=t.resolution,n=16777215!==this.tint,s=this._texture;n&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=o.default.getTintedTexture(this,this.tint));var a=n?this._tintedTexture:s.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var h=this.vertices,u=this._canvasUvs,l=n?0:s.frame.x,c=n?0:s.frame.y,d=l+s.frame.width,f=c+s.frame.height;u[0]=l,u[1]=l+this._leftWidth,u[2]=d-this._rightWidth,u[3]=d,u[4]=c,u[5]=c+this._topHeight,u[6]=f-this._bottomHeight,u[7]=f;for(var p=0;p<8;p++)u[p]*=s.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i|0,r.ty*i|0):e.setTransform(r.a*i,r.b*i,r.c*i,r.d*i,r.tx*i,r.ty*i);for(var y=0;y<3;y++)for(var g=0;g<3;g++){var v=2*g+8*y,m=Math.max(1,u[g+1]-u[g]),_=Math.max(1,u[y+5]-u[y+4]),x=Math.max(1,h[10+v]-h[v]),b=Math.max(1,h[11+v]-h[1+v]);e.drawImage(a,u[g],u[y+4],m,_,h[v],h[1+v],x,b)}},u.prototype._refresh=function(){a.prototype._refresh.call(this);var t=this.uvs,e=this._texture;this._origWidth=e.orig.width,this._origHeight=e.orig.height;var r=1/this._origWidth,i=1/this._origHeight;t[0]=t[8]=t[16]=t[24]=0,t[1]=t[3]=t[5]=t[7]=0,t[6]=t[14]=t[22]=t[30]=1,t[25]=t[27]=t[29]=t[31]=1,t[2]=t[10]=t[18]=t[26]=r*this._leftWidth,t[4]=t[12]=t[20]=t[28]=1-r*this._rightWidth,t[9]=t[11]=t[13]=t[15]=i*this._topHeight,t[17]=t[19]=t[21]=t[23]=1-i*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(u,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),u);function u(t,e,r,i,n){!function(t,e){if(!(t instanceof u))throw new TypeError("Cannot call a class as a function")}(this);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,a.call(this,t,4,4));return o._origWidth=t.orig.width,o._origHeight=t.orig.height,o._width=o._origWidth,o._height=o._origHeight,o._leftWidth=void 0!==e?e:10,o._rightWidth=void 0!==i?i:10,o._topHeight=void 0!==r?r:10,o._bottomHeight=void 0!==n?n:10,o._cachedTint=16777215,o._tintedTexture=null,o._canvasUvs=null,o.refresh(!0),o}e.default=h},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=(i=r(23))&&i.__esModule?i:{default:i},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.default),a.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,r=this.indices,i=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,i[0]=1,i[1]=1,r[0]=0,r[1]=1;for(var n=t.length,o=1;o<n;o++){var s=4*o,a=o/(n-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,i[s=2*o]=1,i[s+1]=1,r[s=2*o]=s,r[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},a.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],r=void 0,i=0,n=0,o=this.vertices,s=t.length,a=0;a<s;a++){var h=t[a],u=4*a;n=-((r=a<t.length-1?t[a+1]:h).x-e.x),i=r.y-e.y;var l=10*(1-a/(s-1));1<l&&(l=1);var c=Math.sqrt(i*i+n*n),d=this._texture.height/2;i/=c,n/=c,i*=d,n*=d,o[u]=h.x+i,o[1+u]=h.y+n,o[2+u]=h.x-i,o[3+u]=h.y-n,e=h}},a.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},a);function a(t,e){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return r.points=e,r.vertices=new Float32Array(4*e.length),r.uvs=new Float32Array(4*e.length),r.colors=new Float32Array(2*e.length),r.indices=new Uint16Array(2*e.length),r.autoUpdate=!0,r.refresh(),r}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=r(226);Object.defineProperty(e,"ParticleContainer",{enumerable:!0,get:function(){return o(i).default}});var n=r(227);function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"ParticleRenderer",{enumerable:!0,get:function(){return o(n).default}})},function(t,e,r){"use strict";e.__esModule=!0;function i(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var n,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),s=r(2),a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,n=o.Container),h.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},h.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},h.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},h.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},h.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,r=this.worldTransform,i=!0,n=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var h=0;h<this.children.length;++h){var u=this.children[h];if(u.visible){var l=u._texture.frame;if(e.globalAlpha=this.worldAlpha*u.alpha,u.rotation%(2*Math.PI)==0)i&&(e.setTransform(r.a,r.b,r.c,r.d,r.tx*t.resolution,r.ty*t.resolution),i=!1),n=u.anchor.x*(-l.width*u.scale.x)+u.position.x+.5,o=u.anchor.y*(-l.height*u.scale.y)+u.position.y+.5,s=l.width*u.scale.x,a=l.height*u.scale.y;else{i=i||!0,u.displayObjectUpdateTransform();var c=u.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),n=u.anchor.x*-l.width+.5,o=u.anchor.y*-l.height+.5,s=l.width,a=l.height}var d=u._texture.baseTexture.resolution;e.drawImage(u._texture.baseTexture.source,l.x*d,l.y*d,l.width*d,l.height*d,n*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},h.prototype.destroy=function(t){if(n.prototype.destroy.call(this,t),this._buffers)for(var e=0;e<this._buffers.length;++e)this._buffers[e].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},function(t,e,r){e&&i(t.prototype,e),r&&i(t,r)}(h,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,s.hex2rgb)(t,this.tintRgb)}}]),h);function h(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,e=arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,i=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this));return 16384<r&&(r=16384),t<r&&(r=t),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=r,s._glBuffers={},s._bufferUpdateIDs=[],s._updateID=0,s.interactiveChildren=!1,s.blendMode=o.BLEND_MODES.NORMAL,s.autoResize=i,s.roundPixels=!0,s.baseTexture=null,s.setProperties(e),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}e.default=a},function(t,e,r){"use strict";e.__esModule=!0;var i=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),n=a(r(228)),o=a(r(229)),s=r(2);function a(t){return t&&t.__esModule?t:{default:t}}var h,u=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(l,h=i.ObjectRenderer),l.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new n.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},l.prototype.start=function(){this.renderer.bindShader(this.shader)},l.prototype.render=function(t){var e=t.children,r=t._maxSize,n=t._batchSize,o=this.renderer,s=e.length;if(0!==s){r<s&&(s=r);var a=t._glBuffers[o.CONTEXT_UID];a=a||(t._glBuffers[o.CONTEXT_UID]=this.generateBuffers(t));var h=e[0]._texture.baseTexture;this.renderer.setBlendMode(i.utils.correctBlendMode(t.blendMode,h.premultipliedAlpha));var u=o.gl,l=t.worldTransform.copy(this.tempMatrix);l.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=l.toArray(!0),this.shader.uniforms.uColor=i.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(h);for(var c=!1,d=0,f=0;d<s;d+=n,f+=1){var p=s-d;if(n<p&&(p=n),f>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var y=a[f];y.uploadDynamic(e,d,p);var g=t._bufferUpdateIDs[f]||0;(c=c||y._updateID<g)&&(y._updateID=t._updateID,y.uploadStatic(e,d,p)),o.bindVao(y.vao),y.vao.draw(u.TRIANGLES,6*p)}}},l.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,r=[],i=t._maxSize,n=t._batchSize,s=t._properties,a=0;a<i;a+=n)r.push(new o.default(e,this.properties,s,n));return r},l.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,r=t._batchSize,i=t._properties;return new o.default(e,this.properties,i,r)},l.prototype.uploadVertices=function(t,e,r,i,n,o){for(var s=0,a=0,h=0,u=0,l=0;l<r;++l){var c=t[e+l],d=c._texture,f=c.scale.x,p=c.scale.y,y=d.trim,g=d.orig;y?(s=(a=y.x-c.anchor.x*g.width)+y.width,h=(u=y.y-c.anchor.y*g.height)+y.height):(s=g.width*(1-c.anchor.x),a=g.width*-c.anchor.x,h=g.height*(1-c.anchor.y),u=g.height*-c.anchor.y),i[o]=a*f,i[o+1]=u*p,i[o+n]=s*f,i[o+n+1]=u*p,i[o+2*n]=s*f,i[o+2*n+1]=h*p,i[o+3*n]=a*f,i[o+3*n+1]=h*p,o+=4*n}},l.prototype.uploadPosition=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].position;i[o]=a.x,i[o+1]=a.y,i[o+n]=a.x,i[o+n+1]=a.y,i[o+2*n]=a.x,i[o+2*n+1]=a.y,i[o+3*n]=a.x,i[o+3*n+1]=a.y,o+=4*n}},l.prototype.uploadRotation=function(t,e,r,i,n,o){for(var s=0;s<r;s++){var a=t[e+s].rotation;i[o]=a,i[o+n]=a,i[o+2*n]=a,i[o+3*n]=a,o+=4*n}},l.prototype.uploadUvs=function(t,e,r,i,n,o){for(var s=0;s<r;++s){var a=t[e+s]._texture._uvs;a?(i[o]=a.x0,i[o+1]=a.y0,i[o+n]=a.x1,i[o+n+1]=a.y1,i[o+2*n]=a.x2,i[o+2*n+1]=a.y2,i[o+3*n]=a.x3,i[o+3*n+1]=a.y3):(i[o]=0,i[o+1]=0,i[o+n]=0,i[o+n+1]=0,i[o+2*n]=0,i[o+2*n+1]=0,i[o+3*n]=0,i[o+3*n+1]=0),o+=4*n}},l.prototype.uploadTint=function(t,e,r,i,n,o){for(var a=0;a<r;++a){var h=t[e+a],u=h._texture.baseTexture.premultipliedAlpha,l=h.alpha,c=l<1&&u?(0,s.premultiplyTint)(h._tintRGB,l):h._tintRGB+(255*l<<24);i[o]=c,i[o+n]=c,i[o+2*n]=c,i[o+3*n]=c,o+=4*n}},l.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),h.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},l);function l(t){!function(t,e){if(!(t instanceof l))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,h.call(this,t));return e.shader=null,e.indexBuffer=null,e.properties=null,e.tempMatrix=new i.Matrix,e.CONTEXT_UID=0,e}e.default=u,i.WebGLRenderer.registerPlugin("particle",u)},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=(i=r(21))&&i.__esModule?i:{default:i},s=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(a,n=o.default),a);function a(t){return function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=o(r(6)),n=o(r(47));function o(t){return t&&t.__esModule?t:{default:t}}var s=(a.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,n.default)(this.size),this.indexBuffer=i.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW);for(var r=this.dynamicStride=0;r<this.dynamicProperties.length;++r){var o=this.dynamicProperties[r];o.offset=e,e+=o.size,this.dynamicStride+=o.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=i.default.GLBuffer.createVertexBuffer(t,s,t.STREAM_DRAW);for(var a=0,h=this.staticStride=0;h<this.staticProperties.length;++h){var u=this.staticProperties[h];u.offset=a,a+=u.size,this.staticStride+=u.size}var l=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(l),this.staticDataUint32=new Uint32Array(l),this.staticBuffer=i.default.GLBuffer.createVertexBuffer(t,l,t.STATIC_DRAW),this.vao=new i.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*d.offset):this.vao.addAttribute(this.dynamicBuffer,d.attribute,t.FLOAT,!1,4*this.dynamicStride,4*d.offset)}for(var f=0;f<this.staticProperties.length;++f){var p=this.staticProperties[f];p.unsignedByte?this.vao.addAttribute(this.staticBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*p.offset):this.vao.addAttribute(this.staticBuffer,p.attribute,t.FLOAT,!1,4*this.staticStride,4*p.offset)}},a.prototype.uploadDynamic=function(t,e,r){for(var i=0;i<this.dynamicProperties.length;i++){var n=this.dynamicProperties[i];n.uploadFunction(t,e,r,n.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(t,e,r){for(var i=0;i<this.staticProperties.length;i++){var n=this.staticProperties[i];n.uploadFunction(t,e,r,n.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},a);function a(t,e,r,i){!function(t,e){if(!(t instanceof a))throw new TypeError("Cannot call a class as a function")}(this),this.gl=t,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(var n=0;n<e.length;++n){var o=e[n];o={attribute:o.attribute,size:o.size,uploadFunction:o.uploadFunction,unsignedByte:o.unsignedByte,offset:o.offset},r[n]?this.dynamicProperties.push(o):this.staticProperties.push(o)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}e.default=s},function(t,e,r){"use strict";e.__esModule=!0;var i=r(231);Object.defineProperty(e,"webgl",{enumerable:!0,get:function(){return h(i).default}});var n=r(232);Object.defineProperty(e,"canvas",{enumerable:!0,get:function(){return h(n).default}});var o=r(49);Object.defineProperty(e,"BasePrepare",{enumerable:!0,get:function(){return h(o).default}});var s=r(104);Object.defineProperty(e,"CountLimiter",{enumerable:!0,get:function(){return h(s).default}});var a=r(233);function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"TimeLimiter",{enumerable:!0,get:function(){return h(a).default}})},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),s=(i=r(49))&&i.__esModule?i:{default:i},a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,n=s.default),h);function h(t){!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return e.uploadHookHelper=e.renderer,e.registerFindHook(c),e.registerUploadHook(u),e.registerUploadHook(l),e}function u(t,e){return e instanceof o.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function l(t,e){return e instanceof o.Graphics&&(!e.dirty&&!e.clearDirty&&e._webGL[t.plugins.graphics.CONTEXT_UID]||t.plugins.graphics.updateGraphics(e),!0)}function c(t,e){return t instanceof o.Graphics&&(e.push(t),!0)}e.default=a,o.WebGLRenderer.registerPlugin("prepare",a)},function(t,e,r){"use strict";e.__esModule=!0;var i,n,o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e}(r(1)),s=(i=r(49))&&i.__esModule?i:{default:i},a=(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,n=s.default),h.prototype.destroy=function(){n.prototype.destroy.call(this),this.ctx=null,this.canvas=null},h);function h(t){!function(t,e){if(!(t instanceof h))throw new TypeError("Cannot call a class as a function")}(this);var e=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,n.call(this,t));return(e.uploadHookHelper=e).canvas=document.createElement("canvas"),e.canvas.width=16,e.canvas.height=16,e.ctx=e.canvas.getContext("2d"),e.registerUploadHook(u),e}function u(t,e){if(e instanceof o.BaseTexture){var r=e.source,i=0===r.width?t.canvas.width:Math.min(t.canvas.width,r.width),n=0===r.height?t.canvas.height:Math.min(t.canvas.height,r.height);return t.ctx.drawImage(r,0,0,i,n,0,0,t.canvas.width,t.canvas.height),!0}return!1}e.default=a,o.CanvasRenderer.registerPlugin("prepare",a)},function(t,e,r){"use strict";e.__esModule=!0;var i=(n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n);function n(t){!function(t,e){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this),this.maxMilliseconds=t,this.frameStart=0}e.default=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=(n.prototype.toArray=function(){return[this.x,this.y]},n);function n(t,e){this.x=t,this.y=e}e.default=i},function(t,e,r){!function(){"use strict";function e(t){this.curves=[],this._3d=!1,t&&(this.curves=t,this._3d=this.curves[0]._3d)}var i=r(109);e.prototype={valueOf:function(){return this.toString()},toString:function(){return"["+this.curves.map(function(t){return i.pointsToString(t.points)}).join(", ")+"]"},addCurve:function(t){this.curves.push(t),this._3d=this._3d||t._3d},length:function(){return this.curves.map(function(t){return t.length()}).reduce(function(t,e){return t+e})},curve:function(t){return this.curves[t]},bbox:function(){for(var t=this.curves,e=t[0].bbox(),r=1;r<t.length;r++)i.expandbox(e,t[r].bbox());return e},offset:function(t){var r=[];return this.curves.forEach(function(e){r=r.concat(e.offset(t))}),new e(r)}},t.exports=e}()},function(t,e,r){var i=r(237),n={x:!1,y:!1};function o(t,e,r){if("Z"!==e){if("M"!==e){var i=[!1,n.x,n.y].concat(r),o=new(t.bind.apply(t,i)),s=r.slice(-2);return n={x:s[0],y:s[1]},o}n={x:r[0],y:r[1]}}}t.exports=function(t,e){for(var r,n,s=i(e).split(" "),a=new RegExp("[MLCQZ]",""),h=[],u={C:6,Q:4,L:2,M:2};s.length;)r=s.splice(0,1)[0],a.test(r)&&(n=o(t,r,s.splice(0,u[r]).map(parseFloat)))&&h.push(n);return new t.PolyBezier(h)}},function(t,e){t.exports=function(t){var e,r,i,n,o,s,a=(t=t.replace(/,/g," ").replace(/-/g," - ").replace(/-\s+/g,"-").replace(/([a-zA-Z])/g," $1 ")).replace(/([a-zA-Z])\s?/g,"|$1").split("|"),h=a.length,u=[],l=0,c=0,d=0,f=0,p=0,y=0,g=0,v=0,m="";for(e=1;e<h;e++)if(n=(i=(r=a[e]).substring(0,1)).toLowerCase(),o=(u=(u=r.replace(i,"").trim().split(" ")).filter(function(t){return""!==t}).map(parseFloat)).length,"m"===n){if(m+="M ","m"===i?(d+=u[0],f+=u[1]):(d=u[0],f=u[1]),m+=(l=d)+" "+(c=f)+" ",2<o)for(s=0;s<o;s+=2)"m"===i?(d+=u[s],f+=u[s+1]):(d=u[s],f=u[s+1]),m+=["L",d,f,""].join(" ")}else if("l"===n)for(s=0;s<o;s+=2)"l"===i?(d+=u[s],f+=u[s+1]):(d=u[s],f=u[s+1]),m+=["L",d,f,""].join(" ");else if("h"===n)for(s=0;s<o;s++)"h"===i?d+=u[s]:d=u[s],m+=["L",d,f,""].join(" ");else if("v"===n)for(s=0;s<o;s++)"v"===i?f+=u[s]:f=u[s],m+=["L",d,f,""].join(" ");else if("q"===n)for(s=0;s<o;s+=4)"q"===i?(p=d+u[s],y=f+u[s+1],d+=u[s+2],f+=u[s+3]):(p=u[s],y=u[s+1],d=u[s+2],f=u[s+3]),m+=["Q",p,y,d,f,""].join(" ");else if("t"===n)for(s=0;s<o;s+=2)p=d+(d-p),y=f+(f-y),"t"===i?(d+=u[s],f+=u[s+1]):(d=u[s],f=u[s+1]),m+=["Q",p,y,d,f,""].join(" ");else if("c"===n)for(s=0;s<o;s+=6)"c"===i?(p=d+u[s],y=f+u[s+1],g=d+u[s+2],v=f+u[s+3],d+=u[s+4],f+=u[s+5]):(p=u[s],y=u[s+1],g=u[s+2],v=u[s+3],d=u[s+4],f=u[s+5]),m+=["C",p,y,g,v,d,f,""].join(" ");else if("s"===n)for(s=0;s<o;s+=4)p=d+(d-g),y=f+(f-v),"s"===i?(g=d+u[s],v=f+u[s+1],d+=u[s+2],f+=u[s+3]):(g=u[s],v=u[s+1],d=u[s+2],f=u[s+3]),m+=["C",p,y,g,v,d,f,""].join(" ");else"z"===n&&(m+="Z ",d=l,f=c);return m.trim()}},function(t,e,r){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var n=i(r(5)),o=r(239),s=r(25),a=r(9),h=r(16),u=r(17),l=r(13),c=r(10),d=(f.prototype.getWhiteBoard=function(){return this.whiteBoard},f.prototype.getTopo=function(){return this.topo},f.prototype.syncView=function(){this.whiteBoard.clearContainer();var t=this.topo.getElements(),e=[l.Group,u.EdgeGroup,a.Edge,h.EdgeBundle,s.DataFlow,c.Node];t.sort(function(t,r){return n.indexOf(e,t.constructor)-n.indexOf(e,r.constructor)}),this.whiteBoard.addElements(t)},f);function f(t,e){this.topo=e,this.whiteBoard=new o.Application(t)}e.Drawer=d},function(t,e,r){"use strict";var i,n=this&&this.__extends||(i=function(t,e){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}),o=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var s,a=o(r(5)),h=(n(u,s=PIXI.Application),u.prototype.setup=function(){this.initApplication(),this.fitWrapperSize()},u.prototype.initApplication=function(){this.viewWrapper&&(this.renderer.resize(this.viewWrapper.clientWidth,this.viewWrapper.clientHeight),this.container=new PIXI.Container,this.viewWrapper.appendChild(this.view),this.container&&(this.stage.addChild(this.container),this.moveCenter(this.viewWrapper.clientWidth/2,this.viewWrapper.clientHeight/2),this.container.hitArea=new PIXI.Rectangle(0,0,this.viewWrapper.clientWidth,this.viewWrapper.clientHeight),this.container.interactive=!0,this.container.center=[this.viewWrapper.clientWidth/2,this.viewWrapper.clientHeight/2]))},u.prototype.moveCenter=function(t,e){if(t&&e&&this.container&&this.viewWrapper)return this.container.position.set(this.viewWrapper.clientWidth/2-t,this.viewWrapper.clientHeight/2-e),this.container},u.prototype.fitWrapperSize=function(){var t=this;this.viewWrapper&&this.renderer.resize(this.viewWrapper.clientWidth,this.viewWrapper.clientHeight),window.addEventListener("resize",function(){t.container&&t.viewWrapper&&(t.renderer.resize(t.viewWrapper.offsetWidth,t.viewWrapper.offsetHeight),t.moveCenter(t.viewWrapper.offsetWidth/2,t.viewWrapper.offsetHeight/2),t.container.hitArea=new PIXI.Rectangle(0,0,t.viewWrapper.offsetWidth,t.viewWrapper.offsetHeight),t.container.center=[t.viewWrapper.offsetWidth/2,t.viewWrapper.offsetHeight/2])})},u.prototype.getWrapperBoundings=function(){var t=this.getWrapper(),e=t?t.getBoundingClientRect():{width:0,height:0};return[e.width,e.height]},u.prototype.getContainerCenter=function(){return new PIXI.Point(this.viewWrapper.clientWidth/2,this.viewWrapper.clientHeight/2)},u.prototype.getWrapper=function(){if(this.domRegex)return document.getElementById(this.domRegex)},u.prototype.getContainer=function(){if(this.container)return this.container},u.prototype.clearContainer=function(){this.container&&this.container.removeChildren(0,this.container.children.length)},u.prototype.addElement=function(t){this.container&&this.container.addChild(t)},u.prototype.addElements=function(t){var e=this;return a.each(t,function(t){e.container&&t&&e.container.addChild(t)}),!0},u);function u(t,e){void 0===t&&(t=""),void 0===e&&(e=null);var r=s.call(this,e||{antialias:!0,height:0,width:0,autoResize:!0,resolution:2,backgroundColor:16777215,forceFXAA:!0,forceCanvas:!0})||this;return r.domRegex="",r.domRegex=t,r.viewWrapper=r.getWrapper(),r.setup(),r}e.Application=h},function(t,e,r){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var n=i(r(5)),o=r(9),s=r(17),a=r(13),h=r(10),u=(l.prototype.createMenu=function(){var t=document.createElement("DIV");return t.id="pop-menu",t.style.zIndex="100000",t.style.border="1px solid #CCCCCC;",t.setAttribute("style","position:fixed;background:#FFFFFF;width:auto;height:auto;border:1px solid #CCCCCC;-moz-box-shadow: 5px 5px 2px #888;-webkit-box-shadow: 5px 5px 2px #888;box-shadow: 5px 5px 2px #888;-webkit-border-radius: 4px;-moz-border-radius: 4px;border-radius: 4px;"),t},l.prototype.setClass=function(t){this.menuClass=t},l.prototype.getMenu=function(){return this.menu},l.prototype.hideMenu=function(){this.menu&&(this.menu.style.display="none")},l.prototype.showMenu=function(t){var e=this;if(this.isVisible){var r,i=document.getElementById(this.domId),o=[];if(this.highlightElement(t),n.each(this.menuItems,function(t){o.push(t.id)}),!this.menuItems)return this.menu.style.display="none",!0;r=o.join("#$%")+"#$%",this.menu.innerHTML="";var s,a,h=document.createElement("UL");if(h.setAttribute("style","list-style:none;margin:0px;padding:0px;"),this.menuClass&&h.setAttribute("class","ul"+this.menuClass),this.menu.appendChild(h),n.each(this.menuItems,function(i){-1!==r.indexOf(i.id+"#$%")&&((a=document.createElement("A")).id=i.id,a.innerHTML=i.label,a.setAttribute("style","cursor:pointer;text-decoration:none;line-height:25px;white-space:nowrap;display:block;margin:5px 15px;color:#000000;"),e.menuClass&&a.setAttribute("class","a"+e.menuClass),(s=document.createElement("LI")).setAttribute("style","line-height:22px;white-space:nowrap;margin:0px;"),e.menuClass&&s.setAttribute("class","li"+e.menuClass),s.appendChild(a),a.addEventListener("mouseover",function(e){var r,i=e||t;i.srcElement?r=i.srcElement:i.target&&(r=i.target),r.parentNode.style.background="#0088cc",r.style.color="#FFFFFF",r.style.fontWeight="bold"}),a.addEventListener("mouseout",function(e){var r,i=e||t;i.srcElement?r=i.srcElement:i.target&&(r=i.target),r.parentNode.style.background="#FFFFFF",r.style.color="#000000",r.style.fontWeight="normal"}),e.menuOnAction&&a.addEventListener("click",function(r){var i,n=r||t;n.srcElement?i=n.srcElement:n.target&&(i=n.target),e.menuOnAction(i.id),e.menu.style.display="none"}),h.appendChild(s)),a=null}),i){var u=document.getElementById("tooltip");u&&i.removeChild(u),i.appendChild(this.menu);var l=i.getBoundingClientRect().top,c=i.getBoundingClientRect().left,d=i.offsetHeight+l,f=i.offsetWidth+c,p=t.data.global.x+c,y=t.data.global.y+l;this.menu.style.display="block";var g=this.menu.offsetHeight,v=this.menu.offsetWidth;this.menu.style.left=v<f-p?p+20+"px":p-v-20+"px",this.menu.style.top=g+20<d-y?y-20+"px":0<y-g?y-g+20+"px":l+20+"px",i.addEventListener("click",function(){e.hideMenu()}),i.addEventListener("wheel",function(){e.hideMenu()})}}else this.hideMenu()},l.prototype.setMenuItems=function(t){this.menuItems=t},l.prototype.highlightElement=function(t){var e;e=t.target,t.target.parent&&(t.target.parent instanceof a.Group||t.target.parent instanceof s.EdgeGroup)&&(e=t.target.parent);var r=this.action.getSelectNodes(),i=this.action.getSelectGroups();e instanceof h.Node?(r.length<2&&this.action.removeHighLight(),this.action.setSelectNodes(e)):e instanceof o.Edge?(this.action.removeHighLight(),this.action.setSelectEdge(e),e.selectOn()):(e instanceof a.Group||e instanceof s.EdgeGroup)&&(i.length<2&&this.action.removeHighLight(),this.action.setSelectGroups(e))},l);function l(t,e,r){this.menuItems=[],this.domId=t,this.container=e.getContainer(),this.menu=this.createMenu(),this.isVisible=!0,this.menuItems=[],this.menuClass=null,this.action=r}e.PopMenu=u},function(t,e,r){"use strict";var i=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var r in t)Object.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e.default=t,e};Object.defineProperty(e,"__esModule",{value:!0});var n=i(r(5)),o=r(25),s=r(9),a=r(16),h=r(17),u=r(13),l=r(14),c=r(51),d=r(10),f=(p.prototype.addElement=function(t){this.addElements([t])},p.prototype.findEdgeBundleByID=function(t){return n.find(this.elements,function(e){return e instanceof a.EdgeBundle&&t===e.getBundleID()})},p.prototype.removeEdgeBundleByName=function(t){var e=this,r=this.getElements();return n.find(r,function(i){return i instanceof a.EdgeBundle&&t===i.name&&(e.getElements().splice(r.indexOf(i),1),!0)})},p.prototype.addElements=function(t){var e=this;n.each(t,function(t,r){if(t instanceof s.Edge){t.readyLinkArray(),t.defaultColor=t.defaultStyle.lineColor;var i=void 0,o=t.brotherEdges;0<o.length?(i=e.findEdgeBundleByID(t.edgeNodesSortUIDStr()))?i.addEdge(t):((i=new a.EdgeBundle(t)).defaultStyle=t.defaultStyle,i.setStyle({fillColor:33231}),i.addEdges(o),n.remove(e.elements,function(t){return-1<n.indexOf(o,t)}),e.elements.push(i)):e.elements.push(t)}else e.elements.push(t)})},p.prototype.getSortNodesUID=function(t){var e=[t.startNode,t.endNode];return[e[0].getUID(),e[1].getUID()].sort().join()},p.prototype.getElements=function(){return this.elements},p.prototype.createNode=function(t,e){return new d.Node(this.elements,t,this.selectedNodes,e)},p.prototype.createGroup=function(t){return new u.Group(this.elements,this,t)},p.prototype.createEdge=function(t,e,r){return new s.Edge(t,e,r)},p.prototype.createEdgeGroup=function(){return new h.EdgeGroup(this.elements,this)},p.prototype.createDataFlow=function(t,e){return new o.DataFlow(t,e)},p.prototype.createMultipleColor=function(t,e,r){return new c.MultipleColorLine(t,e,r)},p.prototype.createLabel=function(t,e,r){return new l.Label(t,e,r)},p.prototype.clear=function(){n.each(this.elements,function(t){t.destroy()}),n.remove(this.elements,function(t){return!t})},p.prototype.setSelectedNodes=function(t){n.includes(this.selectedNodes,t)||(this.selectedNodes.push(t),t.selectOn())},p.prototype.getSelectedNodes=function(){return this.selectedNodes},p.prototype.removeSelectedNodes=function(){return n.remove(this.selectedNodes)},p.prototype.setSelectedEdge=function(t){this.selectedEdge=t},p.prototype.getSelectedEdge=function(){return this.selectedEdge},p.prototype.removeSelectedEdge=function(){this.selectedEdge=void 0},p.prototype.setSelectedGroups=function(t){n.includes(this.selectedGroup,t)||(this.selectedGroup.push(t),t.selectOn())},p.prototype.getSelectedGroups=function(){return this.selectedGroup},p.prototype.removeSelectedGroups=function(){return this.selectedGroup=[]},p.prototype.getGroups=function(){var t=this.getElements();return n.filter(t,function(t){return t instanceof u.Group&&0<t.getChildNodes().length||t instanceof h.EdgeGroup&&0<t.childrenEdge.length})},p);function p(t){this.loader=null,this.selectedNodes=[],this.selectedGroup=[],this.elements=[],this.domRegex=t}e.Topo=f}],g.c=f,g.d=function(t,e,r){g.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},g.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},g.t=function(t,e){if(1&e&&(t=g(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(g.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)g.d(r,i,function(e){return t[e]}.bind(null,i));return r},g.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return g.d(e,"a",e),e},g.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},g.p="",g(g.s=110);function g(t){if(f[t])return f[t].exports;var r=f[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,g),r.l=!0,r.exports}var e,f});